#Область ИнформацияОДокументе

//************************//
// ИНФОРМАЦИЯ О ДОКУМЕНТЕ //
//************************//


// Возвращает доступные варианты печати документа
// Параметры:
//	ДокументСсылка - Ссылка на документ печати
// Возвращаемое значение:
//	Структура, каждая строка которой соответствует одному из вариантов печати. Первый элемент структуры - форма по умолчанию
Функция ПолучитьСписокПечатныхФорм(ДокументСсылка) Экспорт
	
	СтруктураМакетов = Новый Структура();
	
	СтруктураМакетов.Вставить("Чек"               , "Чек на оплату");
	СтруктураМакетов.Вставить("ЭтикетокИЦенников" , "Печать этикеток и ценников");
	
	Возврат СтруктураМакетов;
	
КонецФункции // ПолучитьСписокПечатныхФорм()


#КонецОбласти

#Область Сервисныефункции

Процедура ПроизвестиРаспределениеСуммыОплаты(СуммаДокумента, Товары) Экспорт
	
	Если СуммаДокумента = 0 ИЛИ Товары.Количество() = 0 Тогда
		Возврат;
	КонецЕсли;
	
	НаибольшаяСуммаВсего = 0;
	НомерСтроки = 0;
	
	КоэффициентРаспределения = ?(Товары.Итог("СуммаВсего") = 0, 0, СуммаДокумента / Товары.Итог("СуммаВсего"));
	
	Для Каждого Строка ИЗ Товары Цикл
		Строка.СуммаОплаты = Окр(Строка.СуммаВсего * КоэффициентРаспределения, 2);
		Если Строка.СуммаВсего > НаибольшаяСуммаВсего Тогда
			НаибольшаяСуммаВсего = Строка.СуммаВсего;
			НомерСтроки = Строка.НомерСтроки;
		КонецЕсли;
	КонецЦикла;
	
	Если НомерСтроки > 0 Тогда
		ОшибкаОкругления = СуммаДокумента - Товары.Итог("СуммаОплаты");
		СтрокаТаблицы = Товары.Найти(НомерСтроки, "НомерСтроки");
		//СтрокаТаблицы.СуммаОплаты = СтрокаТаблицы.СуммаОплаты + ?(ОшибкаОкругления <= 0, ОшибкаОкругления, - ОшибкаОкругления);
		СтрокаТаблицы.СуммаОплаты = СтрокаТаблицы.СуммаОплаты + ОшибкаОкругления;
	КонецЕсли;
	
КонецПроцедуры

#КонецОбласти