
Функция ПолучитьСвойства() Экспорт
	
	СтруктураСвойств = Новый Структура;
	СтруктураСвойств.Вставить("СкладКомпании");
	СтруктураСвойств.Вставить("Номенклатура");
	СтруктураСвойств.Вставить("Организация");
	СтруктураСвойств.Вставить("Подразделение");
	СтруктураСвойств.Вставить("ХарактеристикаНоменклатуры");
	СтруктураСвойств.Вставить("ПериодРегистратор");
	
	Возврат СтруктураСвойств;
	
КонецФункции

// Стандартная процедура настройки схемы компоновщика данных
//
Процедура ЗаполнитьНачальныеНастройки() Экспорт
	
	ОтчетыСервер.ЗаполнитьНачальныеОстатки(ЭтотОбъект);
	
КонецПроцедуры // ЗаполнитьНачальныеНастройки()

Процедура ПриИзмененииВарианта(ФормаОтчета) Экспорт
	
	СкладДляЯчейки = КомпоновщикНастроек.Настройки.ПараметрыДанных.НайтиЗначениеПараметра(Новый ПараметрКомпоновкиДанных("СкладДляЯчейки"));
	
	Если НЕ ЗначениеЗаполнено(СкладДляЯчейки.Значение) Тогда
		СкладДляЯчейки.Значение = обПраво("ОсновнойСкладКомпании");
	КонецЕсли;
	
КонецПроцедуры

Процедура ПриКомпоновкеРезультата(ДокументРезультат, ДанныеРасшифровки, СтандартнаяОбработка) Экспорт
	
	ОтчетыСервер.ВывестиОтчет(ЭтотОбъект, СхемаКомпоновкиДанных, КомпоновщикНастроек.Настройки, ДокументРезультат, ДанныеРасшифровки, СтандартнаяОбработка);
	
КонецПроцедуры

// Процедура помогает настроить отчет непосредственно перед выводом
//
Процедура ПередФормированиемМакетаКомпоновки(ПараметрСхемаКомпоновкиДанных, ПараметрКомпоновщикНастроек) Экспорт
	
	Поля = Новый Массив;
	Поля.Добавить("ПериодРегистратор");
	Поля.Добавить("ХозОперация");
	Поля.Добавить("Проект");
	Поля.Добавить("ДокументПродажи");
	
	ОтчетыСервер.КомпоновщикУстановитьОтборПустыхГруппировок(ПараметрКомпоновщикНастроек.Настройки.Структура, Поля);
	
КонецПроцедуры // ПередФормированиемМакетаКомпоновки()

// проверяет настройки отчета на корректность заполнения, возвращает "истина", если корректно, "ложь" - если нет
//
Процедура ОбработкаПроверкиЗаполнения(Отказ, ПроверяемыеРеквизиты)
	
	СкладДляЯчейки = КомпоновщикНастроек.Настройки.ПараметрыДанных.НайтиЗначениеПараметра(Новый ПараметрКомпоновкиДанных("СкладДляЯчейки")).Значение;
	Если НЕ ЗначениеЗаполнено(СкладДляЯчейки) Тогда
		Сообщение = Новый СообщениеПользователю();
		Сообщение.Текст = "Не задан склад для ячейки!";
		Сообщение.Сообщить();
		Отказ = Истина;
	КонецЕсли;
	
КонецПроцедуры
