
Процедура ПриЗаписи(Отказ)
	// Префикс должен быть только англоязычный
	Если ns_ОбщегоНазначения.ЕстьКириллица(Префикс) Тогда
		Отказ = Истина;
		ns_ОбщегоНазначения.СообщениеПользователю("В префиксе введены РУССКИЕ символы, можно вводить только АНГЛИЙСКИЕ");
	КонецЕсли;
	
	// Проверяем, стоит ли такой же префикс у другого магазина
	Если НЕ Отказ Тогда
		Запрос = Новый Запрос;
		Запрос.Текст = 
		"ВЫБРАТЬ
		|	ns_Магазины.Ссылка КАК Ссылка
		|ИЗ
		|	Справочник.ns_Магазины КАК ns_Магазины
		|ГДЕ
		|	ns_Магазины.Префикс = &Префикс
		|	И ns_Магазины.Ссылка <> &Ссылка";
		Запрос.УстановитьПараметр("Префикс", Префикс);
		Запрос.УстановитьПараметр("Ссылка", Ссылка);
		РезультатЗапроса = Запрос.Выполнить();
		
		Если НЕ РезультатЗапроса.Пустой() Тогда
			Выборка = РезультатЗапроса.Выбрать();
			Выборка.Следующий();
			ns_ОбщегоНазначения.СообщениеПользователю("Данный префикс уже установлен у Магазина: " + Выборка.Ссылка);
			Отказ = Истина;
		КонецЕсли;  
	КонецЕсли; 
КонецПроцедуры

