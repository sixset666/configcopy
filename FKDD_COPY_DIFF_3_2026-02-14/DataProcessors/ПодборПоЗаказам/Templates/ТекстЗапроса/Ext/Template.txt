#Область ПоУмолчанию
ВЫБРАТЬ
	тбл.Номенклатура               КАК Номенклатура,
	тбл.Номенклатура.ЭтоГруппа     КАК ЭтоГруппа,
	тбл.Номенклатура.Код           КАК НоменклатураКод,
	тбл.Номенклатура.Артикул       КАК НоменклатураАртикул,
	тбл.Номенклатура.АртикулДляПоиска КАК НоменклатураАртикулДляПоиска,
	тбл.Номенклатура.Производитель    КАК НоменклатураПроизводитель,
	тбл.Номенклатура.БазоваяЕдиницаИзмерения КАК Единица,
	тбл.ХарактеристикаНоменклатуры КАК ХарактеристикаНоменклатуры,
    тбл.Заказ                      КАК Заказ,
    тбл.Заказ.Номер                КАК ЗаказНомер,
    тбл.Заказ.Дата                 КАК ЗаказДата,
    тбл.Контрагент                 КАК Контрагент,
    ВЫБОР
    	КОГДА тбл.Заказ ССЫЛКА Документ.ЗаказВнутренний
    	ТОГДА тбл.Заказ.ПодразделениеПолучатель
    	ИНАЧЕ тбл.Заказ.Контрагент
    КОНЕЦ                          КАК ЗаказПредставлениеПолучателя,
    тбл.Заказано     КАК Заказано,
    тбл.Резерв       КАК Резерв,
    тбл.Распределено КАК Распределено,
    тбл.Остаток      КАК Остаток
    
ИЗ
(ВЫБРАТЬ РАЗЛИЧНЫЕ
	ЗаказыПокупателейОстатки.Номенклатура КАК Номенклатура,
	ЗаказыПокупателейОстатки.ХарактеристикаНоменклатуры КАК ХарактеристикаНоменклатуры,
	ЗаказыПокупателейОстатки.Заказ КАК Заказ,
	ЗаказыПокупателейОстатки.Контрагент КАК Контрагент,
	ЕСТЬNULL(ЗаказыПокупателейОстатки.ЗаказаноОстаток, 0) КАК Заказано,
	ЕСТЬNULL(ЗаказыПокупателейОстатки.РезервОстаток, 0) КАК Резерв,
	ЕСТЬNULL(ЗаказыРаспределениеОстатки.КоличествоОстаток, 0) КАК Распределено,
	ЕСТЬNULL(ЗаказыПокупателейОстатки.ЗаказаноОстаток, 0) - ЕСТЬNULL(ЗаказыПокупателейОстатки.РезервОстаток, 0) - ЕСТЬNULL(ЗаказыРаспределениеОстатки.КоличествоОстаток, 0) КАК Остаток
ИЗ
	РегистрНакопления.ЗаказыПокупателей.Остатки(
	//Момент
	,
	//УсловияОтбораОстатки
		{Номенклатура КАК Номенклатура,
		Номенклатура.Код КАК НоменклатураКод,
		Номенклатура.АртикулДляПоиска КАК НоменклатураАртикулДляПоиска,
		Номенклатура.Наименование КАК НоменклатураНаименование,
		Номенклатура.НаименованиеПолное КАК НоменклатураНаименованиеПолное,
		Номенклатура.Родитель КАК НоменклатураРодитель,
		Номенклатура.СтранаПроисхождения КАК СтранаПроисхождения,
		Номенклатура.Производитель КАК НоменклатураПроизводитель}) КАК ЗаказыПокупателейОстатки
	ЛЕВОЕ СОЕДИНЕНИЕ РегистрНакопления.ЗаказыРаспределение.Остатки(
	//Момент
	,
	//УсловияОтбораРаспределения
		{Номенклатура КАК Номенклатура,
		Номенклатура.Код КАК НоменклатураКод,
		Номенклатура.АртикулДляПоиска КАК НоменклатураАртикулДляПоиска,
		Номенклатура.Наименование КАК НоменклатураНаименование,
		Номенклатура.НаименованиеПолное КАК НоменклатураНаименованиеПолное,
		Номенклатура.Родитель КАК НоменклатураРодитель,
		Номенклатура.СтранаПроисхождения КАК СтранаПроисхождения,
		Номенклатура.Производитель КАК НоменклатураПроизводитель}
	) КАК ЗаказыРаспределениеОстатки
	ПО ЗаказыПокупателейОстатки.Заказ = ЗаказыРаспределениеОстатки.ЗаказПокупателя
		И ЗаказыПокупателейОстатки.Номенклатура = ЗаказыРаспределениеОстатки.Номенклатура
		И ЗаказыПокупателейОстатки.ХарактеристикаНоменклатуры = ЗаказыРаспределениеОстатки.ХарактеристикаНоменклатуры
	{ЛЕВОЕ СОЕДИНЕНИЕ Документ.ЗаказПокупателя.Товары КАК ЗаказПокупателяТовары
			ПО ЗаказыПокупателейОстатки.Заказ = ЗаказПокупателяТовары.Ссылка
				И ЗаказыПокупателейОстатки.Номенклатура = ЗаказПокупателяТовары.Номенклатура
				И ЗаказыПокупателейОстатки.ХарактеристикаНоменклатуры = ЗаказПокупателяТовары.ХарактеристикаНоменклатуры}
	{ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.НоменклатураПрименяемость КАК НоменклатураПрименяемость
	ПО ЗаказыПокупателейОстатки.Номенклатура = НоменклатураПрименяемость.Номенклатура}
	
{ГДЕ
	ЗаказПокупателяТовары.Поставщик КАК Поставщик,
	НоменклатураПрименяемость.Модель КАК НоменклатураПрименяемостьМодель
}

ОБЪЕДИНИТЬ

ВЫБРАТЬ РАЗЛИЧНЫЕ
	ЗаказыПокупателейОстатки.Номенклатура КАК Номенклатура,
	ЗаказыПокупателейОстатки.ХарактеристикаНоменклатуры КАК ХарактеристикаНоменклатуры,
	ЗаказыПокупателейОстатки.Заказ КАК Заказ,
	ЗаказыПокупателейОстатки.Контрагент КАК Контрагент,
	ЕСТЬNULL(ЗаказыПокупателейОстатки.ЗаказаноОстаток, 0) КАК Заказано,
	ЕСТЬNULL(ЗаказыПокупателейОстатки.РезервОстаток, 0) КАК Резерв,
	ЕСТЬNULL(ЗаказыРаспределениеОстатки.КоличествоОстаток, 0) КАК Распределено,
	ЕСТЬNULL(ЗаказыПокупателейОстатки.ЗаказаноОстаток, 0) - ЕСТЬNULL(ЗаказыПокупателейОстатки.РезервОстаток, 0) - ЕСТЬNULL(ЗаказыРаспределениеОстатки.КоличествоОстаток, 0) КАК Остаток
ИЗ
	РегистрНакопления.ЗаказыПокупателей.Остатки(
	//Момент
	,
	//УсловияОтбораОстатки
		{Номенклатура КАК Номенклатура,
		Номенклатура.Код КАК НоменклатураКод,
		Номенклатура.АртикулДляПоиска КАК НоменклатураАртикулДляПоиска,
		Номенклатура.Наименование КАК НоменклатураНаименование,
		Номенклатура.НаименованиеПолное КАК НоменклатураНаименованиеПолное,
		Номенклатура.Родитель КАК НоменклатураРодитель,
		Номенклатура.СтранаПроисхождения КАК СтранаПроисхождения,
		Номенклатура.Производитель КАК НоменклатураПроизводитель}) КАК ЗаказыПокупателейОстатки
	ЛЕВОЕ СОЕДИНЕНИЕ РегистрНакопления.ЗаказыРаспределение.Остатки(
	//Момент
	,
	//УсловияОтбораРаспределения
		{Номенклатура КАК Номенклатура,
		Номенклатура.Код КАК НоменклатураКод,
		Номенклатура.АртикулДляПоиска КАК НоменклатураАртикулДляПоиска,
		Номенклатура.Наименование КАК НоменклатураНаименование,
		Номенклатура.НаименованиеПолное КАК НоменклатураНаименованиеПолное,
		Номенклатура.Родитель КАК НоменклатураРодитель,
		Номенклатура.СтранаПроисхождения КАК СтранаПроисхождения,
		Номенклатура.Производитель КАК НоменклатураПроизводитель}
	) КАК ЗаказыРаспределениеОстатки
	ПО ЗаказыПокупателейОстатки.Заказ = ЗаказыРаспределениеОстатки.ЗаказПокупателя
		И ЗаказыПокупателейОстатки.Номенклатура = ЗаказыРаспределениеОстатки.Номенклатура
		И ЗаказыПокупателейОстатки.ХарактеристикаНоменклатуры = ЗаказыРаспределениеОстатки.ХарактеристикаНоменклатуры
	{ЛЕВОЕ СОЕДИНЕНИЕ Документ.ЗаказВнутренний.Товары КАК ЗаказВнутреннийТовары
			ПО ЗаказыПокупателейОстатки.Заказ = ЗаказВнутреннийТовары.Ссылка
				И ЗаказыПокупателейОстатки.Номенклатура = ЗаказВнутреннийТовары.Номенклатура
				И ЗаказыПокупателейОстатки.ХарактеристикаНоменклатуры = ЗаказВнутреннийТовары.ХарактеристикаНоменклатуры}
	{ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.НоменклатураПрименяемость КАК НоменклатураПрименяемость
	ПО ЗаказыПокупателейОстатки.Номенклатура = НоменклатураПрименяемость.Номенклатура}
	
{ГДЕ
	ЗаказВнутреннийТовары.Поставщик КАК Поставщик,
	НоменклатураПрименяемость.Модель КАК НоменклатураПрименяемостьМодель
}
//НачалоВыбораГрупп

ОБЪЕДИНИТЬ ВСЕ

ВЫБРАТЬ
	НоменклатураНоменклатура.Ссылка,
	NULL,
	NULL,
	NULL,
	0,
	0,
	0,
	0
ИЗ
	Справочник.Номенклатура КАК НоменклатураНоменклатура
ГДЕ
	НоменклатураНоменклатура.ЭтоГруппа
	И НоменклатураНоменклатура.Родитель = &Родитель
	
//КонецВыбораГрупп

) КАК тбл
 //СОЕДИНЕНИЯ
ГДЕ 
	(ВЫБОР
	КОГДА тбл.Номенклатура.ЭтоГруппа ТОГДА 1
	ИНАЧЕ тбл.//ИмяГлавнойКолонки
	КОНЕЦ) > 0

{ГДЕ
	тбл.Заказано     КАК Заказано,
	тбл.Резерв       КАК Резерв,
    тбл.Распределено КАК Распределено,
    тбл.Остаток      КАК Остаток
    //СВОЙСТВА}
    
УПОРЯДОЧИТЬ ПО
	Номенклатура.ЭтоГруппа УБЫВ,
	Номенклатура.Наименование,
	Заказ.Дата,
	Контрагент.Наименование
#КонецОбласти


#Область Документ_ЗаказПоставщику
ВЫБРАТЬ
	тбл.Номенклатура               КАК Номенклатура,
	тбл.Номенклатура.ЭтоГруппа     КАК ЭтоГруппа,
	тбл.Номенклатура.Код           КАК НоменклатураКод,
	тбл.Номенклатура.Артикул       КАК НоменклатураАртикул,
	тбл.Номенклатура.АртикулДляПоиска КАК НоменклатураАртикулДляПоиска,
	тбл.Номенклатура.Производитель    КАК НоменклатураПроизводитель,
	тбл.Номенклатура.БазоваяЕдиницаИзмерения КАК Единица,
	тбл.ХарактеристикаНоменклатуры КАК ХарактеристикаНоменклатуры,
    тбл.Заказ                      КАК Заказ,
    тбл.Заказ.Номер                КАК ЗаказНомер,
    тбл.Заказ.Дата                 КАК ЗаказДата,
    тбл.Контрагент                 КАК Контрагент,
    ВЫБОР
    	КОГДА тбл.Заказ ССЫЛКА Документ.ЗаказВнутренний
    	ТОГДА тбл.Заказ.ПодразделениеПолучатель
    	ИНАЧЕ тбл.Заказ.Контрагент
    КОНЕЦ                          КАК ЗаказПредставлениеПолучателя,
    тбл.Заказано     КАК Заказано,
    тбл.Резерв       КАК Резерв,
    тбл.Распределено КАК Распределено,
    тбл.Остаток      КАК Остаток,
    тбл.Подразделение КАК Подразделение,
    тбл.ТипЗаказа
//	тбл.Контрагент.Ссылка КАК Подразделение

    
ИЗ
(ВЫБРАТЬ РАЗЛИЧНЫЕ
	ЗаказыПокупателейОстатки.Номенклатура КАК Номенклатура,
	ЗаказыПокупателейОстатки.ХарактеристикаНоменклатуры КАК ХарактеристикаНоменклатуры,
	ЗаказыПокупателейОстатки.Заказ КАК Заказ,
	ЗаказыПокупателейОстатки.Контрагент КАК Контрагент,
	ЕСТЬNULL(ЗаказыПокупателейОстатки.ЗаказаноОстаток, 0) КАК Заказано,
	ЕСТЬNULL(ЗаказыПокупателейОстатки.РезервОстаток, 0) КАК Резерв,
	ЕСТЬNULL(ЗаказыРаспределениеОстатки.КоличествоОстаток, 0) КАК Распределено,
	ЕСТЬNULL(ЗаказыПокупателейОстатки.ЗаказаноОстаток, 0) - ЕСТЬNULL(ЗаказыПокупателейОстатки.РезервОстаток, 0) - ЕСТЬNULL(ЗаказыРаспределениеОстатки.КоличествоОстаток, 0) КАК Остаток,
	ЗаказыПокупателейОстатки.Заказ.ПодразделениеКомпании КАК Подразделение,
	ЗаказыПокупателейОстатки.Заказ.ТипЗаказа КАК ТипЗаказа

ИЗ
	РегистрНакопления.ЗаказыПокупателей.Остатки(
	//Момент
	,
	//УсловияОтбораОстатки
	 	{Номенклатура КАК Номенклатура,
		Номенклатура.Код КАК НоменклатураКод,
		Номенклатура.АртикулДляПоиска КАК НоменклатураАртикулДляПоиска,
		Номенклатура.Наименование КАК НоменклатураНаименование,
		Номенклатура.НаименованиеПолное КАК НоменклатураНаименованиеПолное,
		Номенклатура.Родитель КАК НоменклатураРодитель,
		Номенклатура.СтранаПроисхождения КАК СтранаПроисхождения,
		Номенклатура.Производитель КАК НоменклатураПроизводитель}) КАК ЗаказыПокупателейОстатки
	ЛЕВОЕ СОЕДИНЕНИЕ РегистрНакопления.ЗаказыРаспределение.Остатки(
	//Момент
	,
	//УсловияОтбораРаспределения
		{Номенклатура КАК Номенклатура,
		Номенклатура.Код КАК НоменклатураКод,
		Номенклатура.АртикулДляПоиска КАК НоменклатураАртикулДляПоиска,
		Номенклатура.Наименование КАК НоменклатураНаименование,
		Номенклатура.НаименованиеПолное КАК НоменклатураНаименованиеПолное,
		Номенклатура.Родитель КАК НоменклатураРодитель,
		Номенклатура.СтранаПроисхождения КАК СтранаПроисхождения,
		Номенклатура.Производитель КАК НоменклатураПроизводитель}
	) КАК ЗаказыРаспределениеОстатки
	ПО ЗаказыПокупателейОстатки.Заказ = ЗаказыРаспределениеОстатки.ЗаказПокупателя
		И ЗаказыПокупателейОстатки.Номенклатура = ЗаказыРаспределениеОстатки.Номенклатура
		И ЗаказыПокупателейОстатки.ХарактеристикаНоменклатуры = ЗаказыРаспределениеОстатки.ХарактеристикаНоменклатуры
	{ЛЕВОЕ СОЕДИНЕНИЕ Документ.ЗаказПокупателя.Товары КАК ЗаказПокупателяТовары
			ПО ЗаказыПокупателейОстатки.Заказ = ЗаказПокупателяТовары.Ссылка
				И ЗаказыПокупателейОстатки.Номенклатура = ЗаказПокупателяТовары.Номенклатура
				И ЗаказыПокупателейОстатки.ХарактеристикаНоменклатуры = ЗаказПокупателяТовары.ХарактеристикаНоменклатуры}
	{ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.НоменклатураПрименяемость КАК НоменклатураПрименяемость
	ПО ЗаказыПокупателейОстатки.Номенклатура = НоменклатураПрименяемость.Номенклатура}
	
{ГДЕ
	ЗаказПокупателяТовары.Поставщик КАК Поставщик,
	НоменклатураПрименяемость.Модель КАК НоменклатураПрименяемостьМодель
}

ОБЪЕДИНИТЬ

ВЫБРАТЬ РАЗЛИЧНЫЕ
	ЗаказыПокупателейОстатки.Номенклатура КАК Номенклатура,
	ЗаказыПокупателейОстатки.ХарактеристикаНоменклатуры КАК ХарактеристикаНоменклатуры,
	ЗаказыПокупателейОстатки.Заказ КАК Заказ,
	ЗаказыПокупателейОстатки.Контрагент КАК Контрагент,
	ЕСТЬNULL(ЗаказыПокупателейОстатки.ЗаказаноОстаток, 0) КАК Заказано,
	ЕСТЬNULL(ЗаказыПокупателейОстатки.РезервОстаток, 0) КАК Резерв,
	ЕСТЬNULL(ЗаказыРаспределениеОстатки.КоличествоОстаток, 0) КАК Распределено,
	ЕСТЬNULL(ЗаказыПокупателейОстатки.ЗаказаноОстаток, 0) - ЕСТЬNULL(ЗаказыПокупателейОстатки.РезервОстаток, 0) - ЕСТЬNULL(ЗаказыРаспределениеОстатки.КоличествоОстаток, 0) КАК Остаток,
	ЗаказыПокупателейОстатки.Заказ.ПодразделениеКомпании КАК Подразделение,
	ЗаказыПокупателейОстатки.Заказ.ТипЗаказа КАК ТипЗаказа

ИЗ
	РегистрНакопления.ЗаказыПокупателей.Остатки(
	//Момент
	,
	//УсловияОтбораОстатки
	 	{Номенклатура КАК Номенклатура,
		Номенклатура.Код КАК НоменклатураКод,
		Номенклатура.АртикулДляПоиска КАК НоменклатураАртикулДляПоиска,
		Номенклатура.Наименование КАК НоменклатураНаименование,
		Номенклатура.НаименованиеПолное КАК НоменклатураНаименованиеПолное,
		Номенклатура.Родитель КАК НоменклатураРодитель,
		Номенклатура.СтранаПроисхождения КАК СтранаПроисхождения,
		Номенклатура.Производитель КАК НоменклатураПроизводитель}) КАК ЗаказыПокупателейОстатки
	ЛЕВОЕ СОЕДИНЕНИЕ РегистрНакопления.ЗаказыРаспределение.Остатки(
	//Момент
	,
	//УсловияОтбораРаспределения
		{Номенклатура КАК Номенклатура,
		Номенклатура.Код КАК НоменклатураКод,
		Номенклатура.АртикулДляПоиска КАК НоменклатураАртикулДляПоиска,
		Номенклатура.Наименование КАК НоменклатураНаименование,
		Номенклатура.НаименованиеПолное КАК НоменклатураНаименованиеПолное,
		Номенклатура.Родитель КАК НоменклатураРодитель,
		Номенклатура.СтранаПроисхождения КАК СтранаПроисхождения,
		Номенклатура.Производитель КАК НоменклатураПроизводитель}
	) КАК ЗаказыРаспределениеОстатки
	ПО ЗаказыПокупателейОстатки.Заказ = ЗаказыРаспределениеОстатки.ЗаказПокупателя
		И ЗаказыПокупателейОстатки.Номенклатура = ЗаказыРаспределениеОстатки.Номенклатура
		И ЗаказыПокупателейОстатки.ХарактеристикаНоменклатуры = ЗаказыРаспределениеОстатки.ХарактеристикаНоменклатуры
	{ЛЕВОЕ СОЕДИНЕНИЕ Документ.ЗаказВнутренний.Товары КАК ЗаказВнутреннийТовары
			ПО ЗаказыПокупателейОстатки.Заказ = ЗаказВнутреннийТовары.Ссылка
				И ЗаказыПокупателейОстатки.Номенклатура = ЗаказВнутреннийТовары.Номенклатура
				И ЗаказыПокупателейОстатки.ХарактеристикаНоменклатуры = ЗаказВнутреннийТовары.ХарактеристикаНоменклатуры}
	{ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.НоменклатураПрименяемость КАК НоменклатураПрименяемость
	ПО ЗаказыПокупателейОстатки.Номенклатура = НоменклатураПрименяемость.Номенклатура}
	
{ГДЕ
	ЗаказВнутреннийТовары.Поставщик КАК Поставщик,
	НоменклатураПрименяемость.Модель КАК НоменклатураПрименяемостьМодель
}

//НачалоВыбораГрупп

ОБЪЕДИНИТЬ ВСЕ                                             
                                                           
ВЫБРАТЬ                                                    
	НоменклатураНоменклатура.Ссылка,                       
	NULL,                                                  
	NULL,                                                  
	NULL,                                                  
	0,
	0,
	0,
	0,
	NULL,
	NULL
ИЗ                                                         
	Справочник.Номенклатура КАК НоменклатураНоменклатура   
ГДЕ                                                        
	НоменклатураНоменклатура.ЭтоГруппа                     
	И НоменклатураНоменклатура.Родитель = &Родитель
	
//КонецВыбораГрупп

) КАК тбл
 //СОЕДИНЕНИЯ
ГДЕ 
	(ВЫБОР
	КОГДА тбл.Номенклатура.ЭтоГруппа ТОГДА 1
	ИНАЧЕ тбл.//ИмяГлавнойКолонки
	КОНЕЦ) > 0

{ГДЕ
	тбл.ТипЗаказа    КАК ТипЗаказа,
	тбл.Заказано     КАК Заказано,
	тбл.Резерв       КАК Резерв,
    тбл.Распределено КАК Распределено,
    тбл.Остаток      КАК Остаток,
    тбл.Подразделение КАК Подразделение
    //тбл.Контрагент.Ссылка КАК Подразделение
    //СВОЙСТВА}
    
УПОРЯДОЧИТЬ ПО
	Номенклатура.ЭтоГруппа УБЫВ,
	Номенклатура.Наименование,
	Заказ.Дата,
	Контрагент.Наименование
#КонецОбласти


#Область Документ_ЗаказВнутренний
ВЫБРАТЬ
	тбл.Номенклатура               КАК Номенклатура,
	тбл.Номенклатура.ЭтоГруппа     КАК ЭтоГруппа,
	тбл.Номенклатура.Код           КАК НоменклатураКод,
	тбл.Номенклатура.Артикул       КАК НоменклатураАртикул,
	тбл.Номенклатура.АртикулДляПоиска КАК НоменклатураАртикулДляПоиска,
	тбл.Номенклатура.Производитель    КАК НоменклатураПроизводитель,
	тбл.Номенклатура.БазоваяЕдиницаИзмерения КАК Единица,
	тбл.ХарактеристикаНоменклатуры КАК ХарактеристикаНоменклатуры,
    тбл.Заказ                      КАК Заказ,
    тбл.Заказ.Номер                КАК ЗаказНомер,
    тбл.Заказ.Дата                 КАК ЗаказДата,
    тбл.Контрагент                 КАК Контрагент,
    ВЫБОР
    	КОГДА тбл.Заказ ССЫЛКА Документ.ЗаказВнутренний
    	ТОГДА тбл.Заказ.ПодразделениеПолучатель
    	ИНАЧЕ тбл.Заказ.Контрагент
    КОНЕЦ                          КАК ЗаказПредставлениеПолучателя,
    тбл.Заказано     КАК Заказано,
    тбл.Резерв       КАК Резерв,
    тбл.Распределено КАК Распределено,
    тбл.Остаток      КАК Остаток
    
ИЗ    
(ВЫБРАТЬ РАЗЛИЧНЫЕ
	ЗаказыПокупателейОстатки.Номенклатура КАК Номенклатура,
	ЗаказыПокупателейОстатки.ХарактеристикаНоменклатуры КАК ХарактеристикаНоменклатуры,
	ЗаказыПокупателейОстатки.Заказ КАК Заказ,
	ЗаказыПокупателейОстатки.Контрагент КАК Контрагент,
	ЕСТЬNULL(ЗаказыПокупателейОстатки.ЗаказаноОстаток, 0) КАК Заказано,
	ЕСТЬNULL(ЗаказыПокупателейОстатки.РезервОстаток, 0) КАК Резерв,
	ЕСТЬNULL(ЗаказыРаспределениеОстатки.КоличествоОстаток, 0) КАК Распределено,
	ЕСТЬNULL(ЗаказыПокупателейОстатки.ЗаказаноОстаток, 0) - ЕСТЬNULL(ЗаказыПокупателейОстатки.РезервОстаток, 0) - ЕСТЬNULL(ЗаказыРаспределениеОстатки.КоличествоОстаток, 0) КАК Остаток
ИЗ
	РегистрНакопления.ЗаказыПокупателей.Остатки(
	//Момент
	, 
	//УсловияОтбораОстатки
	{Номенклатура КАК Номенклатура,
	Номенклатура.Код КАК НоменклатураКод,
	Номенклатура.АртикулДляПоиска КАК НоменклатураАртикулДляПоиска,
	Номенклатура.Наименование КАК НоменклатураНаименование,
	Номенклатура.НаименованиеПолное КАК НоменклатураНаименованиеПолное,
	Номенклатура.Родитель КАК НоменклатураРодитель,
	Номенклатура.СтранаПроисхождения КАК СтранаПроисхождения,
	Номенклатура.Производитель КАК НоменклатураПроизводитель}
	) КАК ЗаказыПокупателейОстатки
	ЛЕВОЕ СОЕДИНЕНИЕ РегистрНакопления.ЗаказыРаспределение.Остатки(
	//Момент
	, 
	//УсловияОтбораРаспределения
	{Номенклатура КАК Номенклатура,
	Номенклатура.Код КАК НоменклатураКод,
	Номенклатура.АртикулДляПоиска КАК НоменклатураАртикулДляПоиска,
	Номенклатура.Наименование КАК НоменклатураНаименование,
	Номенклатура.НаименованиеПолное КАК НоменклатураНаименованиеПолное,
	Номенклатура.Родитель КАК НоменклатураРодитель,
	Номенклатура.СтранаПроисхождения КАК СтранаПроисхождения,
	Номенклатура.Производитель КАК НоменклатураПроизводитель}
	) КАК ЗаказыРаспределениеОстатки
	ПО ЗаказыПокупателейОстатки.Заказ = ЗаказыРаспределениеОстатки.ЗаказПокупателя
		И ЗаказыПокупателейОстатки.Номенклатура = ЗаказыРаспределениеОстатки.Номенклатура
		И ЗаказыПокупателейОстатки.ХарактеристикаНоменклатуры = ЗаказыРаспределениеОстатки.ХарактеристикаНоменклатуры
	{ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.НоменклатураПрименяемость КАК НоменклатураПрименяемость
	ПО ЗаказыПокупателейОстатки.Номенклатура = НоменклатураПрименяемость.Номенклатура}

{ГДЕ
 	НоменклатураПрименяемость.Модель КАК НоменклатураПрименяемостьМодель
}
	
//НачалоВыбораГрупп

ОБЪЕДИНИТЬ ВСЕ                                             
                                                           
ВЫБРАТЬ                                                    
	НоменклатураНоменклатура.Ссылка,                       
	NULL,                                                                 
	NULL,                                                  
	NULL,                                                  
	0,
	0,
	0,
	0
ИЗ                                                         
	Справочник.Номенклатура КАК НоменклатураНоменклатура   
ГДЕ                                                        
	НоменклатураНоменклатура.ЭтоГруппа                     
	И НоменклатураНоменклатура.Родитель = &Родитель
	
//КонецВыбораГрупп

) КАК тбл
 //СОЕДИНЕНИЯ

ГДЕ 
	(ВЫБОР
	КОГДА тбл.Номенклатура.ЭтоГруппа ТОГДА 1
	ИНАЧЕ тбл.//ИмяГлавнойКолонки
	КОНЕЦ) > 0

{ГДЕ
	тбл.Заказано     КАК Заказано,
	тбл.Резерв       КАК Резерв,
    тбл.Распределено КАК Распределено,
    тбл.Остаток      КАК Остаток
    //СВОЙСТВА}
    
УПОРЯДОЧИТЬ ПО
	Номенклатура.ЭтоГруппа УБЫВ,
	Номенклатура.Наименование,
	Заказ.Дата,
	Контрагент.Наименование
#КонецОбласти


#Область Документ_КорректировкаЗаказаПокупателя
ВЫБРАТЬ
	тбл.Номенклатура               КАК Номенклатура,
	тбл.Номенклатура.ЭтоГруппа     КАК ЭтоГруппа,
	тбл.Номенклатура.Код           КАК НоменклатураКод,
	тбл.Номенклатура.Артикул       КАК НоменклатураАртикул,
	тбл.Номенклатура.АртикулДляПоиска КАК НоменклатураАртикулДляПоиска,
	тбл.Номенклатура.Производитель    КАК НоменклатураПроизводитель,
	тбл.Номенклатура.БазоваяЕдиницаИзмерения КАК Единица,
	тбл.ХарактеристикаНоменклатуры КАК ХарактеристикаНоменклатуры,
    NULL                           КАК Заказ,
    """"                           КАК ЗаказНомер,
    """"                           КАК ЗаказДата,
    NULL                           КАК Контрагент,
    """"                           КАК ЗаказПредставлениеПолучателя,
    тбл.Заказано     КАК Заказано,
    тбл.Резерв       КАК Резерв,
    тбл.Распределено КАК Распределено,
    тбл.Остаток      КАК Остаток
    
ИЗ    
(ВЫБРАТЬ РАЗЛИЧНЫЕ
	ЗаказыПокупателейОстатки.Номенклатура КАК Номенклатура,
	ЗаказыПокупателейОстатки.ХарактеристикаНоменклатуры КАК ХарактеристикаНоменклатуры,
	ЕСТЬNULL(ЗаказыПокупателейОстатки.ЗаказаноОстаток, 0) КАК Заказано,
	ЕСТЬNULL(ЗаказыПокупателейОстатки.РезервОстаток, 0) КАК Резерв,
	ЕСТЬNULL(ЗаказыРаспределениеОстатки.КоличествоОстаток, 0) КАК Распределено,
	ЕСТЬNULL(ЗаказыПокупателейОстатки.ЗаказаноОстаток, 0) - ЕСТЬNULL(ЗаказыПокупателейОстатки.РезервОстаток, 0) - ЕСТЬNULL(ЗаказыРаспределениеОстатки.КоличествоОстаток, 0) КАК Остаток
ИЗ
	РегистрНакопления.ЗаказыПокупателей.Остатки(
	//Момент
	, 
	//УсловияОтбораОстатки
	{Номенклатура КАК Номенклатура,
	Номенклатура.Код КАК НоменклатураКод,
	Номенклатура.АртикулДляПоиска КАК НоменклатураАртикулДляПоиска,
	Номенклатура.Наименование КАК НоменклатураНаименование,
	Номенклатура.НаименованиеПолное КАК НоменклатураНаименованиеПолное,
	Номенклатура.Родитель КАК НоменклатураРодитель,
	Номенклатура.СтранаПроисхождения КАК СтранаПроисхождения,
	Номенклатура.Производитель КАК НоменклатураПроизводитель}
	) КАК ЗаказыПокупателейОстатки
	ЛЕВОЕ СОЕДИНЕНИЕ РегистрНакопления.ЗаказыРаспределение.Остатки(
	//Момент
	,
	//УсловияОтбораРаспределения
	{Номенклатура КАК Номенклатура,
	Номенклатура.Код КАК НоменклатураКод,
	Номенклатура.АртикулДляПоиска КАК НоменклатураАртикулДляПоиска,
	Номенклатура.Наименование КАК НоменклатураНаименование,
	Номенклатура.НаименованиеПолное КАК НоменклатураНаименованиеПолное,
	Номенклатура.Родитель КАК НоменклатураРодитель,
	Номенклатура.СтранаПроисхождения КАК СтранаПроисхождения,
	Номенклатура.Производитель КАК НоменклатураПроизводитель}
	) КАК ЗаказыРаспределениеОстатки
	ПО ЗаказыПокупателейОстатки.Заказ = ЗаказыРаспределениеОстатки.ЗаказПокупателя
		И ЗаказыПокупателейОстатки.Номенклатура = ЗаказыРаспределениеОстатки.Номенклатура
		И ЗаказыПокупателейОстатки.ХарактеристикаНоменклатуры = ЗаказыРаспределениеОстатки.ХарактеристикаНоменклатуры
	{ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.НоменклатураПрименяемость КАК НоменклатураПрименяемость
	ПО ЗаказыПокупателейОстатки.Номенклатура = НоменклатураПрименяемость.Номенклатура}
{ГДЕ
	НоменклатураПрименяемость.Модель КАК НоменклатураПрименяемостьМодель
}
	
//НачалоВыбораГрупп

ОБЪЕДИНИТЬ ВСЕ                                             
                                                           
ВЫБРАТЬ                                                    
	НоменклатураНоменклатура.Ссылка,                       
	NULL,                                                  
	0,
	0,
	0,
	0
ИЗ                                                         
	Справочник.Номенклатура КАК НоменклатураНоменклатура   
ГДЕ                                                        
	НоменклатураНоменклатура.ЭтоГруппа                     
	И НоменклатураНоменклатура.Родитель = &Родитель
	
//КонецВыбораГрупп

) КАК тбл
//СОЕДИНЕНИЯ
ГДЕ 
	(ВЫБОР
	КОГДА тбл.Номенклатура.ЭтоГруппа ТОГДА 1
	ИНАЧЕ тбл.//ИмяГлавнойКолонки
	КОНЕЦ) > 0

{ГДЕ
	тбл.Заказано     КАК Заказано,
	тбл.Резерв       КАК Резерв,
    тбл.Распределено КАК Распределено,
    тбл.Остаток      КАК Остаток
    //СВОЙСТВА}
    
УПОРЯДОЧИТЬ ПО
	Номенклатура.ЭтоГруппа УБЫВ,
	Номенклатура.Наименование
#КонецОбласти


#Область Документ_КорректировкаЗаказаПоставщику
ВЫБРАТЬ
	тбл.Номенклатура               КАК Номенклатура,
	тбл.Номенклатура.ЭтоГруппа     КАК ЭтоГруппа,
	тбл.Номенклатура.Код           КАК НоменклатураКод,
	тбл.Номенклатура.Артикул       КАК НоменклатураАртикул,
	тбл.Номенклатура.АртикулДляПоиска КАК НоменклатураАртикулДляПоиска,
	тбл.Номенклатура.Производитель    КАК НоменклатураПроизводитель,
	тбл.Номенклатура.БазоваяЕдиницаИзмерения КАК Единица,
	тбл.ХарактеристикаНоменклатуры КАК ХарактеристикаНоменклатуры,
    NULL                           КАК Заказ,
    """"                           КАК ЗаказНомер,
    """"                           КАК ЗаказДата,
    NULL                           КАК Контрагент,
    """"                           КАК ЗаказПредставлениеПолучателя,
    тбл.Заказано     КАК Заказано,
    тбл.Резерв       КАК Резерв,
    тбл.Распределено КАК Распределено,
    тбл.Остаток      КАК Остаток
    
ИЗ    
(ВЫБРАТЬ РАЗЛИЧНЫЕ
	ЗаказыПоставщикамОстатки.Номенклатура КАК Номенклатура,
	ЗаказыПоставщикамОстатки.ХарактеристикаНоменклатуры КАК ХарактеристикаНоменклатуры,
	ЕСТЬNULL(ЗаказыПоставщикамОстатки.ЗаказаноОстаток, 0) КАК Заказано,
	0 КАК Резерв,
	ЕСТЬNULL(ЗаказыРаспределениеОстатки.КоличествоОстаток, 0) КАК Распределено,
	ЕСТЬNULL(ЗаказыПоставщикамОстатки.ЗаказаноОстаток, 0) - ЕСТЬNULL(ЗаказыРаспределениеОстатки.КоличествоОстаток, 0) КАК Остаток
ИЗ
	РегистрНакопления.ЗаказыПоставщикам.Остатки(
	//Момент
	, 
	//УсловияОтбораОстатки
	{Номенклатура КАК Номенклатура,
	Номенклатура.Код КАК НоменклатураКод,
	Номенклатура.АртикулДляПоиска КАК НоменклатураАртикулДляПоиска,
	Номенклатура.Наименование КАК НоменклатураНаименование,
	Номенклатура.НаименованиеПолное КАК НоменклатураНаименованиеПолное,
	Номенклатура.Родитель КАК НоменклатураРодитель,
	Номенклатура.СтранаПроисхождения КАК СтранаПроисхождения,
	Номенклатура.Производитель КАК НоменклатураПроизводитель}
	) КАК ЗаказыПоставщикамОстатки
	ЛЕВОЕ СОЕДИНЕНИЕ РегистрНакопления.ЗаказыРаспределение.Остатки(
	//Момент
	, 
	//УсловияОтбораРаспределения
	{Номенклатура КАК Номенклатура,
	Номенклатура.Код КАК НоменклатураКод,
	Номенклатура.АртикулДляПоиска КАК НоменклатураАртикулДляПоиска,
	Номенклатура.Наименование КАК НоменклатураНаименование,
	Номенклатура.НаименованиеПолное КАК НоменклатураНаименованиеПолное,
	Номенклатура.Родитель КАК НоменклатураРодитель,
	Номенклатура.СтранаПроисхождения КАК СтранаПроисхождения,
	Номенклатура.Производитель КАК НоменклатураПроизводитель}
	) КАК ЗаказыРаспределениеОстатки
	ПО ЗаказыПоставщикамОстатки.ЗаказПоставщику = ЗаказыРаспределениеОстатки.ЗаказПоставщика
		И ЗаказыПоставщикамОстатки.Номенклатура = ЗаказыРаспределениеОстатки.Номенклатура
		И ЗаказыПоставщикамОстатки.ХарактеристикаНоменклатуры = ЗаказыРаспределениеОстатки.ХарактеристикаНоменклатуры
	{ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.НоменклатураПрименяемость КАК НоменклатураПрименяемость
	ПО ЗаказыПоставщикамОстатки.Номенклатура = НоменклатураПрименяемость.Номенклатура}

{ГДЕ
	НоменклатураПрименяемость.Модель КАК НоменклатураПрименяемостьМодель
}
	
//НачалоВыбораГрупп

ОБЪЕДИНИТЬ ВСЕ                                             
                                                           
ВЫБРАТЬ                                                    
	НоменклатураНоменклатура.Ссылка,                       
	NULL,                                                  
	0,
	0,
	0,
	0
ИЗ                                                         
	Справочник.Номенклатура КАК НоменклатураНоменклатура   
ГДЕ                                                        
	НоменклатураНоменклатура.ЭтоГруппа                     
	И НоменклатураНоменклатура.Родитель = &Родитель
	
//КонецВыбораГрупп

) КАК тбл
//СОЕДИНЕНИЯ

ГДЕ 
	(ВЫБОР
	КОГДА тбл.Номенклатура.ЭтоГруппа ТОГДА 1
	ИНАЧЕ тбл.//ИмяГлавнойКолонки
	КОНЕЦ) > 0

{ГДЕ
	тбл.Заказано     КАК Заказано,
	тбл.Резерв       КАК Резерв,
    тбл.Распределено КАК Распределено,
    тбл.Остаток      КАК Остаток
    //СВОЙСТВА}
    
УПОРЯДОЧИТЬ ПО
	Номенклатура.ЭтоГруппа УБЫВ,
	Номенклатура.Наименование
#КонецОбласти


#Область Документ_ПеремещениеРезервов
ВЫБРАТЬ
	ЗаказыПокупателей.Номенклатура КАК Номенклатура,
	ЗаказыПокупателей.ХарактеристикаНоменклатуры КАК ХарактеристикаНоменклатуры,
	ЗаказыПокупателей.Заказ КАК Заказ,
	ЗаказыПокупателей.Контрагент КАК Контрагент,
	ЗаказыПокупателей.СкладКомпании КАК СкладКомпании,
	ЗаказыПокупателей.Резерв КАК Резерв
ПОМЕСТИТЬ
	ТаблицаДвиженийДокумента
ИЗ
	РегистрНакопления.ЗаказыПокупателей КАК ЗаказыПокупателей
ГДЕ
	ЗаказыПокупателей.Регистратор = &ДокументРегистратор И 
	ЗаказыПокупателей.ВидДвижения = ЗНАЧЕНИЕ(ВидДвиженияНакопления.Расход) И 
	ЗаказыПокупателей.Резерв > 0
{ГДЕ
	ЗаказыПокупателей.Номенклатура КАК Номенклатура,
	ЗаказыПокупателей.Номенклатура.Код КАК НоменклатураКод,
	ЗаказыПокупателей.Номенклатура.АртикулДляПоиска КАК НоменклатураАртикулДляПоиска,
	ЗаказыПокупателей.Номенклатура.Наименование КАК НоменклатураНаименование,
	ЗаказыПокупателей.Номенклатура.НаименованиеПолное КАК НоменклатураНаименованиеПолное,
	ЗаказыПокупателей.Номенклатура.Родитель КАК НоменклатураРодитель,
	ЗаказыПокупателей.Номенклатура.СтранаПроисхождения КАК СтранаПроисхождения,
	ЗаказыПокупателей.Номенклатура.Производитель КАК НоменклатураПроизводитель
}
;

ВЫБРАТЬ
	ЗаказыПокупателейОстатки.Номенклатура КАК Номенклатура,
	ЗаказыПокупателейОстатки.ХарактеристикаНоменклатуры КАК ХарактеристикаНоменклатуры,
	ЕСТЬNULL(ЗаказыПокупателейОстатки.ЗаказаноОстаток, 0) - ЕСТЬNULL(ЗаказыПокупателейОстатки.РезервОстаток, 0) КАК Количество
ПОМЕСТИТЬ
	ТаблицаТоваров
ИЗ
	РегистрНакопления.ЗаказыПокупателей.Остатки(
	//Момент
	,
	//УсловияОтбораЗаказыПокупателей
	{Номенклатура КАК Номенклатура,
	Номенклатура.Код КАК НоменклатураКод,
	Номенклатура.АртикулДляПоиска КАК НоменклатураАртикулДляПоиска,
	Номенклатура.Наименование КАК НоменклатураНаименование,
	Номенклатура.НаименованиеПолное КАК НоменклатураНаименованиеПолное,
	Номенклатура.Родитель КАК НоменклатураРодитель,
	Номенклатура.СтранаПроисхождения КАК СтранаПроисхождения,
	Номенклатура.Производитель КАК НоменклатураПроизводитель}
	) КАК ЗаказыПокупателейОстатки
{ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.НоменклатураПрименяемость КАК НоменклатураПрименяемость
	ПО ЗаказыПокупателейОстатки.Номенклатура = НоменклатураПрименяемость.Номенклатура}
ГДЕ
	ЕСТЬNULL(ЗаказыПокупателейОстатки.ЗаказаноОстаток, 0) - ЕСТЬNULL(ЗаказыПокупателейОстатки.РезервОстаток, 0) > 0
{ГДЕ
	НоменклатураПрименяемость.Модель КАК НоменклатураПрименяемостьМодель
}
ИНДЕКСИРОВАТЬ ПО
	Номенклатура,
	ХарактеристикаНоменклатуры
;
	
ВЫБРАТЬ
	тбл.Номенклатура               КАК Номенклатура,
	тбл.Номенклатура.ЭтоГруппа     КАК ЭтоГруппа,
	тбл.Номенклатура.Код           КАК НоменклатураКод,
	тбл.Номенклатура.Артикул       КАК НоменклатураАртикул,
	тбл.Номенклатура.АртикулДляПоиска КАК НоменклатураАртикулДляПоиска,
	тбл.Номенклатура.Производитель    КАК НоменклатураПроизводитель,
	тбл.Номенклатура.БазоваяЕдиницаИзмерения КАК Единица,
	тбл.ХарактеристикаНоменклатуры КАК ХарактеристикаНоменклатуры,
	тбл.Заказ                      КАК Заказ,
	тбл.Заказ.Номер                КАК ЗаказНомер,
	тбл.Заказ.Дата                 КАК ЗаказДата,
	тбл.Контрагент                 КАК Контрагент,
	тбл.СкладКомпании              КАК СкладКомпании,
	тбл.Контрагент.Наименование    КАК ЗаказПредставлениеПолучателя,
	//тбл.Заказано     КАК Заказано,
	//тбл.Резерв       КАК Резерв,
	//тбл.Распределено КАК Распределено,
	тбл.Остаток                    КАК Остаток
	
ИЗ
	(ВЫБРАТЬ
		ВложТабл.Номенклатура КАК Номенклатура,
		ВложТабл.ХарактеристикаНоменклатуры КАК ХарактеристикаНоменклатуры,
		ВложТабл.Заказ КАК Заказ,
		ВложТабл.Контрагент КАК Контрагент,
		ВложТабл.СкладКомпании КАК СкладКомпании,
		СУММА(ВложТабл.Остаток) КАК Остаток

	ИЗ
	(ВЫБРАТЬ
		ТаблицаТоваров.Номенклатура КАК Номенклатура,
		ТаблицаТоваров.ХарактеристикаНоменклатуры КАК ХарактеристикаНоменклатуры,
		ЗаказыПокупателейОстатки.Заказ КАК Заказ,
		ЗаказыПокупателейОстатки.Контрагент КАК Контрагент,
		ЗаказыПокупателейОстатки.СкладКомпании КАК СкладКомпании,
		ВЫБОР
			КОГДА ТаблицаТоваров.Количество>ЗаказыПокупателейОстатки.РезервОстаток ТОГДА
				ЗаказыПокупателейОстатки.РезервОстаток
			ИНАЧЕ
				ТаблицаТоваров.Количество
		КОНЕЦ КАК Остаток
	//ЕСТЬNULL(ЗаказыПокупателейОстатки.ЗаказаноОстаток, 0) КАК Заказано,
	//ЕСТЬNULL(ЗаказыПокупателейОстатки.РезервОстаток, 0) КАК Резерв,
	//ЕСТЬNULL(ЗаказыРаспределениеОстатки.КоличествоОстаток, 0) КАК Распределено,
	ИЗ
		ТаблицаТоваров КАК ТаблицаТоваров
	ВНУТРЕННЕЕ СОЕДИНЕНИЕ
		РегистрНакопления.ЗаказыПокупателей.Остатки(
		//Момент
		,
		
		//УсловияОтбораРезерв
		{Номенклатура КАК Номенклатура,
		Номенклатура.Код КАК НоменклатураКод,
		Номенклатура.АртикулДляПоиска КАК НоменклатураАртикулДляПоиска,
		Номенклатура.Наименование КАК НоменклатураНаименование,
		Номенклатура.НаименованиеПолное КАК НоменклатураНаименованиеПолное,
		Номенклатура.Родитель КАК НоменклатураРодитель,
		Номенклатура.СтранаПроисхождения КАК СтранаПроисхождения,
		Номенклатура.Производитель КАК НоменклатураПроизводитель}
		) КАК ЗаказыПокупателейОстатки
	ПО
		ТаблицаТоваров.Номенклатура               = ЗаказыПокупателейОстатки.Номенклатура И 
		ТаблицаТоваров.ХарактеристикаНоменклатуры = ЗаказыПокупателейОстатки.ХарактеристикаНоменклатуры
	
	ОБЪЕДИНИТЬ ВСЕ
	
	ВЫБРАТЬ
		ТаблицаДвиженийДокумента.Номенклатура,
		ТаблицаДвиженийДокумента.ХарактеристикаНоменклатуры,
		ТаблицаДвиженийДокумента.Заказ,
		ТаблицаДвиженийДокумента.Контрагент,
		ТаблицаДвиженийДокумента.СкладКомпании,
		ТаблицаДвиженийДокумента.Резерв
	ИЗ
		ТаблицаДвиженийДокумента КАК ТаблицаДвиженийДокумента
	) КАК ВложТабл
	СГРУППИРОВАТЬ ПО
		ВложТабл.Номенклатура,
		ВложТабл.ХарактеристикаНоменклатуры,
		ВложТабл.Заказ,
		ВложТабл.Контрагент,
		ВложТабл.СкладКомпании
		
	//НачалоВыбораГрупп
	
	ОБЪЕДИНИТЬ ВСЕ
	
	ВЫБРАТЬ
		НоменклатураНоменклатура.Ссылка,
		NULL,
		NULL,
		NULL,
		NULL,
		//0,
		//0,
		//0,
		0
	ИЗ
		Справочник.Номенклатура КАК НоменклатураНоменклатура
	ГДЕ
		НоменклатураНоменклатура.ЭтоГруппа
		И НоменклатураНоменклатура.Родитель = &Родитель
	//КонецВыбораГрупп
) КАК тбл
//СОЕДИНЕНИЯ
ГДЕ 
	(ВЫБОР
	КОГДА тбл.Номенклатура.ЭтоГруппа ТОГДА 1
	ИНАЧЕ тбл.//ИмяГлавнойКолонки
	КОНЕЦ) > 0

{ГДЕ
	//тбл.Заказано     КАК Заказано,
	//тбл.Резерв       КАК Резерв,
	//тбл.Распределено КАК Распределено,
	тбл.Остаток      КАК Остаток
	//СВОЙСТВА}
	
УПОРЯДОЧИТЬ ПО
	Номенклатура.ЭтоГруппа УБЫВ,
	Номенклатура.Наименование,
	Заказ.Дата,
	Контрагент.Наименование
#КонецОбласти


#Область Документ_РезервированиеЗаказовПокупателя
ВЫБРАТЬ
	тбл.Номенклатура               КАК Номенклатура,
	тбл.Номенклатура.ЭтоГруппа     КАК ЭтоГруппа,
	тбл.Номенклатура.Код           КАК НоменклатураКод,
	тбл.Номенклатура.Артикул       КАК НоменклатураАртикул,
	тбл.Номенклатура.АртикулДляПоиска КАК НоменклатураАртикулДляПоиска,
	тбл.Номенклатура.Производитель    КАК НоменклатураПроизводитель,
	тбл.Номенклатура.БазоваяЕдиницаИзмерения КАК Единица,
	тбл.ХарактеристикаНоменклатуры КАК ХарактеристикаНоменклатуры,
    тбл.Заказ                      КАК Заказ,
    тбл.Заказ.Номер                КАК ЗаказНомер,
    тбл.Заказ.Дата                 КАК ЗаказДата,
    тбл.Контрагент                 КАК Контрагент,
    ВЫБОР
    	КОГДА тбл.Заказ ССЫЛКА Документ.ЗаказВнутренний
    	ТОГДА тбл.Заказ.ПодразделениеПолучатель
    	ИНАЧЕ тбл.Заказ.Контрагент
    КОНЕЦ                          КАК ЗаказПредставлениеПолучателя,
    тбл.Заказано     КАК Заказано,
    тбл.Резерв       КАК Резерв,
    тбл.Распределено КАК Распределено,
    тбл.Остаток      КАК Остаток
    
ИЗ    
(ВЫБРАТЬ РАЗЛИЧНЫЕ
	ЗаказыПокупателейОстатки.Номенклатура КАК Номенклатура,
	ЗаказыПокупателейОстатки.ХарактеристикаНоменклатуры КАК ХарактеристикаНоменклатуры,
	ЗаказыПокупателейОстатки.Заказ КАК Заказ,
	ЗаказыПокупателейОстатки.Контрагент КАК Контрагент,
	ЕСТЬNULL(ЗаказыПокупателейОстатки.ЗаказаноОстаток, 0) КАК Заказано,
	ЕСТЬNULL(ЗаказыПокупателейОстатки.РезервОстаток, 0) КАК Резерв,
	ЕСТЬNULL(ЗаказыРаспределениеОстатки.КоличествоОстаток, 0) КАК Распределено,
	ЕСТЬNULL(ЗаказыПокупателейОстатки.ЗаказаноОстаток, 0) - ЕСТЬNULL(ЗаказыПокупателейОстатки.РезервОстаток, 0) - ЕСТЬNULL(ЗаказыРаспределениеОстатки.КоличествоОстаток, 0) КАК Остаток
ИЗ
	РегистрНакопления.ЗаказыПокупателей.Остатки(
	//Момент
	,
	//УсловияОтбораОстатки
	{Номенклатура КАК Номенклатура,
	Номенклатура.Код КАК НоменклатураКод,
	Номенклатура.АртикулДляПоиска КАК НоменклатураАртикулДляПоиска,
	Номенклатура.Наименование КАК НоменклатураНаименование,
	Номенклатура.НаименованиеПолное КАК НоменклатураНаименованиеПолное,
	Номенклатура.Родитель КАК НоменклатураРодитель,
	Номенклатура.СтранаПроисхождения КАК СтранаПроисхождения,
	Номенклатура.Производитель КАК НоменклатураПроизводитель}
	) КАК ЗаказыПокупателейОстатки
	ЛЕВОЕ СОЕДИНЕНИЕ РегистрНакопления.ЗаказыРаспределение.Остатки(
	//Момент
	,
	//УсловияОтбораРаспределения
	{Номенклатура КАК Номенклатура,
	Номенклатура.Код КАК НоменклатураКод,
	Номенклатура.АртикулДляПоиска КАК НоменклатураАртикулДляПоиска,
	Номенклатура.Наименование КАК НоменклатураНаименование,
	Номенклатура.НаименованиеПолное КАК НоменклатураНаименованиеПолное,
	Номенклатура.Родитель КАК НоменклатураРодитель,
	Номенклатура.СтранаПроисхождения КАК СтранаПроисхождения,
	Номенклатура.Производитель КАК НоменклатураПроизводитель}
	) КАК ЗаказыРаспределениеОстатки
	ПО ЗаказыПокупателейОстатки.Заказ = ЗаказыРаспределениеОстатки.ЗаказПокупателя
		И ЗаказыПокупателейОстатки.Номенклатура = ЗаказыРаспределениеОстатки.Номенклатура
		И ЗаказыПокупателейОстатки.ХарактеристикаНоменклатуры = ЗаказыРаспределениеОстатки.ХарактеристикаНоменклатуры
	{ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.НоменклатураПрименяемость КАК НоменклатураПрименяемость
	ПО ЗаказыПокупателейОстатки.Номенклатура = НоменклатураПрименяемость.Номенклатура}

{ГДЕ
	НоменклатураПрименяемость.Модель КАК НоменклатураПрименяемостьМодель
}
	
//НачалоВыбораГрупп

ОБЪЕДИНИТЬ ВСЕ                                             
                                                           
ВЫБРАТЬ                                                    
	НоменклатураНоменклатура.Ссылка,                       
	NULL,                                                  
	NULL,                                                  
	NULL,                                                  
	0,
	0,
	0,
	0
ИЗ                                                         
	Справочник.Номенклатура КАК НоменклатураНоменклатура   
ГДЕ                                                        
	НоменклатураНоменклатура.ЭтоГруппа                     
	И НоменклатураНоменклатура.Родитель = &Родитель
	
//КонецВыбораГрупп

) КАК тбл
//СОЕДИНЕНИЯ
ГДЕ 
	(ВЫБОР
	КОГДА тбл.Номенклатура.ЭтоГруппа ТОГДА 1
	ИНАЧЕ тбл.//ИмяГлавнойКолонки
	КОНЕЦ) > 0

{ГДЕ
	тбл.Заказано     КАК Заказано,
	тбл.Резерв       КАК Резерв,
    тбл.Распределено КАК Распределено,
    тбл.Остаток      КАК Остаток
    //СВОЙСТВА}
    
УПОРЯДОЧИТЬ ПО
	Номенклатура.ЭтоГруппа УБЫВ,
	Номенклатура.Наименование,
	Заказ.Дата,
	Контрагент.Наименование
#КонецОбласти


#Область Документ_СнятиеРезервовЗаказовПокупателя
ВЫБРАТЬ
	тбл.Номенклатура               КАК Номенклатура,
	тбл.Номенклатура.ЭтоГруппа     КАК ЭтоГруппа,
	тбл.Номенклатура.Код           КАК НоменклатураКод,
	тбл.Номенклатура.Артикул       КАК НоменклатураАртикул,
	тбл.Номенклатура.АртикулДляПоиска КАК НоменклатураАртикулДляПоиска,
	тбл.Номенклатура.Производитель    КАК НоменклатураПроизводитель,
	тбл.Номенклатура.БазоваяЕдиницаИзмерения КАК Единица,
	тбл.ХарактеристикаНоменклатуры КАК ХарактеристикаНоменклатуры,
    тбл.Заказ                      КАК Заказ,
    тбл.Заказ.Номер                КАК ЗаказНомер,
    тбл.Заказ.Дата                 КАК ЗаказДата,
    тбл.Контрагент                 КАК Контрагент,
    ВЫБОР
    	КОГДА тбл.Заказ ССЫЛКА Документ.ЗаказВнутренний
    	ТОГДА тбл.Заказ.ПодразделениеПолучатель
    	ИНАЧЕ тбл.Заказ.Контрагент
    КОНЕЦ                          КАК ЗаказПредставлениеПолучателя,
    тбл.Заказано     КАК Заказано,
    тбл.Резерв       КАК Резерв,
    тбл.Распределено КАК Распределено,
    тбл.Остаток      КАК Остаток
    
ИЗ    
(ВЫБРАТЬ РАЗЛИЧНЫЕ
	ЗаказыПокупателейОстатки.Номенклатура КАК Номенклатура,
	ЗаказыПокупателейОстатки.ХарактеристикаНоменклатуры КАК ХарактеристикаНоменклатуры,
	ЗаказыПокупателейОстатки.Заказ КАК Заказ,
	ЗаказыПокупателейОстатки.Контрагент КАК Контрагент,
	ЕСТЬNULL(ЗаказыПокупателейОстатки.ЗаказаноОстаток, 0) КАК Заказано,
	ЕСТЬNULL(ЗаказыПокупателейОстатки.РезервОстаток, 0) КАК Резерв,
	ЕСТЬNULL(ЗаказыРаспределениеОстатки.КоличествоОстаток, 0) КАК Распределено,
	ЕСТЬNULL(ЗаказыПокупателейОстатки.ЗаказаноОстаток, 0) - ЕСТЬNULL(ЗаказыПокупателейОстатки.РезервОстаток, 0) - ЕСТЬNULL(ЗаказыРаспределениеОстатки.КоличествоОстаток, 0) КАК Остаток
ИЗ
	РегистрНакопления.ЗаказыПокупателей.Остатки(
	//Момент
	, 
	//УсловияОтбораОстатки
	{Номенклатура КАК Номенклатура,
	Номенклатура.Код КАК НоменклатураКод,
	Номенклатура.АртикулДляПоиска КАК НоменклатураАртикулДляПоиска,
	Номенклатура.Наименование КАК НоменклатураНаименование,
	Номенклатура.НаименованиеПолное КАК НоменклатураНаименованиеПолное,
	Номенклатура.Родитель КАК НоменклатураРодитель,
	Номенклатура.СтранаПроисхождения КАК СтранаПроисхождения,
	Номенклатура.Производитель КАК НоменклатураПроизводитель}
	) КАК ЗаказыПокупателейОстатки
	ЛЕВОЕ СОЕДИНЕНИЕ РегистрНакопления.ЗаказыРаспределение.Остатки(
	//Момент
	,
	//УсловияОтбораРаспределения
	{Номенклатура КАК Номенклатура,
	Номенклатура.Код КАК НоменклатураКод,
	Номенклатура.АртикулДляПоиска КАК НоменклатураАртикулДляПоиска,
	Номенклатура.Наименование КАК НоменклатураНаименование,
	Номенклатура.НаименованиеПолное КАК НоменклатураНаименованиеПолное,
	Номенклатура.Родитель КАК НоменклатураРодитель,
	Номенклатура.СтранаПроисхождения КАК СтранаПроисхождения,
	Номенклатура.Производитель КАК НоменклатураПроизводитель}
	) КАК ЗаказыРаспределениеОстатки
	ПО ЗаказыПокупателейОстатки.Заказ = ЗаказыРаспределениеОстатки.ЗаказПокупателя
		И ЗаказыПокупателейОстатки.Номенклатура = ЗаказыРаспределениеОстатки.Номенклатура
		И ЗаказыПокупателейОстатки.ХарактеристикаНоменклатуры = ЗаказыРаспределениеОстатки.ХарактеристикаНоменклатуры
	{ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.НоменклатураПрименяемость КАК НоменклатураПрименяемость
	ПО ЗаказыПокупателейОстатки.Номенклатура = НоменклатураПрименяемость.Номенклатура}

{ГДЕ
	НоменклатураПрименяемость.Модель КАК НоменклатураПрименяемостьМодель
}
	
//НачалоВыбораГрупп

ОБЪЕДИНИТЬ ВСЕ                                             
                                                           
ВЫБРАТЬ                                                    
	НоменклатураНоменклатура.Ссылка,                       
	NULL,                                                  
	NULL,                                                  
	NULL,                                                  
	0,
	0,
	0,
	0
ИЗ                                                         
	Справочник.Номенклатура КАК НоменклатураНоменклатура   
ГДЕ                                                        
	НоменклатураНоменклатура.ЭтоГруппа                     
	И НоменклатураНоменклатура.Родитель = &Родитель
	
//КонецВыбораГрупп

) КАК тбл
//СОЕДИНЕНИЯ

ГДЕ 
	(ВЫБОР
	КОГДА тбл.Номенклатура.ЭтоГруппа ТОГДА 1
	ИНАЧЕ тбл.//ИмяГлавнойКолонки
	КОНЕЦ) > 0

{ГДЕ
	тбл.Заказано     КАК Заказано,
	тбл.Резерв       КАК Резерв,
    тбл.Распределено КАК Распределено,
    тбл.Остаток      КАК Остаток
    //СВОЙСТВА}
    
УПОРЯДОЧИТЬ ПО
	Номенклатура.ЭтоГруппа УБЫВ,
	Номенклатура.Наименование,
	Заказ.Дата,
	Контрагент.Наименование
#КонецОбласти


#Область Документ_ПоступлениеТоваров
ВЫБРАТЬ
	тбл.Подразделение              КАК Подразделение,
	тбл.Номенклатура               КАК Номенклатура,
	тбл.Номенклатура.ЭтоГруппа     КАК ЭтоГруппа,
	тбл.Номенклатура.Код           КАК НоменклатураКод,
	тбл.Номенклатура.Артикул       КАК НоменклатураАртикул,
	тбл.Номенклатура.АртикулДляПоиска КАК НоменклатураАртикулДляПоиска,
	тбл.Номенклатура.Производитель    КАК НоменклатураПроизводитель,
	тбл.Номенклатура.БазоваяЕдиницаИзмерения КАК Единица,
	тбл.ХарактеристикаНоменклатуры КАК ХарактеристикаНоменклатуры,
    тбл.Заказ                      КАК Заказ,
    тбл.Заказ.Номер                КАК ЗаказНомер,
    тбл.Заказ.Дата                 КАК ЗаказДата,
    тбл.Заказ.Контрагент           КАК ЗаказПредставлениеПолучателя,
    тбл.Контрагент                 КАК Контрагент,
    тбл.Заказано     КАК Заказано,
    тбл.Резерв       КАК Резерв,
    тбл.Распределено КАК Распределено,
    тбл.Остаток      КАК Остаток

ИЗ    
(ВЫБРАТЬ РАЗЛИЧНЫЕ
	ЗаказыПоставщикамОстатки.Номенклатура КАК Номенклатура,
	ЗаказыПоставщикамОстатки.ХарактеристикаНоменклатуры КАК ХарактеристикаНоменклатуры,
	ЗаказыПоставщикамОстатки.ЗаказПоставщику КАК Заказ,
	ЗаказыПоставщикамОстатки.Контрагент КАК Контрагент,
	ЕСТЬNULL(ЗаказыПоставщикамОстатки.ЗаказаноОстаток, 0) КАК Заказано,
	0 КАК Резерв,
	ЕСТЬNULL(ЗаказыРаспределениеОстатки.КоличествоОстаток, 0) КАК Распределено,
	ЕСТЬNULL(ЗаказыПоставщикамОстатки.ЗаказаноОстаток, 0) - ЕСТЬNULL(ЗаказыРаспределениеОстатки.КоличествоОстаток, 0) КАК Остаток,
	ЗаказыПоставщикамОстатки.ЗаказПоставщику.ПодразделениеКомпании КАК Подразделение

ИЗ
	РегистрНакопления.ЗаказыПоставщикам.Остатки(
	//Момент
	, 
	//УсловияОтбораОстатки
	{
	Номенклатура КАК Номенклатура,
	Номенклатура.Код КАК НоменклатураКод,
	Номенклатура.АртикулДляПоиска КАК НоменклатураАртикулДляПоиска,
	Номенклатура.Наименование КАК НоменклатураНаименование,
	Номенклатура.НаименованиеПолное КАК НоменклатураНаименованиеПолное,
	Номенклатура.Родитель КАК НоменклатураРодитель,
	Номенклатура.СтранаПроисхождения КАК СтранаПроисхождения,
	Номенклатура.Производитель КАК НоменклатураПроизводитель}
	) КАК ЗаказыПоставщикамОстатки
	ЛЕВОЕ СОЕДИНЕНИЕ РегистрНакопления.ЗаказыРаспределение.Остатки(
	//Момент
	,
	//УсловияОтбораРаспределения
	{
	Номенклатура КАК Номенклатура,
	Номенклатура.Код КАК НоменклатураКод,
	Номенклатура.АртикулДляПоиска КАК НоменклатураАртикулДляПоиска,
	Номенклатура.Наименование КАК НоменклатураНаименование,
	Номенклатура.НаименованиеПолное КАК НоменклатураНаименованиеПолное,
	Номенклатура.Родитель КАК НоменклатураРодитель,
	Номенклатура.СтранаПроисхождения КАК СтранаПроисхождения,
	Номенклатура.Производитель КАК НоменклатураПроизводитель}
	) КАК ЗаказыРаспределениеОстатки
	ПО ЗаказыПоставщикамОстатки.ЗаказПоставщику = ЗаказыРаспределениеОстатки.ЗаказПоставщика
		И ЗаказыПоставщикамОстатки.Номенклатура = ЗаказыРаспределениеОстатки.Номенклатура
		И ЗаказыПоставщикамОстатки.ХарактеристикаНоменклатуры = ЗаказыРаспределениеОстатки.ХарактеристикаНоменклатуры
	{ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.НоменклатураПрименяемость КАК НоменклатураПрименяемость
	ПО ЗаказыПоставщикамОстатки.Номенклатура = НоменклатураПрименяемость.Номенклатура}

{ГДЕ
	НоменклатураПрименяемость.Модель КАК НоменклатураПрименяемостьМодель
}
	
//НачалоВыбораГрупп

ОБЪЕДИНИТЬ ВСЕ                                             
                                                           
ВЫБРАТЬ                                                    
	НоменклатураНоменклатура.Ссылка,                       
	NULL,                                                  
	NULL,                                                  
	NULL,                                                  
	0,
	0,
	0,
	0,
	NULL
ИЗ                                                         
	Справочник.Номенклатура КАК НоменклатураНоменклатура   
ГДЕ                                                        
	НоменклатураНоменклатура.ЭтоГруппа                     
	И НоменклатураНоменклатура.Родитель = &Родитель
	
//КонецВыбораГрупп

) КАК тбл
 //СОЕДИНЕНИЯ
 
ГДЕ 
	(ВЫБОР
	КОГДА тбл.Номенклатура.ЭтоГруппа ТОГДА 1
	ИНАЧЕ тбл.//ИмяГлавнойКолонки
	КОНЕЦ) > 0

{ГДЕ
	тбл.Подразделение КАК Подразделение,
	тбл.Заказано     КАК Заказано,
	тбл.Резерв       КАК Резерв,
    тбл.Распределено КАК Распределено,
    тбл.Остаток      КАК Остаток

    //СВОЙСТВА}
    
УПОРЯДОЧИТЬ ПО
	Номенклатура.ЭтоГруппа УБЫВ,
	Номенклатура.Наименование,
	Заказ.Дата,
	Контрагент.Наименование
#КонецОбласти


#Область Документ_ПеремещениеТоваров
ВЫБРАТЬ
	тбл.Номенклатура               КАК Номенклатура,
	тбл.Номенклатура.ЭтоГруппа     КАК ЭтоГруппа,
	тбл.Номенклатура.Код           КАК НоменклатураКод,
	тбл.Номенклатура.Артикул       КАК НоменклатураАртикул,
	тбл.Номенклатура.АртикулДляПоиска КАК НоменклатураАртикулДляПоиска,
	тбл.Номенклатура.Производитель    КАК НоменклатураПроизводитель,
	тбл.Номенклатура.БазоваяЕдиницаИзмерения КАК Единица,
	тбл.ХарактеристикаНоменклатуры КАК ХарактеристикаНоменклатуры,
    тбл.Заказ                      КАК Заказ,
    тбл.Заказ.Номер                КАК ЗаказНомер,
    тбл.Заказ.Дата                 КАК ЗаказДата,
    тбл.Контрагент                 КАК Контрагент,
    ВЫБОР
    	КОГДА тбл.Заказ ССЫЛКА Документ.ЗаказВнутренний
    	ТОГДА тбл.Заказ.ПодразделениеПолучатель
    	ИНАЧЕ тбл.Заказ.Контрагент
    КОНЕЦ                          КАК ЗаказПредставлениеПолучателя,
    тбл.Заказано     КАК Заказано,
    тбл.Резерв       КАК Резерв,
    тбл.Распределено КАК Распределено,
    тбл.Остаток      КАК Остаток
    
ИЗ
(ВЫБРАТЬ РАЗЛИЧНЫЕ
	ЗаказыПокупателейОстатки.Номенклатура КАК Номенклатура,
	ЗаказыПокупателейОстатки.ХарактеристикаНоменклатуры КАК ХарактеристикаНоменклатуры,
	ЗаказыПокупателейОстатки.Заказ КАК Заказ,
	ЗаказыПокупателейОстатки.Контрагент КАК Контрагент,
	ЕСТЬNULL(ЗаказыПокупателейОстатки.ЗаказаноОстаток, 0) КАК Заказано,
	ЕСТЬNULL(ЗаказыПокупателейОстатки.РезервОстаток, 0) КАК Резерв,
	ЕСТЬNULL(ЗаказыРаспределениеОстатки.КоличествоОстаток, 0) КАК Распределено,
	ВЫБОР
	КОГДА
		(ЕСТЬNULL(ОстаткиТоваровКомпанииОстатки.КоличествоОстаток, 0)
		- 
		ЕСТЬNULL(ОстаткиТоваровКомпанииОстатки.РезервОстаток, 0)
		+
		ЕСТЬNULL(ЗаказыПокупателейОстатки.РезервОстаток, 0))
		<
		ЕСТЬNULL(ЗаказыПокупателейОстатки.ЗаказаноОстаток, 0)
	ТОГДА
		ЕСТЬNULL(ОстаткиТоваровКомпанииОстатки.КоличествоОстаток, 0)
		-
		ЕСТЬNULL(ОстаткиТоваровКомпанииОстатки.РезервОстаток, 0)
		+
		ЕСТЬNULL(ЗаказыПокупателейОстатки.РезервОстаток, 0)
	ИНАЧЕ
		ЕСТЬNULL(ЗаказыПокупателейОстатки.ЗаказаноОстаток, 0)
	КОНЕЦ КАК Остаток
ИЗ
	РегистрНакопления.ЗаказыПокупателей.Остатки(
	//Момент
	,
	//УсловияОтбораОстатки
	{Номенклатура КАК Номенклатура,
	Номенклатура.Код КАК НоменклатураКод,
	Номенклатура.АртикулДляПоиска КАК НоменклатураАртикулДляПоиска,
	Номенклатура.Наименование КАК НоменклатураНаименование,
	Номенклатура.НаименованиеПолное КАК НоменклатураНаименованиеПолное,
	Номенклатура.Родитель КАК НоменклатураРодитель,
	Номенклатура.СтранаПроисхождения КАК СтранаПроисхождения,
	Номенклатура.Производитель КАК НоменклатураПроизводитель}
	) КАК ЗаказыПокупателейОстатки
	ЛЕВОЕ СОЕДИНЕНИЕ РегистрНакопления.ЗаказыРаспределение.Остатки(
	//Момент
	,
	//УсловияОтбораРаспределения
	{Номенклатура КАК Номенклатура,
	Номенклатура.Код КАК НоменклатураКод,
	Номенклатура.АртикулДляПоиска КАК НоменклатураАртикулДляПоиска,
	Номенклатура.Наименование КАК НоменклатураНаименование,
	Номенклатура.НаименованиеПолное КАК НоменклатураНаименованиеПолное,
	Номенклатура.Родитель КАК НоменклатураРодитель,
	Номенклатура.СтранаПроисхождения КАК СтранаПроисхождения,
	Номенклатура.Производитель КАК НоменклатураПроизводитель}
	) КАК ЗаказыРаспределениеОстатки
	ПО ЗаказыПокупателейОстатки.Заказ = ЗаказыРаспределениеОстатки.ЗаказПокупателя
		И ЗаказыПокупателейОстатки.Номенклатура = ЗаказыРаспределениеОстатки.Номенклатура
		И ЗаказыПокупателейОстатки.ХарактеристикаНоменклатуры = ЗаказыРаспределениеОстатки.ХарактеристикаНоменклатуры
	ЛЕВОЕ СОЕДИНЕНИЕ РегистрНакопления.ОстаткиТоваровКомпании.Остатки(
	//Момент
	,
	//УсловияОтбораРезерв
	{Номенклатура КАК Номенклатура,
	Номенклатура.Код КАК НоменклатураКод,
	Номенклатура.АртикулДляПоиска КАК НоменклатураАртикулДляПоиска,
	Номенклатура.Наименование КАК НоменклатураНаименование,
	Номенклатура.НаименованиеПолное КАК НоменклатураНаименованиеПолное,
	Номенклатура.Родитель КАК НоменклатураРодитель,
	Номенклатура.СтранаПроисхождения КАК СтранаПроисхождения,
	Номенклатура.Производитель КАК НоменклатураПроизводитель}
	) КАК ОстаткиТоваровКомпанииОстатки
	ПО ЗаказыПокупателейОстатки.Номенклатура = ОстаткиТоваровКомпанииОстатки.Номенклатура
		И ЗаказыПокупателейОстатки.ХарактеристикаНоменклатуры = ОстаткиТоваровКомпанииОстатки.ХарактеристикаНоменклатуры
	{ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.НоменклатураПрименяемость КАК НоменклатураПрименяемость
	ПО ЗаказыПокупателейОстатки.Номенклатура = НоменклатураПрименяемость.Номенклатура}

{ГДЕ
	НоменклатураПрименяемость.Модель КАК НоменклатураПрименяемостьМодель
}
	
//НачалоВыбораГрупп

ОБЪЕДИНИТЬ ВСЕ

ВЫБРАТЬ                                                    
	НоменклатураНоменклатура.Ссылка,                       
	NULL,                                                  
	NULL,                                                  
	NULL,                                                  
	0,
	0,
	0,
	0
ИЗ                                                         
	Справочник.Номенклатура КАК НоменклатураНоменклатура   
ГДЕ                                                        
	НоменклатураНоменклатура.ЭтоГруппа                     
	И НоменклатураНоменклатура.Родитель = &Родитель
	
//КонецВыбораГрупп

) КАК тбл
//СОЕДИНЕНИЯ
ГДЕ 
	(ВЫБОР
	КОГДА тбл.Номенклатура.ЭтоГруппа ТОГДА 1
	ИНАЧЕ тбл.//ИмяГлавнойКолонки
	КОНЕЦ) > 0

{ГДЕ
	тбл.Заказано     КАК Заказано,
	тбл.Резерв       КАК Резерв,
    тбл.Распределено КАК Распределено,
    тбл.Остаток      КАК Остаток
    //СВОЙСТВА}
    
УПОРЯДОЧИТЬ ПО
	Номенклатура.ЭтоГруппа УБЫВ,
	Номенклатура.Наименование,
	Заказ.Дата,
	Контрагент.Наименование
#КонецОбласти


#Область Документ_РеализацияТоваров
ВЫБРАТЬ
	тбл.Номенклатура               КАК Номенклатура,
	тбл.Номенклатура.ЭтоГруппа     КАК ЭтоГруппа,
	тбл.Номенклатура.Код           КАК НоменклатураКод,
	тбл.Номенклатура.Артикул       КАК НоменклатураАртикул,
	тбл.Номенклатура.АртикулДляПоиска КАК НоменклатураАртикулДляПоиска,
	тбл.Номенклатура.Производитель    КАК НоменклатураПроизводитель,
	тбл.Номенклатура.БазоваяЕдиницаИзмерения КАК Единица,
	тбл.ХарактеристикаНоменклатуры КАК ХарактеристикаНоменклатуры,
    тбл.Заказ                      КАК Заказ,
    тбл.Заказ.Номер                КАК ЗаказНомер,
    тбл.Заказ.Дата                 КАК ЗаказДата,
    тбл.Контрагент                 КАК Контрагент,
    ВЫБОР
    	КОГДА тбл.Заказ ССЫЛКА Документ.ЗаказВнутренний
    	ТОГДА тбл.Заказ.ПодразделениеПолучатель
    	ИНАЧЕ тбл.Заказ.Контрагент
    КОНЕЦ                          КАК ЗаказПредставлениеПолучателя,
    тбл.Заказано     КАК Заказано,
    тбл.Резерв       КАК Резерв,
    тбл.Распределено КАК Распределено,
    тбл.Остаток      КАК Остаток,
    тбл.Подразделение КАК Подразделение
    
ИЗ
(ВЫБРАТЬ РАЗЛИЧНЫЕ
	ЗаказыПокупателейОстатки.Номенклатура КАК Номенклатура,
	ЗаказыПокупателейОстатки.ХарактеристикаНоменклатуры КАК ХарактеристикаНоменклатуры,
	ЗаказыПокупателейОстатки.Заказ КАК Заказ,
	ЗаказыПокупателейОстатки.Контрагент КАК Контрагент,
	ЕСТЬNULL(ЗаказыПокупателейОстатки.ЗаказаноОстаток, 0) КАК Заказано,
	ЕСТЬNULL(ЗаказыПокупателейОстатки.РезервОстаток, 0) КАК Резерв,
	ЕСТЬNULL(ЗаказыРаспределениеОстатки.КоличествоОстаток, 0) КАК Распределено,
	ВЫБОР
	КОГДА
		(ЕСТЬNULL(ОстаткиТоваровКомпанииОстатки.КоличествоОстаток, 0)
		- 
		ЕСТЬNULL(ОстаткиТоваровКомпанииОстатки.РезервОстаток, 0)
		+
		ЕСТЬNULL(ЗаказыПокупателейОстатки.РезервОстаток, 0))
		<
		ЕСТЬNULL(ЗаказыПокупателейОстатки.ЗаказаноОстаток, 0)
	ТОГДА
		ЕСТЬNULL(ОстаткиТоваровКомпанииОстатки.КоличествоОстаток, 0)
		-
		ЕСТЬNULL(ОстаткиТоваровКомпанииОстатки.РезервОстаток, 0)
		+
		ЕСТЬNULL(ЗаказыПокупателейОстатки.РезервОстаток, 0)
	ИНАЧЕ
		ЕСТЬNULL(ЗаказыПокупателейОстатки.ЗаказаноОстаток, 0)
	КОНЕЦ КАК Остаток,
	ЗаказыПокупателейОстатки.Заказ.ПодразделениеКомпании КАК Подразделение
ИЗ
	РегистрНакопления.ЗаказыПокупателей.Остатки(
	//Момент
	,
	//УсловияОтбораОстатки
	{Номенклатура КАК Номенклатура,
	Номенклатура.Код КАК НоменклатураКод,
	Номенклатура.АртикулДляПоиска КАК НоменклатураАртикулДляПоиска,
	Номенклатура.Наименование КАК НоменклатураНаименование,
	Номенклатура.НаименованиеПолное КАК НоменклатураНаименованиеПолное,
	Номенклатура.Родитель КАК НоменклатураРодитель,
	Номенклатура.СтранаПроисхождения КАК СтранаПроисхождения,
	Номенклатура.Производитель КАК НоменклатураПроизводитель}
	) КАК ЗаказыПокупателейОстатки
	ЛЕВОЕ СОЕДИНЕНИЕ РегистрНакопления.ЗаказыРаспределение.Остатки(
	//Момент
	,
	//УсловияОтбораРаспределения
	{Номенклатура КАК Номенклатура,
	Номенклатура.Код КАК НоменклатураКод,
	Номенклатура.АртикулДляПоиска КАК НоменклатураАртикулДляПоиска,
	Номенклатура.Наименование КАК НоменклатураНаименование,
	Номенклатура.НаименованиеПолное КАК НоменклатураНаименованиеПолное,
	Номенклатура.Родитель КАК НоменклатураРодитель,
	Номенклатура.СтранаПроисхождения КАК СтранаПроисхождения,
	Номенклатура.Производитель КАК НоменклатураПроизводитель}
	) КАК ЗаказыРаспределениеОстатки
	ПО ЗаказыПокупателейОстатки.Заказ = ЗаказыРаспределениеОстатки.ЗаказПокупателя
		И ЗаказыПокупателейОстатки.Номенклатура = ЗаказыРаспределениеОстатки.Номенклатура
		И ЗаказыПокупателейОстатки.ХарактеристикаНоменклатуры = ЗаказыРаспределениеОстатки.ХарактеристикаНоменклатуры
	ЛЕВОЕ СОЕДИНЕНИЕ РегистрНакопления.ОстаткиТоваровКомпании.Остатки(
	//Момент
	,
	//УсловияОтбораРезерв
	{Номенклатура КАК Номенклатура,
	Номенклатура.Код КАК НоменклатураКод,
	Номенклатура.АртикулДляПоиска КАК НоменклатураАртикулДляПоиска,
	Номенклатура.Наименование КАК НоменклатураНаименование,
	Номенклатура.НаименованиеПолное КАК НоменклатураНаименованиеПолное,
	Номенклатура.Родитель КАК НоменклатураРодитель,
	Номенклатура.СтранаПроисхождения КАК СтранаПроисхождения,
	Номенклатура.Производитель КАК НоменклатураПроизводитель}
	) КАК ОстаткиТоваровКомпанииОстатки
	ПО ЗаказыПокупателейОстатки.Номенклатура = ОстаткиТоваровКомпанииОстатки.Номенклатура
		И ЗаказыПокупателейОстатки.ХарактеристикаНоменклатуры = ОстаткиТоваровКомпанииОстатки.ХарактеристикаНоменклатуры
	{ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.НоменклатураПрименяемость КАК НоменклатураПрименяемость
	ПО ЗаказыПокупателейОстатки.Номенклатура = НоменклатураПрименяемость.Номенклатура}

{ГДЕ
	НоменклатураПрименяемость.Модель КАК НоменклатураПрименяемостьМодель
}
	
//НачалоВыбораГрупп

ОБЪЕДИНИТЬ ВСЕ

ВЫБРАТЬ                                                    
	НоменклатураНоменклатура.Ссылка,                       
	NULL,                                                  
	NULL,                                                  
	NULL,                                                  
	0,
	0,
	0,
	0,
	NULL
ИЗ                                                         
	Справочник.Номенклатура КАК НоменклатураНоменклатура   
ГДЕ                                                        
	НоменклатураНоменклатура.ЭтоГруппа                     
	И НоменклатураНоменклатура.Родитель = &Родитель
	
//КонецВыбораГрупп

) КАК тбл
//СОЕДИНЕНИЯ

ГДЕ 
	(ВЫБОР
	КОГДА тбл.Номенклатура.ЭтоГруппа ТОГДА 1
	ИНАЧЕ тбл.//ИмяГлавнойКолонки
	КОНЕЦ) > 0

{ГДЕ
    тбл.Подразделение,
	тбл.Заказано     КАК Заказано,
	тбл.Резерв       КАК Резерв,
    тбл.Распределено КАК Распределено,
    тбл.Остаток      КАК Остаток
    //СВОЙСТВА}
    
УПОРЯДОЧИТЬ ПО
	Номенклатура.ЭтоГруппа УБЫВ,
	Номенклатура.Наименование,
	Заказ.Дата,
	Контрагент.Наименование
#КонецОбласти


#Область Документ_ЗакрытиеСмены
ВЫБРАТЬ
	тбл.Номенклатура               КАК Номенклатура,
	тбл.Номенклатура.ЭтоГруппа     КАК ЭтоГруппа,
	тбл.Номенклатура.Код           КАК НоменклатураКод,
	тбл.Номенклатура.Артикул       КАК НоменклатураАртикул,
	тбл.Номенклатура.АртикулДляПоиска КАК НоменклатураАртикулДляПоиска,
	тбл.Номенклатура.Производитель    КАК НоменклатураПроизводитель,
	тбл.Номенклатура.БазоваяЕдиницаИзмерения КАК Единица,
	тбл.ХарактеристикаНоменклатуры КАК ХарактеристикаНоменклатуры,
    тбл.Заказ                      КАК Заказ,
    тбл.Заказ.Номер                КАК ЗаказНомер,
    тбл.Заказ.Дата                 КАК ЗаказДата,
    тбл.Контрагент                 КАК Контрагент,
    ВЫБОР
    	КОГДА тбл.Заказ ССЫЛКА Документ.ЗаказВнутренний
    	ТОГДА тбл.Заказ.ПодразделениеПолучатель
    	ИНАЧЕ тбл.Заказ.Контрагент
    КОНЕЦ                          КАК ЗаказПредставлениеПолучателя,
    тбл.Заказано     КАК Заказано,
    тбл.Резерв       КАК Резерв,
    тбл.Распределено КАК Распределено,
    тбл.Остаток      КАК Остаток
    
ИЗ
(ВЫБРАТЬ РАЗЛИЧНЫЕ
	ЗаказыПокупателейОстатки.Номенклатура КАК Номенклатура,
	ЗаказыПокупателейОстатки.ХарактеристикаНоменклатуры КАК ХарактеристикаНоменклатуры,
	ЗаказыПокупателейОстатки.Заказ КАК Заказ,
	ЗаказыПокупателейОстатки.Контрагент КАК Контрагент,
	ЕСТЬNULL(ЗаказыПокупателейОстатки.ЗаказаноОстаток, 0) КАК Заказано,
	ЕСТЬNULL(ЗаказыПокупателейОстатки.РезервОстаток, 0) КАК Резерв,
	ЕСТЬNULL(ЗаказыРаспределениеОстатки.КоличествоОстаток, 0) КАК Распределено,
	ВЫБОР
	КОГДА
		(ЕСТЬNULL(ОстаткиТоваровКомпанииОстатки.КоличествоОстаток, 0)
		- 
		ЕСТЬNULL(ОстаткиТоваровКомпанииОстатки.РезервОстаток, 0)
		+
		ЕСТЬNULL(ЗаказыПокупателейОстатки.РезервОстаток, 0))
		<
		ЕСТЬNULL(ЗаказыПокупателейОстатки.ЗаказаноОстаток, 0)
	ТОГДА
		ЕСТЬNULL(ОстаткиТоваровКомпанииОстатки.КоличествоОстаток, 0)
		-
		ЕСТЬNULL(ОстаткиТоваровКомпанииОстатки.РезервОстаток, 0)
		+
		ЕСТЬNULL(ЗаказыПокупателейОстатки.РезервОстаток, 0)
	ИНАЧЕ
		ЕСТЬNULL(ЗаказыПокупателейОстатки.ЗаказаноОстаток, 0)
	КОНЕЦ КАК Остаток
ИЗ
	РегистрНакопления.ЗаказыПокупателей.Остатки(
	//Момент
	,
	//УсловияОтбораОстатки
	{Номенклатура КАК Номенклатура,
	Номенклатура.Код КАК НоменклатураКод,
	Номенклатура.АртикулДляПоиска КАК НоменклатураАртикулДляПоиска,
	Номенклатура.Наименование КАК НоменклатураНаименование,
	Номенклатура.НаименованиеПолное КАК НоменклатураНаименованиеПолное,
	Номенклатура.Родитель КАК НоменклатураРодитель,
	Номенклатура.СтранаПроисхождения КАК СтранаПроисхождения,
	Номенклатура.Производитель КАК НоменклатураПроизводитель}
	) КАК ЗаказыПокупателейОстатки
	ЛЕВОЕ СОЕДИНЕНИЕ РегистрНакопления.ЗаказыРаспределение.Остатки(
	//Момент
	,
	//УсловияОтбораРаспределения
	{Номенклатура КАК Номенклатура,
	Номенклатура.Код КАК НоменклатураКод,
	Номенклатура.АртикулДляПоиска КАК НоменклатураАртикулДляПоиска,
	Номенклатура.Наименование КАК НоменклатураНаименование,
	Номенклатура.НаименованиеПолное КАК НоменклатураНаименованиеПолное,
	Номенклатура.Родитель КАК НоменклатураРодитель,
	Номенклатура.СтранаПроисхождения КАК СтранаПроисхождения,
	Номенклатура.Производитель КАК НоменклатураПроизводитель}
	) КАК ЗаказыРаспределениеОстатки
	ПО ЗаказыПокупателейОстатки.Заказ = ЗаказыРаспределениеОстатки.ЗаказПокупателя
		И ЗаказыПокупателейОстатки.Номенклатура = ЗаказыРаспределениеОстатки.Номенклатура
		И ЗаказыПокупателейОстатки.ХарактеристикаНоменклатуры = ЗаказыРаспределениеОстатки.ХарактеристикаНоменклатуры
	ЛЕВОЕ СОЕДИНЕНИЕ РегистрНакопления.ОстаткиТоваровКомпании.Остатки(
	//Момент
	,
	//УсловияОтбораРезерв
	{Номенклатура КАК Номенклатура,
	Номенклатура.Код КАК НоменклатураКод,
	Номенклатура.АртикулДляПоиска КАК НоменклатураАртикулДляПоиска,
	Номенклатура.Наименование КАК НоменклатураНаименование,
	Номенклатура.НаименованиеПолное КАК НоменклатураНаименованиеПолное,
	Номенклатура.Родитель КАК НоменклатураРодитель,
	Номенклатура.СтранаПроисхождения КАК СтранаПроисхождения,
	Номенклатура.Производитель КАК НоменклатураПроизводитель}
	) КАК ОстаткиТоваровКомпанииОстатки
	ПО ЗаказыПокупателейОстатки.Номенклатура = ОстаткиТоваровКомпанииОстатки.Номенклатура
		И ЗаказыПокупателейОстатки.ХарактеристикаНоменклатуры = ОстаткиТоваровКомпанииОстатки.ХарактеристикаНоменклатуры
	{ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.НоменклатураПрименяемость КАК НоменклатураПрименяемость
	ПО ЗаказыПокупателейОстатки.Номенклатура = НоменклатураПрименяемость.Номенклатура}

{ГДЕ
	НоменклатураПрименяемость.Модель КАК НоменклатураПрименяемостьМодель
}
	
//НачалоВыбораГрупп

ОБЪЕДИНИТЬ ВСЕ

ВЫБРАТЬ                                                    
	НоменклатураНоменклатура.Ссылка,                       
	NULL,                                                  
	NULL,                                                  
	NULL,                                                  
	0,
	0,
	0,
	0
ИЗ                                                         
	Справочник.Номенклатура КАК НоменклатураНоменклатура   
ГДЕ                                                        
	НоменклатураНоменклатура.ЭтоГруппа                     
	И НоменклатураНоменклатура.Родитель = &Родитель
	
//КонецВыбораГрупп

) КАК тбл
//СОЕДИНЕНИЯ
ГДЕ 
	(ВЫБОР
	КОГДА тбл.Номенклатура.ЭтоГруппа ТОГДА 1
	ИНАЧЕ тбл.//ИмяГлавнойКолонки
	КОНЕЦ) > 0

{ГДЕ
	тбл.Заказано     КАК Заказано,
	тбл.Резерв       КАК Резерв,
    тбл.Распределено КАК Распределено,
    тбл.Остаток      КАК Остаток
    //СВОЙСТВА}
    
УПОРЯДОЧИТЬ ПО
	Номенклатура.ЭтоГруппа УБЫВ,
	Номенклатура.Наименование,
	Заказ.Дата,
	Контрагент.Наименование                                             	
#КонецОбласти


#Область Документ_РаспределениеЗаказаПокупателя
ВЫБРАТЬ
	тбл.Номенклатура               	КАК Номенклатура,
	тбл.Номенклатура.ЭтоГруппа     	КАК ЭтоГруппа,
	тбл.Номенклатура.Код           	КАК НоменклатураКод,
	тбл.Номенклатура.Артикул       	КАК НоменклатураАртикул,
	тбл.Номенклатура.АртикулДляПоиска КАК НоменклатураАртикулДляПоиска,
	тбл.Номенклатура.Производитель    КАК НоменклатураПроизводитель,
	тбл.Номенклатура.БазоваяЕдиницаИзмерения КАК Единица,
	тбл.ХарактеристикаНоменклатуры 	КАК ХарактеристикаНоменклатуры,
    тбл.Заказ            			КАК Заказ,
    тбл.Заказ.Номер      			КАК ЗаказНомер,
    тбл.Заказ.Дата       			КАК ЗаказДата,
    ВЫБОР
    	КОГДА тбл.Заказ ССЫЛКА Документ.ЗаказВнутренний
    	ТОГДА тбл.Заказ.ПодразделениеКомпании
    	ИНАЧЕ тбл.Заказ.Контрагент
    КОНЕЦ КАК ЗаказПредставлениеПолучателя,
    тбл.Контрагент  	           	КАК Контрагент,
    тбл.Остаток      				КАК Остаток
    
ИЗ    
(ВЫБРАТЬ РАЗЛИЧНЫЕ
	ТаблицаЗаказыПокупателейОстатки.Номенклатура КАК Номенклатура,
	ТаблицаЗаказыПокупателейОстатки.ХарактеристикаНоменклатуры КАК ХарактеристикаНоменклатуры,
	ТаблицаЗаказыПоставщикамОстатки.Контрагент КАК Контрагент,
	ТаблицаЗаказыПоставщикамОстатки.Заказ КАК Заказ,
	ВЫБОР КОГДА ТаблицаЗаказыПокупателейОстатки.Остаток > ЕСТЬNULL(ТаблицаЗаказыПоставщикамОстатки.Остаток, 0) ТОГДА 
		ТаблицаЗаказыПоставщикамОстатки.Остаток
	 ИНАЧЕ
		ТаблицаЗаказыПокупателейОстатки.Остаток
	КОНЕЦ КАК Остаток
ИЗ

(ВЫБРАТЬ
	ЗаказыПокупателейОстатки.Номенклатура КАК Номенклатура,
	ЗаказыПокупателейОстатки.ХарактеристикаНоменклатуры КАК ХарактеристикаНоменклатуры,
	ЗаказыПокупателейОстатки.ЗаказаноОстаток - ЗаказыПокупателейОстатки.РезервОстаток - ЕСТЬNULL(ЗаказыРаспределениеОстатки.КоличествоОстаток, 0) КАК Остаток
ИЗ
	РегистрНакопления.ЗаказыПокупателей.Остатки(
	//Момент
	,
	//УсловияОтбораОстатки
	{Номенклатура КАК Номенклатура,
	Номенклатура.Код КАК НоменклатураКод,
	Номенклатура.АртикулДляПоиска КАК НоменклатураАртикулДляПоиска,
	Номенклатура.Наименование КАК НоменклатураНаименование,
	Номенклатура.НаименованиеПолное КАК НоменклатураНаименованиеПолное,
	Номенклатура.Родитель КАК НоменклатураРодитель,
	Номенклатура.СтранаПроисхождения КАК СтранаПроисхождения,
	Номенклатура.Производитель КАК НоменклатураПроизводитель}
	) КАК ЗаказыПокупателейОстатки
	
	ЛЕВОЕ СОЕДИНЕНИЕ РегистрНакопления.ЗаказыРаспределение.Остатки(
	//Момент
	,
	//УсловияОтбораРаспределения
	{Номенклатура КАК Номенклатура,
	Номенклатура.Код КАК НоменклатураКод,
	Номенклатура.Наименование КАК НоменклатураНаименование,
	Номенклатура.НаименованиеПолное КАК НоменклатураНаименованиеПолное,
	Номенклатура.Родитель КАК НоменклатураРодитель,
	Номенклатура.СтранаПроисхождения КАК СтранаПроисхождения,
	Номенклатура.Производитель КАК НоменклатураПроизводитель}
	) КАК ЗаказыРаспределениеОстатки
	ПО ЗаказыПокупателейОстатки.Заказ = ЗаказыРаспределениеОстатки.ЗаказПокупателя
		И ЗаказыПокупателейОстатки.Номенклатура = ЗаказыРаспределениеОстатки.Номенклатура
		И ЗаказыПокупателейОстатки.ХарактеристикаНоменклатуры = ЗаказыРаспределениеОстатки.ХарактеристикаНоменклатуры
	{ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.НоменклатураПрименяемость КАК НоменклатураПрименяемость
	ПО ЗаказыПокупателейОстатки.Номенклатура = НоменклатураПрименяемость.Номенклатура}

{ГДЕ
	НоменклатураПрименяемость.Модель КАК НоменклатураПрименяемостьМодель
}
	
) КАК ТаблицаЗаказыПокупателейОстатки

ВНУТРЕННЕЕ СОЕДИНЕНИЕ
(ВЫБРАТЬ
	ОбъединенныйЗапрос.Номенклатура КАК Номенклатура,
	ОбъединенныйЗапрос.ХарактеристикаНоменклатуры КАК ХарактеристикаНоменклатуры,
	ОбъединенныйЗапрос.Заказ КАК Заказ,
	ОбъединенныйЗапрос.Контрагент КАК Контрагент,
	СУММА(ОбъединенныйЗапрос.ЗаказаноОстаток - ЕСТЬNULL(ЗаказыРаспределениеОстатки.КоличествоОстаток, 0)) КАК Остаток
ИЗ (
ВЫБРАТЬ
	ЗаказыПоставщикамОстатки.Номенклатура КАК Номенклатура,
	ЗаказыПоставщикамОстатки.ХарактеристикаНоменклатуры КАК ХарактеристикаНоменклатуры,
	ЗаказыПоставщикамОстатки.ЗаказПоставщику КАК Заказ,
	ЗаказыПоставщикамОстатки.Контрагент КАК Контрагент,
	ЗаказыПоставщикамОстатки.ЗаказаноОстаток КАК ЗаказаноОстаток
ИЗ
	РегистрНакопления.ЗаказыПоставщикам.Остатки(
	//Момент
	,
	//УсловияОтбораРезерв
	{Номенклатура КАК Номенклатура,
	Номенклатура.Код КАК НоменклатураКод,
	Номенклатура.АртикулДляПоиска КАК НоменклатураАртикулДляПоиска,
	Номенклатура.Наименование КАК НоменклатураНаименование,
	Номенклатура.НаименованиеПолное КАК НоменклатураНаименованиеПолное,
	Номенклатура.Родитель КАК НоменклатураРодитель,
	Номенклатура.СтранаПроисхождения КАК СтранаПроисхождения,
	Номенклатура.Производитель КАК НоменклатураПроизводитель}
	) КАК ЗаказыПоставщикамОстатки
ОБЪЕДИНИТЬ ВСЕ
ВЫБРАТЬ
	ЗаказыПокупателейОстатки.Номенклатура,
	ЗаказыПокупателейОстатки.ХарактеристикаНоменклатуры,
	ЗаказыПокупателейОстатки.Заказ,
	ЗаказыПокупателейОстатки.Контрагент,
	ЗаказыПокупателейОстатки.ЗаказаноОстаток - ЗаказыПокупателейОстатки.РезервОстаток
ИЗ
	РегистрНакопления.ЗаказыПокупателей.Остатки(
	//Момент
	, 
	//УсловияОтбораЗаказыПокупателей
	{Номенклатура КАК Номенклатура,
	Номенклатура.Код КАК НоменклатураКод,
	Номенклатура.АртикулДляПоиска КАК НоменклатураАртикулДляПоиска,
	Номенклатура.Наименование КАК НоменклатураНаименование,
	Номенклатура.НаименованиеПолное КАК НоменклатураНаименованиеПолное,
	Номенклатура.Родитель КАК НоменклатураРодитель,
	Номенклатура.СтранаПроисхождения КАК СтранаПроисхождения,
	Номенклатура.Производитель КАК НоменклатураПроизводитель}
	) КАК ЗаказыПокупателейОстатки
	
) КАК ОбъединенныйЗапрос
ЛЕВОЕ СОЕДИНЕНИЕ РегистрНакопления.ЗаказыРаспределение.Остатки(
	//Момент
	,
	//УсловияОтбораРаспределения
	{Номенклатура КАК Номенклатура,
	Номенклатура.Код КАК НоменклатураКод,
	Номенклатура.АртикулДляПоиска КАК НоменклатураАртикулДляПоиска,
	Номенклатура.Наименование КАК НоменклатураНаименование,
	Номенклатура.НаименованиеПолное КАК НоменклатураНаименованиеПолное,
	Номенклатура.Родитель КАК НоменклатураРодитель,
	Номенклатура.СтранаПроисхождения КАК СтранаПроисхождения,
	Номенклатура.Производитель КАК НоменклатураПроизводитель}
	) КАК ЗаказыРаспределениеОстатки
	ПО ОбъединенныйЗапрос.Заказ = ЗаказыРаспределениеОстатки.ЗаказПоставщика
		И ОбъединенныйЗапрос.Номенклатура = ЗаказыРаспределениеОстатки.Номенклатура
		И ОбъединенныйЗапрос.ХарактеристикаНоменклатуры = ЗаказыРаспределениеОстатки.ХарактеристикаНоменклатуры
{ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.НоменклатураПрименяемость КАК НоменклатураПрименяемость
	ПО ОбъединенныйЗапрос.Номенклатура = НоменклатураПрименяемость.Номенклатура}

{ГДЕ
	НоменклатураПрименяемость.Модель КАК НоменклатураПрименяемостьМодель}

СГРУППИРОВАТЬ ПО
	ОбъединенныйЗапрос.Номенклатура,
	ОбъединенныйЗапрос.ХарактеристикаНоменклатуры,
	ОбъединенныйЗапрос.Заказ,
	ОбъединенныйЗапрос.Контрагент) КАК ТаблицаЗаказыПоставщикамОстатки
ПО ТаблицаЗаказыПокупателейОстатки.Номенклатура = ТаблицаЗаказыПоставщикамОстатки.Номенклатура
 И ТаблицаЗаказыПокупателейОстатки.ХарактеристикаНоменклатуры = ТаблицаЗаказыПоставщикамОстатки.ХарактеристикаНоменклатуры
//НачалоВыбораГрупп

ОБЪЕДИНИТЬ ВСЕ                                             
                                                           
ВЫБРАТЬ                                                    
	НоменклатураНоменклатура.Ссылка,
	NULL,
	NULL,
	NULL,
	0
ИЗ                                                         
	Справочник.Номенклатура КАК НоменклатураНоменклатура   
ГДЕ                                                        
	НоменклатураНоменклатура.ЭтоГруппа                     
	И НоменклатураНоменклатура.Родитель = &Родитель
	
//КонецВыбораГрупп

) КАК тбл
//СОЕДИНЕНИЯ
ГДЕ 
	(ВЫБОР
	КОГДА тбл.Номенклатура.ЭтоГруппа ТОГДА 1
	ИНАЧЕ тбл.//ИмяГлавнойКолонки
	КОНЕЦ) > 0

{ГДЕ
    тбл.Остаток КАК Остаток
    //СВОЙСТВА}
    
УПОРЯДОЧИТЬ ПО
	Номенклатура.ЭтоГруппа УБЫВ,
	Номенклатура.Наименование,
	Заказ.Дата,
	Контрагент.Наименование
#КонецОбласти


#Область Документ_СнятиеРаспределенияЗаказовПокупателя
ВЫБРАТЬ
	тбл.Номенклатура               	КАК Номенклатура,
	тбл.Номенклатура.ЭтоГруппа     	КАК ЭтоГруппа,
	тбл.Номенклатура.Код           	КАК НоменклатураКод,
	тбл.Номенклатура.Артикул       	КАК НоменклатураАртикул,
	тбл.Номенклатура.АртикулДляПоиска КАК НоменклатураАртикулДляПоиска,
	тбл.Номенклатура.Производитель    КАК НоменклатураПроизводитель,
	тбл.Номенклатура.БазоваяЕдиницаИзмерения КАК Единица,
	тбл.ХарактеристикаНоменклатуры 	КАК ХарактеристикаНоменклатуры,
    тбл.Заказ            			КАК Заказ,
    тбл.Заказ.Номер      			КАК ЗаказНомер,
    тбл.Заказ.Дата       			КАК ЗаказДата,
    тбл.ЗаказПоставщику             КАК ЗаказПоставщику,
    тбл.ЗаказПоставщику.Номер       КАК ЗаказПоставщикуНомер,
    тбл.ЗаказПоставщику.Дата        КАК ЗаказПоставщикуДата,
    ВЫБОР
    	КОГДА тбл.Заказ ССЫЛКА Документ.ЗаказВнутренний
    	ТОГДА тбл.Заказ.ПодразделениеКомпании
    	ИНАЧЕ тбл.Заказ.Контрагент
    КОНЕЦ КАК ЗаказПредставлениеПолучателя,
    ВЫБОР
    	КОГДА тбл.Заказ ССЫЛКА Документ.ЗаказВнутренний
    	ТОГДА тбл.Заказ.ПодразделениеКомпании
    	ИНАЧЕ тбл.Заказ.Контрагент
    КОНЕЦ КАК Контрагент,
    тбл.Остаток      				КАК Остаток
    
ИЗ    
(ВЫБРАТЬ РАЗЛИЧНЫЕ
	ЗаказыРаспределениеОстатки.Номенклатура КАК Номенклатура,
	ЗаказыРаспределениеОстатки.ХарактеристикаНоменклатуры КАК ХарактеристикаНоменклатуры,
	ЗаказыРаспределениеОстатки.ЗаказПокупателя КАК Заказ,
	ЗаказыРаспределениеОстатки.ЗаказПоставщика КАК ЗаказПоставщику,
	ЗаказыРаспределениеОстатки.КоличествоОстаток КАК Остаток
ИЗ
	РегистрНакопления.ЗаказыРаспределение.Остатки(
	//Момент
	,
	//УсловияОтбораРаспределения
	{Номенклатура КАК Номенклатура,
	Номенклатура.Код КАК НоменклатураКод,
	Номенклатура.АртикулДляПоиска КАК НоменклатураАртикулДляПоиска,
	Номенклатура.Наименование КАК НоменклатураНаименование,
	Номенклатура.НаименованиеПолное КАК НоменклатураНаименованиеПолное,
	Номенклатура.Родитель КАК НоменклатураРодитель,
	Номенклатура.СтранаПроисхождения КАК СтранаПроисхождения,
	Номенклатура.Производитель КАК НоменклатураПроизводитель}
	) КАК ЗаказыРаспределениеОстатки
{ЛЕВОЕ СОЕДИНЕНИЕ
	РегистрСведений.НоменклатураПрименяемость КАК НоменклатураПрименяемость
ПО
	ЗаказыРаспределениеОстатки.Номенклатура = НоменклатураПрименяемость.Номенклатура}
//УсловияГДЕОтборРаспределения
{ГДЕ
	НоменклатураПрименяемость.Модель КАК НоменклатураПрименяемостьМодель
}
	
//НачалоВыбораГрупп

ОБЪЕДИНИТЬ ВСЕ                                             
                                                           
ВЫБРАТЬ                                                    
	НоменклатураНоменклатура.Ссылка,
	NULL,
	NULL,
	NULL,
	0
ИЗ                                                         
	Справочник.Номенклатура КАК НоменклатураНоменклатура   
ГДЕ                                                        
	НоменклатураНоменклатура.ЭтоГруппа                     
	И НоменклатураНоменклатура.Родитель = &Родитель
	
//КонецВыбораГрупп

) КАК тбл
//СОЕДИНЕНИЯ
ГДЕ 
	(ВЫБОР
	КОГДА тбл.Номенклатура.ЭтоГруппа ТОГДА 1
	ИНАЧЕ тбл.//ИмяГлавнойКолонки
	КОНЕЦ) > 0

{ГДЕ
    тбл.Остаток КАК Остаток
    //СВОЙСТВА}
    
УПОРЯДОЧИТЬ ПО
	Номенклатура.ЭтоГруппа УБЫВ,
	Номенклатура.Наименование,
	Заказ.Дата,
	ЗаказПоставщику.Дата
#КонецОбласти


#Область Документ_ЗаявкаНаРемонт
ВЫБРАТЬ
	тбл.Номенклатура               КАК Номенклатура,
	тбл.Номенклатура.ЭтоГруппа     КАК ЭтоГруппа,
	тбл.Номенклатура.Код           КАК НоменклатураКод,
	тбл.Номенклатура.Артикул       КАК НоменклатураАртикул,
	тбл.Номенклатура.АртикулДляПоиска КАК НоменклатураАртикулДляПоиска,
	тбл.Номенклатура.Производитель    КАК НоменклатураПроизводитель,
	тбл.Номенклатура.БазоваяЕдиницаИзмерения КАК Единица,
	тбл.ХарактеристикаНоменклатуры КАК ХарактеристикаНоменклатуры,
    тбл.Заказ КАК Заказ,
    ВЫРАЗИТЬ(тбл.Заказ КАК Документ.ЗаказПокупателя).Номер КАК ЗаказНомер,
    ВЫРАЗИТЬ(тбл.Заказ КАК Документ.ЗаказПокупателя).Дата КАК ЗаказДата,
    ВЫРАЗИТЬ(тбл.Контрагент КАК Справочник.Контрагенты).Наименование КАК ЗаказПредставлениеПолучателя,
    тбл.Остаток КАК Остаток
ИЗ
(ВЫБРАТЬ РАЗЛИЧНЫЕ
	ЗаказыПокупателейОстатки.Номенклатура КАК Номенклатура,
	ЗаказыПокупателейОстатки.ХарактеристикаНоменклатуры КАК ХарактеристикаНоменклатуры,
	ЗаказыПокупателейОстатки.Контрагент КАК Контрагент,
	ЗаказыПокупателейОстатки.Заказ КАК Заказ,
	ЗаказыПокупателейОстатки.РезервОстаток КАК Остаток
ИЗ
	РегистрНакопления.ЗаказыПокупателей.Остатки(
	//Момент
	,
	//УсловияОтбораОстатки
	{
	Номенклатура КАК Номенклатура,
	Номенклатура.Код КАК НоменклатураКод,
	Номенклатура.АртикулДляПоиска КАК НоменклатураАртикулДляПоиска,
	Номенклатура.Наименование КАК НоменклатураНаименование,
	Номенклатура.НаименованиеПолное КАК НоменклатураНаименованиеПолное,
	Номенклатура.Родитель КАК НоменклатураРодитель,
	Номенклатура.СтранаПроисхождения КАК СтранаПроисхождения,
	Номенклатура.Производитель КАК НоменклатураПроизводитель
	}
	) КАК ЗаказыПокупателейОстатки
	{ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.НоменклатураПрименяемость КАК НоменклатураПрименяемость
	ПО ЗаказыПокупателейОстатки.Номенклатура = НоменклатураПрименяемость.Номенклатура}
{ГДЕ
	НоменклатураПрименяемость.Модель КАК НоменклатураПрименяемостьМодель
}
	
//НачалоВыбораГрупп

ОБЪЕДИНИТЬ ВСЕ

ВЫБРАТЬ                                                    
	НоменклатураНоменклатура.Ссылка,
	NULL,
	NULL,
	NULL,
	0
ИЗ                                                         
	Справочник.Номенклатура КАК НоменклатураНоменклатура   
ГДЕ                                                        
	НоменклатураНоменклатура.ЭтоГруппа                     
	И НоменклатураНоменклатура.Родитель = &Родитель
	
//КонецВыбораГрупп

) КАК тбл
//СОЕДИНЕНИЯ

ГДЕ 
	(ВЫБОР
	КОГДА тбл.Номенклатура.ЭтоГруппа ТОГДА 1
	ИНАЧЕ тбл.//ИмяГлавнойКолонки
	КОНЕЦ) > 0

{ГДЕ
	тбл.Остаток КАК Остаток
    //СВОЙСТВА}
    
УПОРЯДОЧИТЬ ПО
	ЭтоГруппа УБЫВ,
	Номенклатура.Наименование,
	ЗаказПредставлениеПолучателя,
	ЗаказДата
#КонецОбласти

#Область Документ_ЗаказНаряд
ВЫБРАТЬ
	тбл.Номенклатура               КАК Номенклатура,
	тбл.Номенклатура.ЭтоГруппа     КАК ЭтоГруппа,
	тбл.Номенклатура.Код           КАК НоменклатураКод,
	тбл.Номенклатура.Артикул       КАК НоменклатураАртикул,
	тбл.Номенклатура.АртикулДляПоиска КАК НоменклатураАртикулДляПоиска,
	тбл.Номенклатура.Производитель    КАК НоменклатураПроизводитель,
	тбл.Номенклатура.БазоваяЕдиницаИзмерения КАК Единица,
	тбл.СкладКомпании КАК СкладКомпании,
	тбл.ХарактеристикаНоменклатуры КАК ХарактеристикаНоменклатуры,
    тбл.Заказ КАК Заказ,
    ВЫРАЗИТЬ(тбл.Заказ КАК Документ.ЗаказПокупателя).Номер КАК ЗаказНомер,
    ВЫРАЗИТЬ(тбл.Заказ КАК Документ.ЗаказПокупателя).Дата КАК ЗаказДата,
    ВЫРАЗИТЬ(тбл.Контрагент КАК Справочник.Контрагенты).Наименование КАК ЗаказПредставлениеПолучателя,
    тбл.Остаток КАК Остаток
ИЗ
(ВЫБРАТЬ РАЗЛИЧНЫЕ
	ЗаказыПокупателейОстатки.Номенклатура КАК Номенклатура,
	ЗаказыПокупателейОстатки.СкладКомпании КАК СкладКомпании,
	ЗаказыПокупателейОстатки.ХарактеристикаНоменклатуры КАК ХарактеристикаНоменклатуры,
	ЗаказыПокупателейОстатки.Контрагент КАК Контрагент,
	ЗаказыПокупателейОстатки.Заказ КАК Заказ,
	ЗаказыПокупателейОстатки.РезервОстаток КАК Остаток
ИЗ
	РегистрНакопления.ЗаказыПокупателей.Остатки(
	//Момент
	,
	//УсловияОтбораОстатки
	{
	Номенклатура КАК Номенклатура,
	Номенклатура.Код КАК НоменклатураКод,
	Номенклатура.АртикулДляПоиска КАК НоменклатураАртикулДляПоиска,
	Номенклатура.Наименование КАК НоменклатураНаименование,
	Номенклатура.НаименованиеПолное КАК НоменклатураНаименованиеПолное,
	Номенклатура.Родитель КАК НоменклатураРодитель,
	Номенклатура.СтранаПроисхождения КАК СтранаПроисхождения,
	Номенклатура.Производитель КАК НоменклатураПроизводитель
	}
	) КАК ЗаказыПокупателейОстатки
	{ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.НоменклатураПрименяемость КАК НоменклатураПрименяемость
	ПО ЗаказыПокупателейОстатки.Номенклатура = НоменклатураПрименяемость.Номенклатура}
{ГДЕ
	НоменклатураПрименяемость.Модель КАК НоменклатураПрименяемостьМодель
}
	
//НачалоВыбораГрупп

ОБЪЕДИНИТЬ ВСЕ

ВЫБРАТЬ                                                    
	НоменклатураНоменклатура.Ссылка,
	NULL,
	NULL,
	NULL,
	NULL,
	0
ИЗ                                                         
	Справочник.Номенклатура КАК НоменклатураНоменклатура   
ГДЕ                                                        
	НоменклатураНоменклатура.ЭтоГруппа                     
	И НоменклатураНоменклатура.Родитель = &Родитель
	
//КонецВыбораГрупп

) КАК тбл
//СОЕДИНЕНИЯ

ГДЕ 
	(ВЫБОР
	КОГДА тбл.Номенклатура.ЭтоГруппа ТОГДА 1
	ИНАЧЕ тбл.//ИмяГлавнойКолонки
	КОНЕЦ) > 0

{ГДЕ
	тбл.Остаток КАК Остаток
    //СВОЙСТВА}
    
УПОРЯДОЧИТЬ ПО
	ЭтоГруппа УБЫВ,
	Номенклатура.Наименование,
	ЗаказПредставлениеПолучателя,
	ЗаказДата
#КонецОбласти