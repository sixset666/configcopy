// Процедура выбора комплексной работы
Процедура ВыборКомплекснойРаботы(ЭтаФорма) Экспорт
	Запрос = Новый Запрос;
	Запрос.Текст = "ВЫБРАТЬ РАЗЛИЧНЫЕ
	|	СвязанныеРаботы.Авторабота.Представление КАК АвтоработаПредставление,
	|	СвязанныеРаботы.Авторабота
	|ИЗ
	|	РегистрСведений.СвязанныеРаботы КАК СвязанныеРаботы
	|УПОРЯДОЧИТЬ ПО
	|	СвязанныеРаботы.Авторабота.Представление";
	РезультатЗапроса = Запрос.Выполнить();
	Если РезультатЗапроса.Пустой() Тогда Возврат; КонецЕсли; 
	Выборка = РезультатЗапроса.Выбрать();
	СписокКомплексныхРабот=Новый СписокЗначений;
	Пока Выборка.Следующий() Цикл
		СписокКомплексныхРабот.Добавить(Выборка.Авторабота,Выборка.АвтоработаПредставление);
	КонецЦикла;
	ФормаВыбораКомплекснойРаботы = ПолучитьФорму("ФормаВыбораКомплекснойРаботы",ЭтаФорма,ЭтаФорма);
	ФормаВыбораКомплекснойРаботы.СписокРабот = СписокКомплексныхРабот;
	ФормаВыбораКомплекснойРаботы.ЗакрыватьПриЗакрытииВладельца = Истина;
	ФормаВыбораКомплекснойРаботы.Заголовок = "Выберите комплексную работу";
	КомплекснаяРабота = ФормаВыбораКомплекснойРаботы.ОткрытьМодально();
	Если КомплекснаяРабота=Неопределено Тогда Возврат; КонецЕсли; 
	//Предложим выбрать связанные работы
	ОбработкаПодборРабот = Обработки.ПодборРабот.Создать();
	ФормаВыбора=ОбработкаПодборРабот.ПолучитьФорму("ФормаПодбораСвязанныхРабот",ЭтаФорма);
	ФормаВыбора.НачальноеЗначениеВыбора=КомплекснаяРабота;
	ФормаВыбора.РежимВыбора=Истина;
	ФормаВыбора.ОткрытьМодально();
КонецПроцедуры
