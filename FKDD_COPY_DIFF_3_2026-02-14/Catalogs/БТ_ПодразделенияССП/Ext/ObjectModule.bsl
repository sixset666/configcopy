
Процедура ПередЗаписью(Отказ)
	Если Наименование <> Ссылка.Наименование и Не ЭтоНовый() Тогда 
		ДополнительныеСвойства.Вставить("ИзмененоНаименование", Истина);
	КонецЕсли;	
КонецПроцедуры    

Процедура ПриЗаписи(Отказ)
	Если ДополнительныеСвойства.Свойство("ИзмененоНаименование") И Не Отказ Тогда
		
		Запрос = Новый Запрос;
		Запрос.Текст = 
			"ВЫБРАТЬ
			|	ПодразделенияКомпании.Ссылка КАК Ссылка
			|ИЗ
			|	Справочник.ПодразделенияКомпании КАК ПодразделенияКомпании
			|ГДЕ
			|	ПодразделенияКомпании.БТ_ПодразделениеССП = &БТ_ПодразделениеССП
			|	И ПодразделенияКомпании.БТ_НазваниеДляССП <> &БТ_НазваниеДляССП";
		
		Запрос.УстановитьПараметр("БТ_НазваниеДляССП", Наименование);
		Запрос.УстановитьПараметр("БТ_ПодразделениеССП", Ссылка);
		
		РезультатЗапроса = Запрос.Выполнить();
		
		ВыборкаДетальныеЗаписи = РезультатЗапроса.Выбрать();
		
		Пока ВыборкаДетальныеЗаписи.Следующий() Цикл
			Об = ВыборкаДетальныеЗаписи.ссылка.ПолучитьОбъект();
			Об.БТ_НазваниеДляССП = Наименование;
			Об.Записать();
			Сообщить("Изменено наименование ССП у подразделения " + Об);
		КонецЦикла;
		
	КонецЕсли;
КонецПроцедуры


