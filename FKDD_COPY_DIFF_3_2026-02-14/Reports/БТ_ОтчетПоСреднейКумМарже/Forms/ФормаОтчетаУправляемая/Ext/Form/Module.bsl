
&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	//НастройкиВарианта = "";
	//Если Параметры.Свойство("СформироватьПриОткрытии") и Параметры.Свойство("Вариант",НастройкиВарианта) Тогда
	//	Если не НастройкиВарианта = Неопределено Тогда
	//		
	//		ОтчетОбъект = Отчеты.БТ_ДебиторскаяЗадолженность.Создать();
	//		
	//	    Схема = ОтчетОбъект.СхемаКомпоновкиДанных.ВложенныеСхемыКомпоновкиДанных.Расшифровка.Схема.ВариантыНастроек.Основной;    
	//	    Отчет.КомпоновщикНастроек.Инициализировать(Новый ИсточникДоступныхНастроекКомпоновкиДанных(Схема));    
	//		
	//		Отчет.КомпоновщикНастроек.ЗагрузитьНастройки(НастройкиВарианта);
	//		
	//		СкомпоноватьРезультат(РежимКомпоновкиРезультата.Фоновый);
	//		Элементы.КомпоновщикНастроекПользовательскиеНастройки.Видимость = ложь;
	//	КонецЕсли;
	//КонецЕсли;
	
КонецПроцедуры

&НаКлиенте
Процедура Сформировать(Команда)
	СкомпоноватьРезультат(РежимКомпоновкиРезультата.Фоновый);
	Элементы.КомпоновщикНастроекПользовательскиеНастройки.Видимость = ложь;
КонецПроцедуры


&НаКлиенте
Процедура Отборы(Команда)
	Элементы.КомпоновщикНастроекПользовательскиеНастройки.Видимость = не Элементы.КомпоновщикНастроекПользовательскиеНастройки.Видимость;
КонецПроцедуры


//&НаКлиенте
//Процедура ИсключениеКонтрагентов(Команда)
//	ОткрытьФормуИсключения("Контрагенты");
//КонецПроцедуры


//&НаКлиенте
//Процедура ИсключениеДоговоров(Команда)
//	ОткрытьФормуИсключения("ДоговорыВзаиморасчетов");
//КонецПроцедуры

//&НаКлиенте
//Процедура ОткрытьФормуИсключения(Справочник)
//	
//	ОткрытьФорму("Отчет.БТ_ДебиторскаяЗадолженность.Форма.ФормаИсключений",Новый Структура("Справочник",Справочник));
//	
//КонецПроцедуры

//&НаСервере
//Функция РасшифрокаПоЗН(СтруктураЗначений);//Период,Показатель)
//	
//	
//	Отчет = РеквизитФормыВЗначение("Отчет");
//	СКД = Отчет.ПолучитьМакет("ОсновнаяСхемаКомпоновкиДанных").ВложенныеСхемыКомпоновкиДанных.Найти("Расшифровка").Схема;
//	
//	НастройкиВарианта = СКД.НастройкиПоУмолчанию;
//	
//	НастройкиВарианта.ПараметрыДанных.УстановитьЗначениеПараметра("Ссылка",		СтруктураЗначений.Ссылка);
//	Отбор           = НастройкиВарианта.Отбор;
//	СтруктураОтчета = НастройкиВарианта.Структура;
//	Показатели      = НастройкиВарианта.Выбор;
//	
//	ТабДокОтчет = Новый ТабличныйДокумент;
//	МакетКомпоновки = Новый КомпоновщикМакетаКомпоновкиДанных;
//	Макет = МакетКомпоновки.Выполнить(СКД,НастройкиВарианта,);
//	ПроцессорКомпоновки = новый ПроцессорКомпоновкиДанных;
//	ПроцессорКомпоновки.Инициализировать(Макет,,,Истина);
//	ПроцессорВывода = Новый ПроцессорВыводаРезультатаКомпоновкиДанныхВТабличныйДокумент;
//	ПроцессорВывода.УстановитьДокумент(ТабДокОтчет);
//	ПроцессорВывода.Вывести(ПроцессорКомпоновки);

//	
//	Возврат ТабДокОтчет;
//	
//КонецФункции



//Функция ДобавитьОтбор(ОтборЭлементы,Поле,Значение)
//	
//	ТекОтбор = ОтборЭлементы.Добавить(Тип("ЭлементОтбораКомпоновкиДанных"));
//	ТекОтбор.Использование  = Истина;
//	ТекОтбор.ЛевоеЗначение  = Новый ПолеКомпоновкиДанных(Поле);
//	ТекОтбор.ПравоеЗначение = Значение;
//	ТекОтбор.ВидСравнения   = ВидСравненияКомпоновкиДанных.Равно;
//	
//КонецФункции

//&НаСервере
//Функция РаботаемСРасшифровкойНаСервере(Расшифровка)
// 
//	РезультатСтруктура = Новый Структура;
//	
//	//Внимание! Ресурс сумма может быть перезаписан в значение NULL - поэтому его значение лучше получать выше. 
//	ЗаполнитьСтруктуруПолейРасшифровки(Расшифровка, РезультатСтруктура,);
//	
//	Возврат РезультатСтруктура;
//	
//КонецФункции

//&НаСервереБезКонтекста
//Функция ПреобразоватьИмяПоляГруппировки(п_Поле)
//	
//	Возврат СокрЛП(СтрЗаменить(п_Поле,".",""));
//	
//КонецФункции

////&НаСервере
////Процедура ЗаполнитьСтруктуруПолейРасшифровки(Знач Расшифровка, СтруктураПолей, Знач Данные = "")
////    
////	Если Данные = "" Тогда
////		
////        Данные = ПолучитьИзВременногоХранилища(ДанныеРасшифровки);
////        
////        Если ТипЗнч(Данные.Элементы[Расшифровка]) = Тип("ЭлементРасшифровкиКомпоновкиДанныхПоля") Тогда
////			
////			Поля = Данные.Элементы[Расшифровка].ПолучитьПоля();                   
////            Для каждого Поле Из Поля Цикл
////                СтруктураПолей.Вставить(ПреобразоватьИмяПоляГруппировки(Поле.Поле), Поле.Значение);
////			КонецЦикла;
////			
////		КонецЕсли;
////		
////	КонецЕсли;
////	
////	Возврат;
////КонецПроцедуры

//&НаКлиенте
//Процедура РезультатОбработкаДополнительнойРасшифровки(Элемент, Расшифровка, СтандартнаяОбработка, ДополнительныеПараметры)
//	
//	ДанныеРасшифровкиОбъект = ПолучитьИзВременногоХранилища(ДанныеРасшифровки);
//	
//	// Вставить содержимое обработчика.
//КонецПроцедуры


//&НаСервере
//Процедура ЗаполнитьСтруктуруПолейРасшифровки(Знач Расшифровка, СтруктураПолей, Знач Данные = "")
//    
//	Если Данные = "" Тогда
//		
//        Данные = ПолучитьИзВременногоХранилища(ДанныеРасшифровки);
//        
//        Если ТипЗнч(Данные.Элементы[Расшифровка]) = Тип("ЭлементРасшифровкиКомпоновкиДанныхПоля") Тогда
//			
//			Поля = Данные.Элементы[Расшифровка].ПолучитьПоля();                   
//            Для каждого Поле Из Поля Цикл
//                СтруктураПолей.Вставить(ПреобразоватьИмяПоляГруппировки(Поле.Поле), Поле.Значение);
//            КонецЦикла;
//            
//            Индекс = Число(Расшифровка);
//			
//			Попытка
//				
//				Пока Индекс Цикл
//					
//					ЭлементРасшифровки = Данные.Элементы[Индекс];
//					Если ТипЗнч(ЭлементРасшифровки) = Тип("ЭлементРасшифровкиКомпоновкиДанныхГруппировка") Тогда
//						Прервать;    
//					КонецЕсли;
//					
//					Индекс = Индекс + 1;
//					
//				КонецЦикла;
//				
//			Исключение
//				
//			КонецПопытки;
//			
//            Индекс = Индекс - 1;
//			Пока Индекс Цикл
//				
//                ЭлементРасшифровки = Данные.Элементы[Индекс];
//                Если ТипЗнч(ЭлементРасшифровки) = Тип("ЭлементРасшифровкиКомпоновкиДанныхПоля") Тогда
//					
//					Поля = ЭлементРасшифровки.ПолучитьПоля();                   
//                    Для каждого Поле Из Поля Цикл
//						
//						Если Не ТипЗнч(Поле.Значение) = Тип("Число") Тогда
//                            СтруктураПолей.Вставить(ПреобразоватьИмяПоляГруппировки(Поле.Поле), Поле.Значение);
//						КонецЕсли;
//						
//                    КонецЦикла;
//                    
//                    Индекс = Индекс - 1;
//					
//				Иначе 
//					
//                    Прервать;
//					
//				КонецЕсли;
//				
//			КонецЦикла; 
//			
//        КонецЕсли;
//        
//        ЗаполнитьСтруктуруПолейРасшифровки(Данные.Элементы[Расшифровка], СтруктураПолей, Данные);
//		
//    Иначе 
//        МассивРодителей = Расшифровка.ПолучитьРодителей();
//		
//		Для каждого ПолеРодитель из МассивРодителей Цикл
//			
//			Если Число(ПолеРодитель.Идентификатор) > 0 Тогда
//				
//                Если ТипЗнч(ПолеРодитель) = Тип("ЭлементРасшифровкиКомпоновкиДанныхПоля") Тогда
//                    МассивПолей = ПолеРодитель.ПолучитьПоля();
//                ИначеЕсли ТипЗнч(ПолеРодитель) = Тип("ЭлементРасшифровкиКомпоновкиДанныхГруппировка") Тогда
//                    МассивПолей = ПолеРодитель.ПолучитьРодителей()[0].ПолучитьПоля();
//                КонецЕсли; 
//                
//                Для каждого Поле из МассивПолей Цикл
//					
//					Попытка
//						СтруктураПолей.Вставить(ПреобразоватьИмяПоляГруппировки(Поле.Поле), Поле.Значение);
//					Исключение
//					КонецПопытки;
//                    
//					//РасшифровкиВыше = ПолеРодитель.ПолучитьРодителей();
//					//Для каждого РодительВыше Из РасшифровкиВыше Цикл
//					//    ЗаполнитьСтруктуруПолейРасшифровки(РодительВыше, СтруктураПолей, Данные);              
//					//КонецЦикла;
//					
//				КонецЦикла;
//				
//			КонецЕсли;
//			
//		КонецЦикла;
//		
//    КонецЕсли; 
//        
//КонецПроцедуры

//&НаКлиенте
//Процедура РезультатОбработкаРасшифровки(Элемент, Расшифровка, СтандартнаяОбработка, ДополнительныеПараметры)
//		СтруктураЗначений = РаботаемСРасшифровкойНаСервере(Расшифровка);  
//	СтандартнаяОбработка = Ложь;
//	
//	ТаблДок = РасшифрокаПоЗН(СтруктураЗначений);
//	Если не ТаблДок = Неопределено Тогда
//			
//		Результат = ТаблДок;
//			
//	КонецЕсли;


//КонецПроцедуры

////Функция ПреобразоватьИмяПоляГруппировки(п_Поле)
////	
////	Возврат СокрЛП(п_Поле);
////	
////КонецФункции
