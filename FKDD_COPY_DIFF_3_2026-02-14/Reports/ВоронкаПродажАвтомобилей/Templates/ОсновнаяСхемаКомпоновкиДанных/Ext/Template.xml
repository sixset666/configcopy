<?xml version="1.0" encoding="UTF-8"?>
<DataCompositionSchema xmlns="http://v8.1c.ru/8.1/data-composition-system/schema" xmlns:dcscom="http://v8.1c.ru/8.1/data-composition-system/common" xmlns:dcscor="http://v8.1c.ru/8.1/data-composition-system/core" xmlns:dcsset="http://v8.1c.ru/8.1/data-composition-system/settings" xmlns:v8="http://v8.1c.ru/8.1/data/core" xmlns:v8ui="http://v8.1c.ru/8.1/data/ui" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
	<dataSource>
		<name>ИсточникДанных1</name>
		<dataSourceType>Local</dataSourceType>
	</dataSource>
	<dataSet xsi:type="DataSetQuery">
		<name>ТекстЗапроса</name>
		<field xsi:type="DataSetFieldField">
			<dataPath>Порядок</dataPath>
			<field>Порядок</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Порядок</v8:content>
				</v8:item>
			</title>
			<useRestriction>
				<field>true</field>
				<condition>true</condition>
				<group>true</group>
				<order>true</order>
			</useRestriction>
			<valueType>
				<v8:Type>xs:decimal</v8:Type>
				<v8:NumberQualifiers>
					<v8:Digits>15</v8:Digits>
					<v8:FractionDigits>0</v8:FractionDigits>
					<v8:AllowedSign>Any</v8:AllowedSign>
				</v8:NumberQualifiers>
			</valueType>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>РабочйЛист</dataPath>
			<field>РабочйЛист</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Рабочй лист</v8:content>
				</v8:item>
			</title>
			<valueType>
				<v8:Type xmlns:d5p1="http://v8.1c.ru/8.1/data/enterprise/current-config">d5p1:DocumentRef.РабочийЛист</v8:Type>
			</valueType>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Количество</dataPath>
			<field>Количество</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Количество документов</v8:content>
				</v8:item>
			</title>
			<useRestriction>
				<condition>true</condition>
				<group>true</group>
			</useRestriction>
			<valueType>
				<v8:Type>xs:decimal</v8:Type>
				<v8:NumberQualifiers>
					<v8:Digits>15</v8:Digits>
					<v8:FractionDigits>0</v8:FractionDigits>
					<v8:AllowedSign>Any</v8:AllowedSign>
				</v8:NumberQualifiers>
			</valueType>
			<appearance>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>МинимальнаяШирина</dcscor:parameter>
					<dcscor:value xsi:type="xs:decimal">14</dcscor:value>
				</dcscor:item>
			</appearance>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>НомерМесяца</dataPath>
			<field>НомерМесяца</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Месяц</v8:content>
				</v8:item>
			</title>
			<orderExpression>
				<dcscom:expression>НомерМесяца</dcscom:expression>
				<dcscom:orderType>Asc</dcscom:orderType>
				<dcscom:autoOrder>false</dcscom:autoOrder>
			</orderExpression>
			<valueType>
				<v8:Type>xs:decimal</v8:Type>
				<v8:NumberQualifiers>
					<v8:Digits>2</v8:Digits>
					<v8:FractionDigits>0</v8:FractionDigits>
					<v8:AllowedSign>Any</v8:AllowedSign>
				</v8:NumberQualifiers>
			</valueType>
			<availableValue>
				<value xsi:type="xs:decimal">1</value>
				<presentation xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Январь</v8:content>
					</v8:item>
				</presentation>
			</availableValue>
			<availableValue>
				<value xsi:type="xs:decimal">2</value>
				<presentation xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Февраль</v8:content>
					</v8:item>
				</presentation>
			</availableValue>
			<availableValue>
				<value xsi:type="xs:decimal">3</value>
				<presentation xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Март</v8:content>
					</v8:item>
				</presentation>
			</availableValue>
			<availableValue>
				<value xsi:type="xs:decimal">4</value>
				<presentation xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Апрель</v8:content>
					</v8:item>
				</presentation>
			</availableValue>
			<availableValue>
				<value xsi:type="xs:decimal">5</value>
				<presentation xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Май</v8:content>
					</v8:item>
				</presentation>
			</availableValue>
			<availableValue>
				<value xsi:type="xs:decimal">6</value>
				<presentation xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Июнь</v8:content>
					</v8:item>
				</presentation>
			</availableValue>
			<availableValue>
				<value xsi:type="xs:decimal">7</value>
				<presentation xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Июль</v8:content>
					</v8:item>
				</presentation>
			</availableValue>
			<availableValue>
				<value xsi:type="xs:decimal">8</value>
				<presentation xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Август</v8:content>
					</v8:item>
				</presentation>
			</availableValue>
			<availableValue>
				<value xsi:type="xs:decimal">9</value>
				<presentation xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Сентябрь</v8:content>
					</v8:item>
				</presentation>
			</availableValue>
			<availableValue>
				<value xsi:type="xs:decimal">10</value>
				<presentation xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Октябрь</v8:content>
					</v8:item>
				</presentation>
			</availableValue>
			<availableValue>
				<value xsi:type="xs:decimal">11</value>
				<presentation xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Ноябрь</v8:content>
					</v8:item>
				</presentation>
			</availableValue>
			<availableValue>
				<value xsi:type="xs:decimal">12</value>
				<presentation xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Декабрь</v8:content>
					</v8:item>
				</presentation>
			</availableValue>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ВидОбращения</dataPath>
			<field>ВидОбращения</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Вид обращения</v8:content>
				</v8:item>
			</title>
			<orderExpression>
				<dcscom:expression>Порядок</dcscom:expression>
				<dcscom:orderType>Asc</dcscom:orderType>
				<dcscom:autoOrder>false</dcscom:autoOrder>
			</orderExpression>
			<valueType>
				<v8:Type>xs:string</v8:Type>
				<v8:StringQualifiers>
					<v8:Length>0</v8:Length>
					<v8:AllowedLength>Variable</v8:AllowedLength>
				</v8:StringQualifiers>
			</valueType>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ПериодМесяц</dataPath>
			<field>ПериодМесяц</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>По месяцам</v8:content>
				</v8:item>
			</title>
			<valueType>
				<v8:Type>xs:dateTime</v8:Type>
				<v8:DateQualifiers>
					<v8:DateFractions>Date</v8:DateFractions>
				</v8:DateQualifiers>
			</valueType>
			<appearance>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Формат</dcscor:parameter>
					<dcscor:value xsi:type="xs:string">ДФ='ММММ гггг "г."'</dcscor:value>
				</dcscor:item>
			</appearance>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ПериодКвартал</dataPath>
			<field>ПериодКвартал</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>По кварталам</v8:content>
				</v8:item>
			</title>
			<valueType>
				<v8:Type>xs:dateTime</v8:Type>
				<v8:DateQualifiers>
					<v8:DateFractions>Date</v8:DateFractions>
				</v8:DateQualifiers>
			</valueType>
			<appearance>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Формат</dcscor:parameter>
					<dcscor:value xsi:type="xs:string">ДФ='к "квартал" гггг "г."'</dcscor:value>
				</dcscor:item>
			</appearance>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>НомерКвартала</dataPath>
			<field>НомерКвартала</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Квартал</v8:content>
				</v8:item>
			</title>
			<orderExpression>
				<dcscom:expression>НомерКвартала</dcscom:expression>
				<dcscom:orderType>Asc</dcscom:orderType>
				<dcscom:autoOrder>false</dcscom:autoOrder>
			</orderExpression>
			<valueType>
				<v8:Type>xs:decimal</v8:Type>
				<v8:NumberQualifiers>
					<v8:Digits>1</v8:Digits>
					<v8:FractionDigits>0</v8:FractionDigits>
					<v8:AllowedSign>Any</v8:AllowedSign>
				</v8:NumberQualifiers>
			</valueType>
			<availableValue>
				<value xsi:type="xs:decimal">1</value>
				<presentation xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>1 квартал</v8:content>
					</v8:item>
				</presentation>
			</availableValue>
			<availableValue>
				<value xsi:type="xs:decimal">2</value>
				<presentation xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>2 квартал</v8:content>
					</v8:item>
				</presentation>
			</availableValue>
			<availableValue>
				<value xsi:type="xs:decimal">3</value>
				<presentation xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>3 квартал</v8:content>
					</v8:item>
				</presentation>
			</availableValue>
			<availableValue>
				<value xsi:type="xs:decimal">4</value>
				<presentation xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>4 квартал</v8:content>
					</v8:item>
				</presentation>
			</availableValue>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ПериодГод</dataPath>
			<field>ПериодГод</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>По годам</v8:content>
				</v8:item>
			</title>
			<valueType>
				<v8:Type>xs:dateTime</v8:Type>
				<v8:DateQualifiers>
					<v8:DateFractions>Date</v8:DateFractions>
				</v8:DateQualifiers>
			</valueType>
			<appearance>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Формат</dcscor:parameter>
					<dcscor:value xsi:type="xs:string">ДФ='гггг "г."'</dcscor:value>
				</dcscor:item>
			</appearance>
		</field>
		<dataSource>ИсточникДанных1</dataSource>
		<query>ВЫБРАТЬ
	Событие.Ссылка,
	Событие.ДатаФактическогоЗавершения,
	Событие.ДокументОснование КАК РабочийЛист
ПОМЕСТИТЬ СобытияРабочегоЛиста
ИЗ
	Документ.Событие КАК Событие
ГДЕ
	Событие.ДатаФактическогоЗавершения МЕЖДУ &amp;ДатаНачала И &amp;ДатаОкончания
	И Событие.Состояние = ЗНАЧЕНИЕ(Перечисление.СостоянияСобытий.Завершено)
	И Событие.ВидСобытия = ЗНАЧЕНИЕ(Перечисление.ВидыСобытий.ЛичнаяВстреча)
	И Событие.ПодразделениеКомпании В ИЕРАРХИИ(&amp;ПодразделениеКомпании)
	И (ВЫРАЗИТЬ(Событие.ДокументОснование КАК Документ.РабочийЛист)) &lt;&gt; ЗНАЧЕНИЕ(Документ.РабочийЛист.ПустаяСсылка)

ОБЪЕДИНИТЬ ВСЕ

ВЫБРАТЬ РАЗЛИЧНЫЕ
	Событие.Ссылка,
	Событие.ДатаФактическогоЗавершения,
	РабочийЛист.Ссылка
ИЗ
	Документ.РабочийЛист КАК РабочийЛист
		ЛЕВОЕ СОЕДИНЕНИЕ Документ.Событие КАК Событие
		ПО РабочийЛист.ДокументОснование = Событие.Ссылка
ГДЕ
	Событие.ДатаФактическогоЗавершения МЕЖДУ &amp;ДатаНачала И &amp;ДатаОкончания
	И Событие.Состояние = ЗНАЧЕНИЕ(Перечисление.СостоянияСобытий.Завершено)
	И Событие.ВидСобытия = ЗНАЧЕНИЕ(Перечисление.ВидыСобытий.ЛичнаяВстреча)
	И Событие.ПодразделениеКомпании В ИЕРАРХИИ(&amp;ПодразделениеКомпании)
	И (ВЫРАЗИТЬ(РабочийЛист.ДокументОснование КАК Документ.Событие)) &lt;&gt; ЗНАЧЕНИЕ(Документ.Событие.ПустаяСсылка)
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ТестДрайв.Ссылка,
	ТестДрайв.ДатаФактическогоЗавершения
ПОМЕСТИТЬ ТестДрайвыРабочихЛистов
ИЗ
	Документ.ТестДрайв КАК ТестДрайв
ГДЕ
	ТестДрайв.ДатаФактическогоЗавершения МЕЖДУ &amp;ДатаНачала И &amp;ДатаОкончания
	И ТестДрайв.Состояние = ЗНАЧЕНИЕ(Перечисление.СостоянияСобытий.Завершено)
	И ТестДрайв.ПодразделениеКомпании В ИЕРАРХИИ(&amp;ПодразделениеКомпании)
	И НЕ (ВЫРАЗИТЬ(ТестДрайв.ДокументОснование КАК Документ.РабочийЛист)) = ЗНАЧЕНИЕ(Документ.РабочийЛист.ПустаяСсылка)
	И ТестДрайв.Проведен = ИСТИНА
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	"Первичный контакт" КАК ВидОбращения,
	1 КАК Количество,
	1 КАК Порядок,
	РабочийЛист.Ссылка КАК РабочйЛист,
	НАЧАЛОПЕРИОДА(Событие.ДатаФактическогоЗавершения, ГОД) КАК ПериодГод,
	НАЧАЛОПЕРИОДА(Событие.ДатаФактическогоЗавершения, КВАРТАЛ) КАК ПериодКвартал,
	НАЧАЛОПЕРИОДА(Событие.ДатаФактическогоЗавершения, МЕСЯЦ) КАК ПериодМесяц,
	КВАРТАЛ(Событие.ДатаФактическогоЗавершения) КАК НомерКвартала,
	МЕСЯЦ(Событие.ДатаФактическогоЗавершения) КАК НомерМесяца
{ВЫБРАТЬ
	ПериодГод,
	ПериодКвартал,
	ПериодМесяц,
	НомерКвартала,
	НомерМесяца,
	РабочйЛист.*}
ИЗ
	Документ.РабочийЛист КАК РабочийЛист
		ЛЕВОЕ СОЕДИНЕНИЕ Документ.Событие КАК Событие
		ПО РабочийЛист.ДокументОснование = Событие.Ссылка
ГДЕ
	Событие.ДатаФактическогоЗавершения МЕЖДУ &amp;ДатаНачала И &amp;ДатаОкончания
	И Событие.ПодразделениеКомпании В ИЕРАРХИИ(&amp;ПодразделениеКомпании)
	И Событие.Состояние = ЗНАЧЕНИЕ(Перечисление.СостоянияСобытий.Завершено)
	И (ВЫРАЗИТЬ(РабочийЛист.ДокументОснование КАК Документ.Событие)) &lt;&gt; ЗНАЧЕНИЕ(Документ.Событие.ПустаяСсылка)
{ГДЕ
	РабочийЛист.Ссылка.* КАК РабочйЛист}

ОБЪЕДИНИТЬ ВСЕ

ВЫБРАТЬ
	"Встреча",
	1,
	2,
	ВложенныйЗапрос.РабочийЛист,
	НАЧАЛОПЕРИОДА(ВложенныйЗапрос.ДатаФактическогоЗавершения, ГОД),
	НАЧАЛОПЕРИОДА(ВложенныйЗапрос.ДатаФактическогоЗавершения, КВАРТАЛ),
	НАЧАЛОПЕРИОДА(ВложенныйЗапрос.ДатаФактическогоЗавершения, МЕСЯЦ),
	КВАРТАЛ(ВложенныйЗапрос.ДатаФактическогоЗавершения),
	МЕСЯЦ(ВложенныйЗапрос.ДатаФактическогоЗавершения)
ИЗ
	(ВЫБРАТЬ
		СобытияРабочегоЛиста.Ссылка КАК Ссылка,
		СобытияРабочегоЛиста.ДатаФактическогоЗавершения КАК ДатаФактическогоЗавершения,
		ЕСТЬNULL(СобытияРабочегоЛиста1.ДатаФактическогоЗавершения, &amp;ДатаНачала) КАК ДатаФакт,
		СобытияРабочегоЛиста.РабочийЛист КАК РабочийЛист
	ИЗ
		СобытияРабочегоЛиста КАК СобытияРабочегоЛиста
			ЛЕВОЕ СОЕДИНЕНИЕ СобытияРабочегоЛиста КАК СобытияРабочегоЛиста1
			ПО СобытияРабочегоЛиста.РабочийЛист = СобытияРабочегоЛиста1.РабочийЛист
				И СобытияРабочегоЛиста.ДатаФактическогоЗавершения &gt; СобытияРабочегоЛиста1.ДатаФактическогоЗавершения) КАК ВложенныйЗапрос
ГДЕ
	ВложенныйЗапрос.ДатаФакт = &amp;ДатаНачала
{ГДЕ
	ВложенныйЗапрос.Ссылка.ДокументОснование.* КАК РабочйЛист}

ОБЪЕДИНИТЬ ВСЕ

ВЫБРАТЬ
	"Тест-драйв",
	1,
	3,
	ВложенныйЗапрос.Ссылка.ДокументОснование,
	НАЧАЛОПЕРИОДА(ВложенныйЗапрос.ДатаФактическогоЗавершения, ГОД),
	НАЧАЛОПЕРИОДА(ВложенныйЗапрос.ДатаФактическогоЗавершения, КВАРТАЛ),
	НАЧАЛОПЕРИОДА(ВложенныйЗапрос.ДатаФактическогоЗавершения, МЕСЯЦ),
	КВАРТАЛ(ВложенныйЗапрос.ДатаФактическогоЗавершения),
	МЕСЯЦ(ВложенныйЗапрос.ДатаФактическогоЗавершения)
ИЗ
	(ВЫБРАТЬ
		ТестДрайвыРабочихЛистов.Ссылка КАК Ссылка,
		ТестДрайвыРабочихЛистов.ДатаФактическогоЗавершения КАК ДатаФактическогоЗавершения,
		ЕСТЬNULL(ТестДрайвыРабочихЛистов1.ДатаФактическогоЗавершения, &amp;ДатаНачала) КАК ДатаФакт
	ИЗ
		ТестДрайвыРабочихЛистов КАК ТестДрайвыРабочихЛистов
			ЛЕВОЕ СОЕДИНЕНИЕ ТестДрайвыРабочихЛистов КАК ТестДрайвыРабочихЛистов1
			ПО ТестДрайвыРабочихЛистов.Ссылка.ДокументОснование = ТестДрайвыРабочихЛистов1.Ссылка.ДокументОснование
				И ТестДрайвыРабочихЛистов.ДатаФактическогоЗавершения &gt; ТестДрайвыРабочихЛистов1.ДатаФактическогоЗавершения) КАК ВложенныйЗапрос
ГДЕ
	ВложенныйЗапрос.ДатаФакт = &amp;ДатаНачала

ОБЪЕДИНИТЬ ВСЕ

ВЫБРАТЬ
	"Контракт",
	1,
	4,
	ЗаказНаАвтомобиль.ДокументОснование,
	НАЧАЛОПЕРИОДА(ЗаказНаАвтомобиль.Дата, ГОД),
	НАЧАЛОПЕРИОДА(ЗаказНаАвтомобиль.Дата, КВАРТАЛ),
	НАЧАЛОПЕРИОДА(ЗаказНаАвтомобиль.Дата, МЕСЯЦ),
	КВАРТАЛ(ЗаказНаАвтомобиль.Дата),
	МЕСЯЦ(ЗаказНаАвтомобиль.Дата)
ИЗ
	Документ.ЗаказНаАвтомобиль КАК ЗаказНаАвтомобиль
ГДЕ
	ЗаказНаАвтомобиль.Дата МЕЖДУ &amp;ДатаНачала И &amp;ДатаОкончания
	И ЗаказНаАвтомобиль.Проведен = ИСТИНА
	И ЗаказНаАвтомобиль.ПодразделениеКомпании В ИЕРАРХИИ(&amp;ПодразделениеКомпании)
	И (ВЫРАЗИТЬ(ЗаказНаАвтомобиль.ДокументОснование КАК Документ.РабочийЛист)) &lt;&gt; ЗНАЧЕНИЕ(Документ.РабочийЛист.ПустаяСсылка)
{ГДЕ
	ЗаказНаАвтомобиль.ДокументОснование.* КАК РабочйЛист}

ОБЪЕДИНИТЬ ВСЕ

ВЫБРАТЬ
	"Выписка",
	1,
	5,
	РеализацияАвтомобилей.ДокументОснование.ДокументОснование,
	НАЧАЛОПЕРИОДА(РеализацияАвтомобилей.Дата, ГОД),
	НАЧАЛОПЕРИОДА(РеализацияАвтомобилей.Дата, КВАРТАЛ),
	НАЧАЛОПЕРИОДА(РеализацияАвтомобилей.Дата, МЕСЯЦ),
	КВАРТАЛ(РеализацияАвтомобилей.Дата),
	МЕСЯЦ(РеализацияАвтомобилей.Дата)
ИЗ
	Документ.РеализацияАвтомобилей КАК РеализацияАвтомобилей
ГДЕ
	РеализацияАвтомобилей.Дата МЕЖДУ &amp;ДатаНачала И &amp;ДатаОкончания
	И РеализацияАвтомобилей.ПодразделениеКомпании В ИЕРАРХИИ(&amp;ПодразделениеКомпании)
	И РеализацияАвтомобилей.Проведен = ИСТИНА
	И (ВЫРАЗИТЬ(РеализацияАвтомобилей.ДокументОснование КАК Документ.ЗаказНаАвтомобиль)) &lt;&gt; ЗНАЧЕНИЕ(Документ.ЗаказНаАвтомобиль.ПустаяСсылка)
	И (ВЫРАЗИТЬ(РеализацияАвтомобилей.ДокументОснование.ДокументОснование КАК Документ.РабочийЛист)) &lt;&gt; ЗНАЧЕНИЕ(Документ.РабочийЛист.ПустаяСсылка)
{ГДЕ
	РеализацияАвтомобилей.ДокументОснование.ДокументОснование.* КАК РабочйЛист}

ОБЪЕДИНИТЬ ВСЕ

ВЫБРАТЬ
	"Возврат автомобиля",
	1,
	6,
	ВозвратОтПокупателяАвтомобилей.ДокументОснование.ДокументОснование.ДокументОснование,
	НАЧАЛОПЕРИОДА(ВозвратОтПокупателяАвтомобилей.Дата, ГОД),
	НАЧАЛОПЕРИОДА(ВозвратОтПокупателяАвтомобилей.Дата, КВАРТАЛ),
	НАЧАЛОПЕРИОДА(ВозвратОтПокупателяАвтомобилей.Дата, МЕСЯЦ),
	КВАРТАЛ(ВозвратОтПокупателяАвтомобилей.Дата),
	МЕСЯЦ(ВозвратОтПокупателяАвтомобилей.Дата)
ИЗ
	Документ.ВозвратОтПокупателяАвтомобилей КАК ВозвратОтПокупателяАвтомобилей
ГДЕ
	ВозвратОтПокупателяАвтомобилей.Дата МЕЖДУ &amp;ДатаНачала И &amp;ДатаОкончания
	И ВозвратОтПокупателяАвтомобилей.Проведен = ИСТИНА
	И ВозвратОтПокупателяАвтомобилей.ПодразделениеКомпании В ИЕРАРХИИ(&amp;ПодразделениеКомпании)
	И (ВЫРАЗИТЬ(ВозвратОтПокупателяАвтомобилей.ДокументОснование КАК Документ.РеализацияАвтомобилей)) &lt;&gt; ЗНАЧЕНИЕ(Документ.РеализацияАвтомобилей.ПустаяСсылка)
	И (ВЫРАЗИТЬ(ВозвратОтПокупателяАвтомобилей.ДокументОснование.ДокументОснование КАК Документ.ЗаказНаАвтомобиль)) &lt;&gt; ЗНАЧЕНИЕ(Документ.ЗаказНаАвтомобиль.ПустаяСсылка)
	И (ВЫРАЗИТЬ(ВозвратОтПокупателяАвтомобилей.ДокументОснование.ДокументОснование.ДокументОснование КАК Документ.РабочийЛист)) &lt;&gt; ЗНАЧЕНИЕ(Документ.РабочийЛист.ПустаяСсылка)
{ГДЕ
	ВозвратОтПокупателяАвтомобилей.ДокументОснование.ДокументОснование.ДокументОснование.* КАК РабочйЛист}</query>
	</dataSet>
	<totalField>
		<dataPath>Количество</dataPath>
		<expression>Сумма(Количество)</expression>
		<group>ВидОбращения</group>
		<group>НомерКвартала</group>
		<group>НомерМесяца</group>
		<group>ПериодГод</group>
		<group>ПериодКвартал</group>
		<group>ПериодМесяц</group>
		<group>РабочйЛист</group>
		<group>ОбщийИтог</group>
	</totalField>
	<parameter>
		<name>ДатаНачала</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Дата начала</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type>xs:dateTime</v8:Type>
			<v8:DateQualifiers>
				<v8:DateFractions>DateTime</v8:DateFractions>
			</v8:DateQualifiers>
		</valueType>
		<value xsi:nil="true"/>
		<useRestriction>false</useRestriction>
		<availableAsField>false</availableAsField>
		<use>Always</use>
	</parameter>
	<parameter>
		<name>ДатаОкончания</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Дата окончания</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type>xs:dateTime</v8:Type>
			<v8:DateQualifiers>
				<v8:DateFractions>DateTime</v8:DateFractions>
			</v8:DateQualifiers>
		</valueType>
		<value xsi:type="xs:dateTime">0001-01-01T00:00:00</value>
		<useRestriction>false</useRestriction>
		<availableAsField>false</availableAsField>
		<denyIncompleteValues>true</denyIncompleteValues>
		<use>Always</use>
	</parameter>
	<parameter>
		<name>ПодразделениеКомпании</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Подразделение продажи автомобилей</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type xmlns:d4p1="http://v8.1c.ru/8.1/data/enterprise/current-config">d4p1:CatalogRef.ПодразделенияКомпании</v8:Type>
		</valueType>
		<value xsi:nil="true"/>
		<useRestriction>false</useRestriction>
		<availableAsField>false</availableAsField>
		<denyIncompleteValues>true</denyIncompleteValues>
		<use>Always</use>
	</parameter>
	<settingsVariant>
		<dcsset:name>Основной</dcsset:name>
		<dcsset:presentation xsi:type="xs:string">Основной</dcsset:presentation>
		<dcsset:settings xmlns:style="http://v8.1c.ru/8.1/data/ui/style" xmlns:sys="http://v8.1c.ru/8.1/data/ui/fonts/system" xmlns:web="http://v8.1c.ru/8.1/data/ui/colors/web" xmlns:win="http://v8.1c.ru/8.1/data/ui/colors/windows">
			<dcsset:selection>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>Количество</dcsset:field>
				</dcsset:item>
			</dcsset:selection>
			<dcsset:dataParameters>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>ДатаНачала</dcscor:parameter>
					<dcscor:value xsi:type="v8:StandardBeginningDate">
						<v8:variant xsi:type="v8:StandardBeginningDateVariant">Custom</v8:variant>
						<v8:date>0001-01-01T00:00:00</v8:date>
					</dcscor:value>
				</dcscor:item>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>ДатаОкончания</dcscor:parameter>
					<dcscor:value xsi:type="xs:dateTime">0001-01-01T00:00:00</dcscor:value>
				</dcscor:item>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>ПодразделениеКомпании</dcscor:parameter>
					<dcscor:value xsi:nil="true"/>
				</dcscor:item>
			</dcsset:dataParameters>
			<dcsset:outputParameters>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>ТипДиаграммы</dcscor:parameter>
					<dcscor:value xsi:type="v8ui:ChartType">Funnel3D</dcscor:value>
				</dcscor:item>
			</dcsset:outputParameters>
			<dcsset:item xsi:type="dcsset:StructureItemTable">
				<dcsset:row>
					<dcsset:groupItems>
						<dcsset:item xsi:type="dcsset:GroupItemField">
							<dcsset:field>ВидОбращения</dcsset:field>
							<dcsset:groupType>Items</dcsset:groupType>
							<dcsset:periodAdditionType>None</dcsset:periodAdditionType>
							<dcsset:periodAdditionBegin xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionBegin>
							<dcsset:periodAdditionEnd xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionEnd>
						</dcsset:item>
					</dcsset:groupItems>
					<dcsset:order>
						<dcsset:item xsi:type="dcsset:OrderItemAuto"/>
					</dcsset:order>
					<dcsset:selection>
						<dcsset:item xsi:type="dcsset:SelectedItemAuto"/>
					</dcsset:selection>
				</dcsset:row>
				<dcsset:selection>
					<dcsset:item xsi:type="dcsset:SelectedItemField">
						<dcsset:field>Количество</dcsset:field>
					</dcsset:item>
				</dcsset:selection>
			</dcsset:item>
			<dcsset:item xsi:type="dcsset:StructureItemChart">
				<dcsset:series>
					<dcsset:groupItems>
						<dcsset:item xsi:type="dcsset:GroupItemField">
							<dcsset:field>ВидОбращения</dcsset:field>
							<dcsset:groupType>Items</dcsset:groupType>
							<dcsset:periodAdditionType>None</dcsset:periodAdditionType>
							<dcsset:periodAdditionBegin xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionBegin>
							<dcsset:periodAdditionEnd xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionEnd>
						</dcsset:item>
					</dcsset:groupItems>
					<dcsset:order>
						<dcsset:item xsi:type="dcsset:OrderItemAuto"/>
					</dcsset:order>
					<dcsset:selection>
						<dcsset:item xsi:type="dcsset:SelectedItemAuto"/>
					</dcsset:selection>
				</dcsset:series>
				<dcsset:selection>
					<dcsset:item xsi:type="dcsset:SelectedItemAuto"/>
					<dcsset:item xsi:type="dcsset:SelectedItemField">
						<dcsset:field>Количество</dcsset:field>
					</dcsset:item>
				</dcsset:selection>
				<dcsset:outputParameters>
					<dcscor:item xsi:type="dcsset:SettingsParameterValue">
						<dcscor:parameter>ТипДиаграммы</dcscor:parameter>
						<dcscor:value xsi:type="v8ui:ChartType">Funnel3D</dcscor:value>
					</dcscor:item>
				</dcsset:outputParameters>
			</dcsset:item>
		</dcsset:settings>
	</settingsVariant>
</DataCompositionSchema>