

#Область ОбщиеПроцедурыИФункции

// Процедура для формирования предупреждения при запуске программы с 28.12.2108 о повышении ставки НДС.
//
Функция ПроверкаОбИзмененииСтавкиНДС() Экспорт
	
	ТекущаяДата = ТекущаяДатаСеанса();
	
	// Текущая дата меньше 28.12.2018 - пока не будем предупреждать.
	//Если ТекущаяДата < Дата("20181228") Тогда
	//	Возврат Истина;
	//КонецЕсли;  
	Если ТекущаяДата < Дата("20261229") Тогда
		Возврат Истина;
	КонецЕсли;
	
	АдминистраторСистемы = ПравоДоступа("Администрирование", Метаданные);
	
	СтавкиНДСОбновлены = ПроверкаОбновленияСтавкиНа20();
	
	Если НЕ АдминистраторСистемы И НЕ СтавкиНДСОбновлены Тогда
		
		//Если ТекущаяДата >= Дата("20190101") Тогда
		//	
		//	// Зашел обычный пользователь, но в базе остались ставки НДС 18% с 01 января 2019.
		//	// Запрещена работа пользователя до обновления данных.
		//	
		//	#Если Клиент Тогда
		//		ОтветВопроса = Вопрос("В связи с Федеральным законом от 3 августа 2018 г. № 303-ФЗ ""О внесении изменений в отдельные законодательные акты Российской Федерации о налогах и сборах""
		//			| повышена ставка НДС с 18% до 20%. Администратору системы необходимо обновить данные. Продолжить работу?", РежимДиалогаВопрос.ДаНет,, КодВозвратаДиалога.Нет);
		//			
		//		Если ОтветВопроса = КодВозвратаДиалога.Нет Тогда
		//			Возврат Ложь;
		//		КонецЕсли;
		//	#КонецЕсли
		
		Если ТекущаяДата >= Дата("20260101") Тогда
			
			// Зашел обычный пользователь, но в базе остались ставки НДС 20% с 01 января 2026.
			// Запрещена работа пользователя до обновления данных.
			
			#Если Клиент Тогда
				ОтветВопроса = Вопрос("В связи с Федеральным законом от 3 августа 2018 г. № 303-ФЗ ""О внесении изменений в отдельные законодательные акты Российской Федерации о налогах и сборах""
				| повышена ставка НДС с 20% до 22%. Администратору системы необходимо обновить данные. Продолжить работу?", РежимДиалогаВопрос.ДаНет,, КодВозвратаДиалога.Нет);
				
				Если ОтветВопроса = КодВозвратаДиалога.Нет Тогда
					Возврат Ложь;
				КонецЕсли;
			#КонецЕсли
			
		ИначеЕсли ТекущаяДата >= Дата("20181228") Тогда
			
			#Если Клиент Тогда
				Сообщить("В связи с Федеральным законом от 3 августа 2018 г. № 303-ФЗ ""О внесении изменений в отдельные законодательные акты Российской Федерации о налогах и сборах""
				| повышена ставка НДС с 18% до 20%. Если до 01.01.2019 г. не будет запущена обработка обновления ставок НДС администратором, то вход в программу будет запрещен.", СтатусСообщения.Важное);
			#КонецЕсли
		КонецЕсли; 
		
	ИначеЕсли АдминистраторСистемы Тогда
		
		//Если ТекущаяДата < Дата("20190101") И ТекущаяДата >= Дата("20181228") И НЕ СтавкиНДСОбновлены Тогда
		//	
		//	// В период с 28.12.2018 - 31.12.2018 23:59:59 для администратора выводим только предупреждение при запуске.
		//	#Если Клиент Тогда
		//	Сообщить("В связи с Федеральным законом от 3 августа 2018 г. № 303-ФЗ ""О внесении изменений в отдельные законодательные акты Российской Федерации о налогах и сборах""
		//			| повышена ставка НДС с 18% до 20%. Если до 01.01.2019 г. не будет запущена обработка ""Обновление ставки НДС"", то работа пользователей в программе будет прекращена.
		//			| С 01.01.2019 г. при запуске программы данная обработка будет запущена автоматически для обновления данных.", СтатусСообщения.Важное);
		//	#КонецЕсли
		//ИначеЕсли ТекущаяДата >= Дата("20190101") И НЕ СтавкиНДСОбновлены Тогда
		//	
		//	#Если Клиент Тогда
		//	// Запуск обработки обновления ставки НДС принудительно!
		//	ФормаОбновления = Обработки.ОбновлениеСтавкиНДС.ПолучитьФорму("Форма");
		//	ФормаОбновления.ОткрытьМодально();
		//	#КонецЕсли
		//	
		//КонецЕсли;
		
		Если ТекущаяДата < Дата("20260101") И ТекущаяДата >= Дата("20251228") И НЕ СтавкиНДСОбновлены Тогда
			
			// В период с 28.12.2018 - 31.12.2018 23:59:59 для администратора выводим только предупреждение при запуске.
			#Если Клиент Тогда
			Сообщить("В связи с Федеральным законом от 3 августа 2018 г. № 303-ФЗ ""О внесении изменений в отдельные законодательные акты Российской Федерации о налогах и сборах""
					| повышена ставка НДС с 20% до 22%. Если до 01.01.2026 г. не будет запущена обработка ""Обновление ставки НДС"", то работа пользователей в программе будет прекращена.
					| С 01.01.2026 г. при запуске программы данная обработка будет запущена автоматически для обновления данных.", СтатусСообщения.Важное);
			#КонецЕсли
		ИначеЕсли ТекущаяДата >= Дата("20260101") И НЕ СтавкиНДСОбновлены Тогда
			
			#Если Клиент Тогда
			// Запуск обработки обновления ставки НДС принудительно!
			ФормаОбновления = Обработки.ОбновлениеСтавкиНДС.ПолучитьФорму("Форма");
			ФормаОбновления.ОткрытьМодально();
			#КонецЕсли
			
		КонецЕсли;
		
	КонецЕсли;
	
	Возврат Истина;
	
КонецФункции // ПолучитьПредупреждениеОбИзмененииСтавкиНДС()

// Процедура для проверки ставки НДС в документе
//
Процедура ПроверкиКорректностьСтавкиНДС(ЭтотОбъект, Ошибки = "", Результат) Экспорт
	
	// При восстановлении последовательностей не будем выполнять проверку.
	ГрупповаяОбработкаДокументов=Ложь;
	Если НЕ ЭтотОбъект.ДополнительныеСвойства.Свойство("ГрупповаяОбработкаДокументов",ГрупповаяОбработкаДокументов) Тогда
		ГрупповаяОбработкаДокументов=Ложь;
	КонецЕсли;
	
	Если ГрупповаяОбработкаДокументов Тогда
		Возврат;
	КонецЕсли;
	
	// Для данного документа нужна проверка?
	ПроверятьДокумент = ПроверкаСтавкиНДСДляДокумента(ЭтотОбъект);
	
	// Проверять данный документ не будем.
	Если ПроверятьДокумент = 0 Тогда
		Возврат;
	КонецЕсли;
	
	ВыдаватьОшибку = (ПроверятьДокумент = 1);
	
	КонтрольКорректностиСтавокНДС = обПраво("КонтрольКорректностиСтавокНДС", ЭтотОбъект.Права);
	
	ДатаПроверки = ?((ТипЗнч(ЭтотОбъект) = Тип("ДокументОбъект.ЗаказНаряд") ИЛИ ТипЗнч(ЭтотОбъект) = Тип("ДокументСсылка.ЗаказНаряд")) И ЭтотОбъект.Состояние = Справочники.ВидыСостоянийЗаказНарядов.Закрыт, ЭтотОбъект.ДатаЗакрытия, ЭтотОбъект.Дата);
	//АктуальнаяСтавкаНДС = ?(ДатаПроверки < Дата("20190101"), 18, 20); 
	АктуальнаяСтавкаНДС = ?(ДатаПроверки < Дата("20260101"), 20, 22);
	ЭтотОбъектМетаданные = ЭтотОбъект.Метаданные();
	
	СообщенияОбОшибке = "";
	
	// Проверим ставку НДС в ТЧ документа.
	ПроверкаСтавкиНДСТабличнойЧасти(ЭтотОбъект, ЭтотОбъектМетаданные, "Товары",                 АктуальнаяСтавкаНДС, СообщенияОбОшибке);
	ПроверкаСтавкиНДСТабличнойЧасти(ЭтотОбъект, ЭтотОбъектМетаданные, "Работы",                 АктуальнаяСтавкаНДС, СообщенияОбОшибке);
	ПроверкаСтавкиНДСТабличнойЧасти(ЭтотОбъект, ЭтотОбъектМетаданные, "Автомобили",             АктуальнаяСтавкаНДС, СообщенияОбОшибке);
	ПроверкаСтавкиНДСТабличнойЧасти(ЭтотОбъект, ЭтотОбъектМетаданные, "Опции",                  АктуальнаяСтавкаНДС, СообщенияОбОшибке);
	ПроверкаСтавкиНДСТабличнойЧасти(ЭтотОбъект, ЭтотОбъектМетаданные, "Состав",                 АктуальнаяСтавкаНДС, СообщенияОбОшибке);
	ПроверкаСтавкиНДСТабличнойЧасти(ЭтотОбъект, ЭтотОбъектМетаданные, "ТоварыЗаменители",       АктуальнаяСтавкаНДС, СообщенияОбОшибке);
	ПроверкаСтавкиНДСТабличнойЧасти(ЭтотОбъект, ЭтотОбъектМетаданные, "ОприходованныеЦенности", АктуальнаяСтавкаНДС, СообщенияОбОшибке);
	ПроверкаСтавкиНДСТабличнойЧасти(ЭтотОбъект, ЭтотОбъектМетаданные, "Возвраты",               АктуальнаяСтавкаНДС, СообщенияОбОшибке);
	ПроверкаСтавкиНДСТабличнойЧасти(ЭтотОбъект, ЭтотОбъектМетаданные, "Активы",                 АктуальнаяСтавкаНДС, СообщенияОбОшибке);
	
	//anton
	//Проверим ставку НДС по реквизиту.
	Попытка
		Если (ЭтотОбъект.СтавкаНДС.Ставка = 20 ИЛИ ЭтотОбъект.СтавкаНДС.Ставка = 22)
			И НЕ ЭтотОбъект.СтавкаНДС.Ставка = АктуальнаяСтавкаНДС Тогда
			ЭтотОбъект.СтавкаНДС=АктуальнаяСтавкаНДС;
		КонецЕсли;
	Исключение
		//	// Нет рекизита у документа
	КонецПопытки;
	
	Попытка
		Если обЗначениеНеЗаполнено(ЭтотОбъект.СтавкаНДС) И ЭтотОбъект.СуммаНДС>0 Тогда
			ЭтотОбъект.СтавкаНДС=АктуальнаяСтавкаНДС;
		КонецЕсли;
	Исключение
		//	// Нет рекизита у документа
	КонецПопытки;

	//Попытка
	//	Если (ЭтотОбъект.СтавкаНДС.Ставка = 18 ИЛИ ЭтотОбъект.СтавкаНДС.Ставка = 20)
	//		И НЕ ЭтотОбъект.СтавкаНДС.Ставка = АктуальнаяСтавкаНДС Тогда
	//		дкДобавитьОшибку(СообщенияОбОшибке, "Значение ставки НДС указано некорректно. Актуальная ставка НДС равна "+АктуальнаяСтавкаНДС+"%");
	//	КонецЕсли;
	//Исключение
	//	// Нет рекизита у документа
	//КонецПопытки;
	
	//Попытка
	//	Если (ЭтотОбъект.СтавкаНДСНаАвтомобиль.Ставка = 18 ИЛИ ЭтотОбъект.СтавкаНДСНаАвтомобиль.Ставка = 20)
	//		И НЕ ЭтотОбъект.СтавкаНДСНаАвтомобиль.Ставка = АктуальнаяСтавкаНДС Тогда
	//		дкДобавитьОшибку(СообщенияОбОшибке, "Значение ставки НДС указано некорректно. Актуальная ставка НДС равна "+АктуальнаяСтавкаНДС+"%");
	//	КонецЕсли;
	//Исключение
	//	// Нет рекизита у документа
	//КонецПопытки;
	//anton
	
	// Выведем сообщения по итогам проверки.
	Если НЕ ПустаяСтрока(СообщенияОбОшибке) Тогда
		Если ВыдаватьОшибку И КонтрольКорректностиСтавокНДС = Перечисления.ВариантыОтветов.Да Тогда
			дкДобавитьОшибку(Ошибки, СообщенияОбОшибке);
			Результат = Ложь;
		ИначеЕсли ВыдаватьОшибку И КонтрольКорректностиСтавокНДС = Перечисления.ВариантыОтветов.Спрашивать Тогда
			
			#Если Клиент Тогда
			Ответ = Вопрос("Введены некорректные ставки НДС. Продолжить?", РежимДиалогаВопрос.ДаНет);
			
			Если Ответ = КодВозвратаДиалога.Нет Тогда
				дкДобавитьОшибку(Ошибки, СообщенияОбОшибке);
				Результат = Ложь;
			Иначе
				Сообщить(СообщенияОбОшибке);
			КонецЕсли;
			#Иначе
			Сообщить(СообщенияОбОшибке);
			#КонецЕсли
			
		Иначе
			Сообщить(СообщенияОбОшибке);
		КонецЕсли;
	КонецЕсли;
	
КонецПроцедуры // ПроверкиКорректностьСтавкиНДС

#КонецОбласти


#Область ВнутренниеСлужебныеПроцедурыИФункции

// Функция для проверки наличия ставки в 18%.
//
Функция ПроверкаОбновленияСтавкиНа20()
	
	УстановитьПривилегированныйРежим(Истина);
	
	Запрос = Новый Запрос;
	Запрос.Текст = "ВЫБРАТЬ ПЕРВЫЕ 1
	               |	Номенклатура.Ссылка
	               |ИЗ
	               |	Справочник.Номенклатура КАК Номенклатура
	               |ГДЕ
	               |	Номенклатура.СтавкаНДС.Ставка = 20";
	
	Выборка = Запрос.Выполнить().Выбрать();
	
	Возврат НЕ Выборка.Следующий();
	
КонецФункции // ПроверкаОбновленияСтавкиНа20()

Функция ПроверкаСтавкиНДСДляДокумента(ЭтотОбъект)
	
	ДокументСсылка = ЭтотОбъект.Ссылка;
	
	ТипДокумента = ТипЗнч(ДокументСсылка);
	
	МассивДокументовПроверять = Новый Массив;
	МассивДокументовПроверять.Добавить(Тип("ДокументСсылка.ВводОстатковАвтомобилей"));
	МассивДокументовПроверять.Добавить(Тип("ДокументСсылка.ВводОстатковТоваров"));
	МассивДокументовПроверять.Добавить(Тип("ДокументСсылка.ВводОстатковТоваровВПроизводстве"));
	МассивДокументовПроверять.Добавить(Тип("ДокументСсылка.ДоговорПроведенияТехническогоОсмотра"));
	МассивДокументовПроверять.Добавить(Тип("ДокументСсылка.ЗаказНаАвтомобиль"));
	МассивДокументовПроверять.Добавить(Тип("ДокументСсылка.ЗаказПокупателя"));
	МассивДокументовПроверять.Добавить(Тип("ДокументСсылка.ЗаказПоставщику"));
	МассивДокументовПроверять.Добавить(Тип("ДокументСсылка.ЗаказПоставщикуНаАвтомобиль"));
	МассивДокументовПроверять.Добавить(Тип("ДокументСсылка.ЗакрытиеСмены"));
	МассивДокументовПроверять.Добавить(Тип("ДокументСсылка.ЗаменаВЗаказеПокупателя"));
	МассивДокументовПроверять.Добавить(Тип("ДокументСсылка.ЗаменаВЗаказеПоставщику"));
	МассивДокументовПроверять.Добавить(Тип("ДокументСсылка.ЗаявкаНаХранениеШин"));
	МассивДокументовПроверять.Добавить(Тип("ДокументСсылка.КорректировкаЗаказаПокупателя"));
	МассивДокументовПроверять.Добавить(Тип("ДокументСсылка.КорректировкаЗаказаПоставщику"));
	МассивДокументовПроверять.Добавить(Тип("ДокументСсылка.ОбслуживаниеАктива"));
	МассивДокументовПроверять.Добавить(Тип("ДокументСсылка.ПоступлениеАвтомобилей"));
	МассивДокументовПроверять.Добавить(Тип("ДокументСсылка.ПоступлениеДопРасходов"));
	МассивДокументовПроверять.Добавить(Тип("ДокументСсылка.ПоступлениеТоваров"));
	МассивДокументовПроверять.Добавить(Тип("ДокументСсылка.РабочийЛист"));
	МассивДокументовПроверять.Добавить(Тип("ДокументСсылка.РеализацияАвтомобилей"));
	МассивДокументовПроверять.Добавить(Тип("ДокументСсылка.РеализацияАктивов"));
	МассивДокументовПроверять.Добавить(Тип("ДокументСсылка.РеализацияТоваров"));
	
	МассивДокументовПредупреждать = Новый Массив;
	МассивДокументовПредупреждать.Добавить(Тип("ДокументСсылка.АвансовыйОтчет"));
	МассивДокументовПредупреждать.Добавить(Тип("ДокументСсылка.АктРазногласий"));
	МассивДокументовПредупреждать.Добавить(Тип("ДокументСсылка.ВозвратОтПокупателя"));
	МассивДокументовПредупреждать.Добавить(Тип("ДокументСсылка.ВозвратОтПокупателяАвтомобилей"));
	МассивДокументовПредупреждать.Добавить(Тип("ДокументСсылка.ВозвратПоставщику"));
	МассивДокументовПредупреждать.Добавить(Тип("ДокументСсылка.ВозвратПоставщикуАвтомобилей"));
	МассивДокументовПредупреждать.Добавить(Тип("ДокументСсылка.Выписка"));
	МассивДокументовПредупреждать.Добавить(Тип("ДокументСсылка.КорректировкаПоступления"));
	МассивДокументовПредупреждать.Добавить(Тип("ДокументСсылка.КорректировкаПоступленияАвтомобилей"));
	МассивДокументовПредупреждать.Добавить(Тип("ДокументСсылка.КорректировкаРеализации"));
	МассивДокументовПредупреждать.Добавить(Тип("ДокументСсылка.КорректировкаРеализацииАвтомобилей"));
	МассивДокументовПредупреждать.Добавить(Тип("ДокументСсылка.ОтчетКомиссионера"));
	МассивДокументовПредупреждать.Добавить(Тип("ДокументСсылка.ОтчетКомиссионераЗаАвтомобили"));
	МассивДокументовПредупреждать.Добавить(Тип("ДокументСсылка.ОтчетКомитенту"));
	МассивДокументовПредупреждать.Добавить(Тип("ДокументСсылка.ОтчетКомитентуЗаАвтомобили"));
	МассивДокументовПредупреждать.Добавить(Тип("ДокументСсылка.ПеремещениеАвтомобилей"));
	МассивДокументовПредупреждать.Добавить(Тип("ДокументСсылка.ПеремещениеТоваров"));
	МассивДокументовПредупреждать.Добавить(Тип("ДокументСсылка.ПриходныйКассовыйОрдер"));
	МассивДокументовПредупреждать.Добавить(Тип("ДокументСсылка.РасходныйКассовыйОрдер"));
	МассивДокументовПредупреждать.Добавить(Тип("ДокументСсылка.ТаможеннаяДекларацияИмпорт"));
	МассивДокументовПредупреждать.Добавить(Тип("ДокументСсылка.ЧекНаОплату"));
	МассивДокументовПредупреждать.Добавить(Тип("ДокументСсылка.СчетНаОплату"));
	МассивДокументовПредупреждать.Добавить(Тип("ДокументСсылка.СчетНаОплатуЗаАвтомобили"));
	МассивДокументовПредупреждать.Добавить(Тип("ДокументСсылка.СчетОтПоставщика"));
	МассивДокументовПредупреждать.Добавить(Тип("ДокументСсылка.СчетОтПоставщикаЗаАвтомобили"));
	
	
	Если НЕ МассивДокументовПроверять.Найти(ТипДокумента) = Неопределено Тогда
		// Проверка согдасно праву.
		Возврат 1;
	ИначеЕсли НЕ МассивДокументовПредупреждать.Найти(ТипДокумента) = Неопределено Тогда
		// Предупреждаем только по праву.
		Возврат 2;
	ИначеЕсли ТипДокумента = Тип("ДокументСсылка.ЗаказНаряд") Тогда
		// Для Заказ-наряда проверяем только когда переводим в состояние "Закрыт", иначе - предупреждение.
		Возврат ?(ЭтотОбъект.Состояние = Справочники.ВидыСостоянийЗаказНарядов.Закрыт, 1, 2);
	ИначеЕсли ТипДокумента = Тип("ДокументСсылка.ЗаявкаНаРемонт") Тогда
		// До 01.01.2019 только предупреждаем, после - запрещаем по праву.
		Возврат ?(ЭтотОбъект.Дата < Дата("20190101"), 2, 1);
	ИначеЕсли ТипДокумента = Тип("ДокументСсылка.Чек") Тогда
		Если ЭтотОбъект.ХозОперация = Справочники.ХозОперации.ЧекОтложенный Тогда
			Возврат 0;
		ИначеЕсли ЭтотОбъект.ХозОперация = Справочники.ХозОперации.Чек Тогда
			Возврат 1;
		Иначе
			Возврат 2;
		КонецЕсли;
	ИначеЕсли ТипДокумента = Тип("ДокументСсылка.СчетФактураВыданный") Тогда
		Если ЭтотОбъект.ХозОперация = Справочники.ХозОперации.СчетФактураВыданный Тогда
			Возврат 1;
		Иначе
			Возврат 2;
		КонецЕсли;
	ИначеЕсли ТипДокумента = Тип("ДокументСсылка.СчетФактураПолученный") Тогда
		Если ЭтотОбъект.ХозОперация = Справочники.ХозОперации.СчетФактураПолученный Тогда
			Возврат 1;
		Иначе
			Возврат 2;
		КонецЕсли;
	КонецЕсли;
	
	// Проверка не нужна
	Возврат 0;
	
КонецФункции // ПроверкаСтавкиНДСДляДокумента()

Процедура ПроверкаСтавкиНДСТабличнойЧасти(ЭтотОбъект, ЭтотОбъектМетаданные, ИмяТабличнойЧасти, СтавкаНДС, СообщенияОбОшибке)
	
	СтавкаНДСНеАктуальна = Ложь;
	//anton
	Попытка

		Для Каждого ТекущаяСтрока Из ЭтотОбъект[ИмяТабличнойЧасти] Цикл
			Если (ТекущаяСтрока.СтавкаНДС.Ставка = 20 ИЛИ ТекущаяСтрока.СтавкаНДС.Ставка = 22)
				И НЕ ТекущаяСтрока.СтавкаНДС.Ставка = СтавкаНДС Тогда
				Если ЭтотОбъект.ХозОперация = Справочники.ХозОперации.ПоступлениеТоваров Тогда
                	СтавкаНДСНеАктуальна = Истина;
					Прервать;
				Иначе
					ТекущаяСтрока.СтавкаНДС=СтавкаНДС;
				КонецЕсли;
			КонецЕсли;
		КонецЦикла;
	Исключение
		// Такой ТЧ у документа нет.
		Возврат;
	КонецПопытки;

	Если СтавкаНДСНеАктуальна Тогда
		#Если НаКлиенте Тогда
			Предупреждение("В табличной части <Товары> указана не актуальная ставка НДС!");
		#Иначе
			Сообщить("В табличной части <Товары> указана не актуальная ставка НДС!");
		#КонецЕсли		
	КонецЕсли;
	
	Попытка
		Для Каждого ТекущаяСтрока Из ЭтотОбъект[ИмяТабличнойЧасти] Цикл
			Если обЗначениеНеЗаполнено(ТекущаяСтрока.СтавкаНДС) И ТекущаяСтрока.СуммаНДС>0 Тогда
				ТекущаяСтрока.СтавкаНДС=справочники.СтавкиНДС.ОсновнаяСтавкаНДС;
			КонецЕсли;
		КонецЦикла;
	Исключение
		// Такой ТЧ у документа нет.
		Возврат;
	КонецПопытки;
	
	
	//НомерСтрок = Новый Массив;
	//
	//Попытка
	//	Для Каждого ТекущаяСтрока Из ЭтотОбъект[ИмяТабличнойЧасти] Цикл
	//		Если (ТекущаяСтрока.СтавкаНДС.Ставка = 18 ИЛИ ТекущаяСтрока.СтавкаНДС.Ставка = 20)
	//			И НЕ ТекущаяСтрока.СтавкаНДС.Ставка = СтавкаНДС Тогда
	//			НомерСтрок.Добавить(ТекущаяСтрока.НомерСтроки);
	//		КонецЕсли;
	//	КонецЦикла;
	//Исключение
	//	// Такой ТЧ у документа нет.
	//	Возврат;
	//КонецПопытки;
	//
	//Если НомерСтрок.Количество() > 0 Тогда
	//	дкДобавитьОшибку(СообщенияОбОшибке, "Таблица <"+обПолучитьСинонимРеквизита(ЭтотОбъектМетаданные, , ИмяТабличнойЧасти)
	//		+"> значение ставки НДС указано некорректно в строках: "+СтрСоединить(НомерСтрок, ", ")+". Актуальная ставка НДС равна "+СтавкаНДС+"%");
	//КонецЕсли;
	//anton
	
КонецПроцедуры // ПроверкаСтавкиНДСТабличнойЧасти()

#КонецОбласти
