
Функция ПолучитьФормуНастроек(ЭтаФорма, ВариантОтчета, ИмяФормыОтчета, КлючУникальности, КлючВарианта = Неопределено, ПредставлениеВарианта = Неопределено, СхемаКомпоновки = Неопределено, ЗаполнитьНастроки = Ложь) Экспорт
	
	СтруктураПараметров = Новый Структура();
	
	Если НЕ КлючВарианта = Неопределено Тогда
		СтруктураПараметров.Вставить("КлючВарианта",          КлючВарианта);
	КонецЕсли;
	Если НЕ ПредставлениеВарианта = Неопределено Тогда
		СтруктураПараметров.Вставить("ПредставлениеВарианта", ПредставлениеВарианта);
	КонецЕсли;
	Если НЕ СхемаКомпоновки = Неопределено Тогда
		СтруктураПараметров.Вставить("СхемаКомпоновки",       СхемаКомпоновки);
	КонецЕсли;
	
	СтруктураПараметров.Вставить("Вариант",                   ВариантОтчета);
	СтруктураПараметров.Вставить("ЗаполнитьНастроки",         ЗаполнитьНастроки);
	
	ФормаНастроек = ПолучитьФорму(ИмяФормыОтчета, СтруктураПараметров, ЭтаФорма, КлючУникальности);
		
	Возврат ФормаНастроек;
	
КонецФункции

&ТолстыйКлиентОбычноеПриложение
// Процедура обработчик нажатия кнопки изменения отчета 
//
// Параметры:
//  ЭтаФорма       – Форма – Ссылка на форму отчета.
//	ВыбОтчет       - Отчет - Выбранный отчет
//	ВыбФорма       - Форма - Выбранная форма
//	ФормаНастройки - Форма - Форма настройки
//
Процедура ОткрытьНовыйОтчет(ЭтаФорма, ВыбОтчет = "") Экспорт
	
	Если обЗначениеНеЗаполнено(ЭтаФорма) И обЗначениеНеЗаполнено(ВыбОтчет) Тогда
		Возврат;
	КонецЕсли;
	
	Отчет = Отчеты[ВыбОтчет].Создать();
	Отчет.ЗаполнитьНачальныеНастройки();
	
	ВариантОтчета = Отчет.КомпоновщикНастроек;
	Попытка
		ВариантОтчета.Настройки.ПараметрыДанных.УстановитьЗначениеПараметра("ДатаНачала", ЭтаФорма.ДатаНачала);
	Исключение
	КонецПопытки;
	Попытка
	ВариантОтчета.Настройки.ПараметрыДанных.УстановитьЗначениеПараметра("ДатаОкончания", КонецДня(ЭтаФорма.ДатаКонца));
	Исключение
	КонецПопытки;
	
	Попытка
		СохраненнаяСтруктураСвязиСвойств = ЭтаФорма.СтруктураСвязиСвойств;
	Исключение
		СохраненнаяСтруктураСвязиСвойств = Новый Структура;
	КонецПопытки;
	
	ПараметрыИзмеренийСтрок = ЭтаФорма.ПараметрыИзмеренийСтрок;
	
	ВариантОтчета.Настройки.Структура.Очистить();
	ТаблицаКомпоновки = ВариантОтчета.Настройки.Структура.Добавить(Тип("ТаблицаКомпоновкиДанных"));
	
	ГруппировкаРодитель = Неопределено;
	Для Каждого ТекИзмерение Из ЭтаФорма.ИзмеренияСтроки Цикл
		
		Если НЕ ТекИзмерение.Использование Тогда
			Продолжить;
		КонецЕсли;
		
		ИмяИзмерения = СтрЗаменить(ТекИзмерение.ПутьКДанным,".","");
		Если СохраненнаяСтруктураСвязиСвойств.Свойство(ИмяИзмерения) Тогда
			Продолжить;
		КонецЕсли;
		Если ГруппировкаРодитель = Неопределено Тогда
			НоваяГруппировка = ТаблицаКомпоновки.Строки.Добавить();
		Иначе
			НоваяГруппировка = ГруппировкаРодитель.Добавить();
		КонецЕсли;
		ГруппировкаРодитель = НоваяГруппировка.Структура;
		НоваяГруппировка.Использование = ТекИзмерение.Использование;
		ПолеГруппировки = НоваяГруппировка.ПоляГруппировки.Элементы.Добавить(Тип("ПолеГруппировкиКомпоновкиДанных"));
		ПолеГруппировки.Использование = Истина;
		ПолеГруппировки.Поле          = Новый ПолеКомпоновкиДанных(ТекИзмерение.ПутьКДанным);
		Если ТекИзмерение.ТипИзмерения = "Элементы" Тогда
			ПолеГруппировки.ТипГруппировки = ТипГруппировкиКомпоновкиДанных.Элементы;
		ИначеЕсли ТекИзмерение.ТипИзмерения = "Иерархия" Тогда
			ПолеГруппировки.ТипГруппировки = ТипГруппировкиКомпоновкиДанных.Иерархия;
		Иначе
			ПолеГруппировки.ТипГруппировки = ТипГруппировкиКомпоновкиДанных.ТолькоИерархия;
		КонецЕсли;
		
		НовоеПоле = НоваяГруппировка.Выбор.Элементы.Добавить(Тип("АвтоВыбранноеПолеКомпоновкиДанных"));
		НовоеПоле.Использование = Истина;
		
		НовоеПоле = НоваяГруппировка.Порядок.Элементы.Добавить(Тип("АвтоЭлементПорядкаКомпоновкиДанных"));
		НовоеПоле.Использование = Истина;
		
		ИмяПоля = СтрЗаменить(ТекИзмерение.ПутьКДанным, ".", "");
		Если ПараметрыИзмеренийСтрок.Свойство(ИмяПоля) Тогда
			ПараметрыИзмерения = ПараметрыИзмеренийСтрок[ИмяПоля];
			Если ПараметрыИзмерения.Свойство("Поля") Тогда
				Поля = ПараметрыИзмерения.Поля;
				Если ТипЗнч(Поля) = Тип("ТаблицаЗначений") Тогда
					Для Каждого ВыбранноеПоле Из Поля Цикл
						НовоеПоле = НоваяГруппировка.Выбор.Элементы.Добавить(Тип("ВыбранноеПолеКомпоновкиДанных"));
						НовоеПоле.Использование = Истина;
						НовоеПоле.Поле          = Новый ПолеКомпоновкиДанных(ВыбранноеПоле.ПутьКДанным);
					КонецЦикла;
				КонецЕсли;
			КонецЕсли;
			
			Если ПараметрыИзмерения.Свойство("Порядок") Тогда
				Порядок = ПараметрыИзмерения.Порядок;
				Если ТипЗнч(Порядок) = Тип("ТаблицаЗначений") Тогда
					Для Каждого ВыбранноеПоле Из Порядок Цикл
						НовоеПоле = НоваяГруппировка.Порядок.Элементы.Добавить(Тип("ЭлементПорядкаКомпоновкиДанных"));
						НовоеПоле.Использование = Истина;
						НовоеПоле.Поле          = Новый ПолеКомпоновкиДанных(ВыбранноеПоле.ПутьКДанным);
						Если ВыбранноеПоле.Убывание Тогда
							НовоеПоле.ТипУпорядочивания = НаправлениеСортировкиКомпоновкиДанных.Убыв;
						Иначе
							НовоеПоле.ТипУпорядочивания = НаправлениеСортировкиКомпоновкиДанных.Возр;
						КонецЕсли;
					КонецЦикла;
				КонецЕсли;
			КонецЕсли;
		КонецЕсли;
		
	КонецЦикла;
	
	ПолеДобавления = Новый ПолеКомпоновкиДанных("ПериодРегистратор");
	Если НЕ ОтчетыСервер.КомпоновщикЕстьПолеВСтруктуре(ПолеДобавления, ВариантОтчета.Настройки.Структура) Тогда
		ГруппировкаРегистратора = ОтчетыСервер.ДобавитьПолеВПоследнююГруппировку(ПолеДобавления, ВариантОтчета.Настройки.Структура);
		Поля = Новый Массив;
		Поля.Добавить("ПериодРегистратор");
		ОтчетыСервер.КомпоновщикУстановитьОтборПоПолямГруппировки(ГруппировкаРегистратора, Поля);
		//ОтчетыСервер.КомпоновщикУстановитьОтборПустыхГруппировок(КомпоновщикНастроек.Настройки.Структура, Поля);
	КонецЕсли;
	
	ПоказателиСКД = ВариантОтчета.Настройки.Выбор.Элементы;
	Для Каждого ФункцияСКД Из ПоказателиСКД Цикл
		ФункцияСКД.Использование = Ложь;
		Если ТипЗнч(ФункцияСКД) = Тип("ГруппаВыбранныхПолейКомпоновкиДанных") Тогда
			Для Каждого ПоказательСКД Из ФункцияСКД.Элементы Цикл
				ПоказательСКД.Использование = Ложь;
			КонецЦикла;
		КонецЕсли;
	КонецЦикла;
	
	Для Каждого ТекФункция Из ЭтаФорма.Функции Цикл
		Для Каждого ФункцияСКД Из ПоказателиСКД Цикл
			Если СокрЛП(ФункцияСКД.Поле) = ТекФункция.Имя Тогда
				Если НЕ ТекФункция.Использование Тогда
					Прервать;
				КонецЕсли;
				ФункцияСКД.Использование = Истина;
				Если ТипЗнч(ФункцияСКД) = Тип("ГруппаВыбранныхПолейКомпоновкиДанных") Тогда
					Для Каждого ТекПоказатель Из ЭтаФорма.Показатели Цикл
						Для Каждого ПоказательСКД Из ФункцияСКД.Элементы Цикл
							ИмяПоказателя = ТекФункция.Имя + "." + ТекПоказатель.Имя;
							Если СокрЛП(ПоказательСКД.Поле) = ИмяПоказателя Тогда
								ПоказательСКД.Использование = ТекПоказатель.Использование;
								Прервать;
							КонецЕсли;
						КонецЦикла;
					КонецЦикла;
				КонецЕсли;
				Прервать;
			КонецЕсли;
		КонецЦикла;
	КонецЦикла;
	
	ОтборыСКД = ВариантОтчета.Настройки.Отбор;
	ОтборыСКД.Элементы.Очистить();
	Для Каждого ТекОтбор Из ЭтаФорма.ПостроительОтчета.Отбор Цикл
		Если НЕ ТекОтбор.Использование = Истина Тогда
			Продолжить;
		КонецЕсли;
		ПутьКДанным = ТекОтбор.ПутьКДанным;
		ОписаниеПоля = ЭтаФорма.ДеревоДоступныхПолей.Строки.Найти(ТекОтбор.ПутьКДанным, "ПутьКДанным");
		Если НЕ ОписаниеПоля = Неопределено Тогда
			Если ОписаниеПоля.Показатель Тогда
				Если Найти(ПутьКДанным, "НачальныйОстаток") > 1 Тогда
					ИмяПоказателя = СтрЗаменить(ПутьКДанным, "НачальныйОстаток", "");
					Если НЕ ЭтаФорма.Показатели.Найти(ИмяПоказателя, "Имя") = Неопределено Тогда
						ПутьКДанным = "НачальныйОстаток." + ИмяПоказателя;
					КонецЕсли;
				ИначеЕсли Найти(ПутьКДанным, "Приход") > 1 Тогда
					ИмяПоказателя = СтрЗаменить(ПутьКДанным, "Приход", "");
					Если НЕ ЭтаФорма.Показатели.Найти(ИмяПоказателя, "Имя") = Неопределено Тогда
						ПутьКДанным = "Приход." + ИмяПоказателя;
					КонецЕсли;
				ИначеЕсли Найти(ПутьКДанным, "Расход") > 1 Тогда
					ИмяПоказателя = СтрЗаменить(ПутьКДанным, "Расход", "");
					Если НЕ ЭтаФорма.Показатели.Найти(ИмяПоказателя, "Имя") = Неопределено Тогда
						ПутьКДанным = "Расход." + ИмяПоказателя;
					КонецЕсли;
				ИначеЕсли Найти(ПутьКДанным, "КонечныйОстаток") > 1 Тогда
					ИмяПоказателя = СтрЗаменить(ПутьКДанным, "КонечныйОстаток", "");
					Если НЕ ЭтаФорма.Показатели.Найти(ИмяПоказателя, "Имя") = Неопределено Тогда
						ПутьКДанным = "КонечныйОстаток." + ИмяПоказателя;
					КонецЕсли;
				КонецЕсли;
			КонецЕсли;
		КонецЕсли;
		
		Если ОтборыСКД.ДоступныеПоляОтбора.НайтиПоле(Новый ПолеКомпоновкиДанных(ПутьКДанным)) = Неопределено Тогда
			Продолжить;
		КонецЕсли;
		
		Если ТекОтбор.ВидСравнения = ВидСравнения.Интервал Тогда
			
			ОтборСКД = ВариантОтчета.Настройки.Отбор.Элементы.Добавить(Тип("ЭлементОтбораКомпоновкиДанных"));
			ОтборСКД.Использование = Истина;
			ОтборСКД.ЛевоеЗначение = Новый ПолеКомпоновкиДанных(ПутьКДанным);
			ОтборСКД.ВидСравнения = ВидСравненияКомпоновкиДанных.Больше;
			ОтборСКД.ПравоеЗначение = ТекОтбор.ЗначениеС;
			
			ОтборСКД = ВариантОтчета.Настройки.Отбор.Элементы.Добавить(Тип("ЭлементОтбораКомпоновкиДанных"));
			ОтборСКД.Использование = Истина;
			ОтборСКД.ЛевоеЗначение = Новый ПолеКомпоновкиДанных(ПутьКДанным);
			ОтборСКД.ВидСравнения = ВидСравненияКомпоновкиДанных.Меньше;
			ОтборСКД.ПравоеЗначение = ТекОтбор.ЗначениеПО;
		ИначеЕсли ТекОтбор.ВидСравнения = ВидСравнения.ИнтервалВключаяГраницы Тогда
			//ГруппаСКД = ВариантОтчета.Настройки.Отбор.Элементы.Добавить(Тип("ГруппаЭлементовОтбораКомпоновкиДанных"));
			//ГруппаСКД.Использование = Истина;
			
			ОтборСКД = ВариантОтчета.Настройки.Отбор.Элементы.Добавить(Тип("ЭлементОтбораКомпоновкиДанных"));
			ОтборСКД.Использование = Истина;
			ОтборСКД.ЛевоеЗначение = Новый ПолеКомпоновкиДанных(ПутьКДанным);
			ОтборСКД.ВидСравнения = ВидСравненияКомпоновкиДанных.БольшеИлиРавно;
			ОтборСКД.ПравоеЗначение = ТекОтбор.ЗначениеС;
			
			ОтборСКД = ВариантОтчета.Настройки.Отбор.Элементы.Добавить(Тип("ЭлементОтбораКомпоновкиДанных"));
			ОтборСКД.Использование = Истина;
			ОтборСКД.ЛевоеЗначение = Новый ПолеКомпоновкиДанных(ПутьКДанным);
			ОтборСКД.ВидСравнения = ВидСравненияКомпоновкиДанных.МеньшеИлиРавно;
			ОтборСКД.ПравоеЗначение = ТекОтбор.ЗначениеПО;
		ИначеЕсли ТекОтбор.ВидСравнения = ВидСравнения.ИнтервалВключаяНачало Тогда
			//ГруппаСКД = ВариантОтчета.Настройки.Отбор.Элементы.Добавить(Тип("ГруппаЭлементовОтбораКомпоновкиДанных"));
			//ГруппаСКД.Использование = Истина;
			
			ОтборСКД = ВариантОтчета.Настройки.Отбор.Элементы.Добавить(Тип("ЭлементОтбораКомпоновкиДанных"));
			ОтборСКД.Использование = Истина;
			ОтборСКД.ЛевоеЗначение = Новый ПолеКомпоновкиДанных(ПутьКДанным);
			ОтборСКД.ВидСравнения = ВидСравненияКомпоновкиДанных.Больше;
			ОтборСКД.ПравоеЗначение = ТекОтбор.ЗначениеС;
			
			ОтборСКД = ВариантОтчета.Настройки.Отбор.Элементы.Добавить(Тип("ЭлементОтбораКомпоновкиДанных"));
			ОтборСКД.Использование = Истина;
			ОтборСКД.ЛевоеЗначение = Новый ПолеКомпоновкиДанных(ПутьКДанным);
			ОтборСКД.ВидСравнения = ВидСравненияКомпоновкиДанных.МеньшеИлиРавно;
			ОтборСКД.ПравоеЗначение = ТекОтбор.ЗначениеПО;
		ИначеЕсли ТекОтбор.ВидСравнения = ВидСравнения.ИнтервалВключаяОкончание Тогда
			//ГруппаСКД = ВариантОтчета.Настройки.Отбор.Элементы.Добавить(Тип("ГруппаЭлементовОтбораКомпоновкиДанных"));
			//ГруппаСКД.Использование = Истина;
			
			ОтборСКД = ВариантОтчета.Настройки.Отбор.Элементы.Добавить(Тип("ЭлементОтбораКомпоновкиДанных"));
			ОтборСКД.Использование = Истина;
			ОтборСКД.ЛевоеЗначение = Новый ПолеКомпоновкиДанных(ПутьКДанным);
			ОтборСКД.ВидСравнения = ВидСравненияКомпоновкиДанных.БольшеИлиРавно;
			ОтборСКД.ПравоеЗначение = ТекОтбор.ЗначениеС;
			
			ОтборСКД = ВариантОтчета.Настройки.Отбор.Элементы.Добавить(Тип("ЭлементОтбораКомпоновкиДанных"));
			ОтборСКД.Использование = Истина;
			ОтборСКД.ЛевоеЗначение = Новый ПолеКомпоновкиДанных(ПутьКДанным);
			ОтборСКД.ВидСравнения = ВидСравненияКомпоновкиДанных.Меньше;
			ОтборСКД.ПравоеЗначение = ТекОтбор.ЗначениеПО;
		Иначе
			ОтчетыСервер.КомпоновщикУстановитьОтбор(ВариантОтчета.Настройки, ПутьКДанным, ТекОтбор.Значение, ВидСравненияКомпоновкиДанных[СокрЛП(ТекОтбор.ВидСравнения)]);
		КонецЕсли;
		
		
		Если ТекОтбор.ВидСравнения = ВидСравнения.Равно Тогда
			ВидСравненияСКД = ВидСравненияКомпоновкиДанных.Равно;
		ИначеЕсли ТекОтбор.ВидСравнения = ВидСравнения.Больше Тогда
			ВидСравненияСКД = ВидСравненияКомпоновкиДанных.Больше;
		ИначеЕсли ТекОтбор.ВидСравнения = ВидСравнения.БольшеИлиРавно Тогда
			ВидСравненияСКД = ВидСравненияКомпоновкиДанных.БольшеИлиРавно;
		ИначеЕсли ТекОтбор.ВидСравнения = ВидСравнения.ВИерархии Тогда
			ВидСравненияСКД = ВидСравненияКомпоновкиДанных.ВИерархии;
		ИначеЕсли ТекОтбор.ВидСравнения = ВидСравнения.ВСписке Тогда
			ВидСравненияСКД = ВидСравненияКомпоновкиДанных.ВСписке;
		ИначеЕсли ТекОтбор.ВидСравнения = ВидСравнения.ВСпискеПоИерархии Тогда
			ВидСравненияСКД = ВидСравненияКомпоновкиДанных.ВСпискеПоИерархии;
		
		ИначеЕсли ТекОтбор.ВидСравнения = ВидСравнения.Меньше Тогда
			ВидСравненияСКД = ВидСравненияКомпоновкиДанных.Меньше;
		ИначеЕсли ТекОтбор.ВидСравнения = ВидСравнения.МеньшеИлиРавно Тогда
			ВидСравненияСКД = ВидСравненияКомпоновкиДанных.МеньшеИлиРавно;
		ИначеЕсли ТекОтбор.ВидСравнения = ВидСравнения.НеВИерархии Тогда
			ВидСравненияСКД = ВидСравненияКомпоновкиДанных.НеВИерархии;
		ИначеЕсли ТекОтбор.ВидСравнения = ВидСравнения.НеВСписке Тогда
			ВидСравненияСКД = ВидСравненияКомпоновкиДанных.НеВСписке;
		ИначеЕсли ТекОтбор.ВидСравнения = ВидСравнения.НеВСпискеПоИерархии Тогда
			ВидСравненияСКД = ВидСравненияКомпоновкиДанных.НеВСпискеПоИерархии;
		ИначеЕсли ТекОтбор.ВидСравнения = ВидСравнения.НеРавно Тогда
			ВидСравненияСКД = ВидСравненияКомпоновкиДанных.НеРавно;
		ИначеЕсли ТекОтбор.ВидСравнения = ВидСравнения.НеСодержит Тогда
			ВидСравненияСКД = ВидСравненияКомпоновкиДанных.НеСодержит;
		ИначеЕсли ТекОтбор.ВидСравнения = ВидСравнения.Содержит Тогда
			ВидСравненияСКД = ВидСравненияКомпоновкиДанных.Содержит;
		КонецЕсли;
		
	КонецЦикла;
	
	МетаданныеОтчета = Отчет.Метаданные();
	ИмяФормыОтчета = МетаданныеОтчета.ПолноеИмя() + ".Форма";
	
	СтруктураПараметров = Новый Структура();
	СтруктураПараметров.Вставить("Вариант",               ВариантОтчета.Настройки);
	СтруктураПараметров.Вставить("ЗаполнитьНастроки",     Ложь);
	//СтруктураПараметров.Вставить("КлючВарианта",          ВариантОтчета.Имя);
	//СтруктураПараметров.Вставить("ПредставлениеВарианта", ВариантОтчета.Представление);
	СтруктураПараметров.Вставить("СформироватьПриОткрытии", Истина);
	СтруктураПараметров.Вставить("ВариантЗагрузкиПериода",  "ВариантСтандартногоПериода.ПроизвольныйПериод");
	
	ОткрытьФорму(ИмяФормыОтчета, СтруктураПараметров);
	
	Если ТипЗнч(ЭтаФорма)=Тип("Форма") Тогда
		ЭтаФорма.Закрыть();
	КонецЕсли;
	
КонецПроцедуры // отОтчетОткрытьНовыйОтчет()

&ТолстыйКлиентОбычноеПриложение
Процедура ОткрытьОтчетПродажаАвтомобилейСКредитамиИСтрахованием() Экспорт
	
	Отчет = Отчеты.АнализПродажАвтомобилей.Создать();
	Отчет.ЗаполнитьНачальныеНастройки();
	
	МетаданныеОтчета  = Отчет.Метаданные();
	ВариантОтчета     = Отчет.СхемаКомпоновкиДанных.ВариантыНастроек.ПродажаАвтомобилейСКредитамиИСтрахованием;
	НастройкиВарианта = ВариантОтчета.Настройки;
	
	НастройкиВарианта.ПараметрыДанных.УстановитьЗначениеПараметра("ДатаНачала",    НачалоМесяца(ТекущаяДата()));
	НастройкиВарианта.ПараметрыДанных.УстановитьЗначениеПараметра("ДатаОкончания", КонецДня(ТекущаяДата()));
	
	ИмяФормыОтчета = МетаданныеОтчета.ПолноеИмя() + ".Форма";
	
	СтруктураПараметров = Новый Структура();
	СтруктураПараметров.Вставить("Вариант",                 НастройкиВарианта);
	СтруктураПараметров.Вставить("ЗаполнитьНастроки",       Ложь);
	СтруктураПараметров.Вставить("КлючВарианта",            ВариантОтчета.Имя);
	СтруктураПараметров.Вставить("ПредставлениеВарианта",   ВариантОтчета.Представление);
	СтруктураПараметров.Вставить("СформироватьПриОткрытии", Истина);
	СтруктураПараметров.Вставить("ВариантЗагрузкиПериода",  "ВариантСтандартногоПериода.ПроизвольныйПериод");
	
	ОткрытьФорму(ИмяФормыОтчета, СтруктураПараметров);
	
КонецПроцедуры

&ТолстыйКлиентОбычноеПриложение
Процедура ОткрытьОтчетРекомендацииПоАвтомобилямИсторияПричинОтказов() Экспорт
	
	Отчет = Отчеты.РекомендацииПоАвтомобилям.Создать();
	Отчет.ЗаполнитьНачальныеНастройки();
	
	МетаданныеОтчета  = Отчет.Метаданные();
	ВариантОтчета     = Отчет.СхемаКомпоновкиДанных.ВариантыНастроек.ИсторияПричинОтказов;
	НастройкиВарианта = ВариантОтчета.Настройки;
	
	НастройкиВарианта.ПараметрыДанных.УстановитьЗначениеПараметра("ДатаНачала",    НачалоМесяца(ТекущаяДата()));
	НастройкиВарианта.ПараметрыДанных.УстановитьЗначениеПараметра("ДатаОкончания", КонецДня(ТекущаяДата()));
	
	ИмяФормыОтчета = МетаданныеОтчета.ПолноеИмя() + ".Форма";
	
	СтруктураПараметров = Новый Структура();
	СтруктураПараметров.Вставить("Вариант",                 НастройкиВарианта);
	СтруктураПараметров.Вставить("ЗаполнитьНастроки",       Ложь);
	СтруктураПараметров.Вставить("КлючВарианта",            ВариантОтчета.Имя);
	СтруктураПараметров.Вставить("ПредставлениеВарианта",   ВариантОтчета.Представление);
	СтруктураПараметров.Вставить("СформироватьПриОткрытии", Истина);
	СтруктураПараметров.Вставить("ВариантЗагрузкиПериода",  "ВариантСтандартногоПериода.ПроизвольныйПериод");
	
	ОткрытьФорму(ИмяФормыОтчета, СтруктураПараметров);
	
КонецПроцедуры

Процедура УстановитьФлажкиТаблицы(Таблица, Использование) Экспорт
	
	Для Каждого ТекущаяСтрока Из Таблица Цикл
		ТекущаяСтрока.Использование = Использование;
	КонецЦикла;
	
КонецПроцедуры

Функция ПолучитьЭлементыДляДерева(ТекущиеДанные, ТаблицаЭлементов) Экспорт
	
	Если ТекущиеДанные = Неопределено Тогда
		Результат = ТаблицаЭлементов.ПолучитьЭлементы();
	ИначеЕсли (НЕ ТекущиеДанные.ПолучитьРодителя() = Неопределено) Тогда
		РодилельСтроки = ТекущиеДанные.ПолучитьРодителя();
		Результат = РодилельСтроки.ПолучитьЭлементы();
	Иначе
		Результат = ТаблицаЭлементов.ПолучитьЭлементы();
	КонецЕсли;
	
	Возврат Результат;
	
КонецФункции